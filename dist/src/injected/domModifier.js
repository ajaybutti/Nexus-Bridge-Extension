(function(){"use strict";function Ne(...e){console.debug("[NEXUS-INJECTION-DEBUGGER]",...e)}async function Qc(){if(!window.nexus?.getUnifiedBalances){let e=!1;for(;!e;)await new Promise(t=>setTimeout(t,10)),e=!!window.nexus?.getUnifiedBalances}return!0}const qe={UNIFIED_BALANCES:"unifiedBalances",ALREADY_RUNNING:"unifiedBalancesAlreadyRunning"};window.nexusCache=new Map,window.nexus&&window.nexus.getUnifiedBalances().then(e=>{window.nexusCache.set(qe.UNIFIED_BALANCES,{balances:e,expiry:Date.now()+3e4}),Ne("Unified balances cached:",e)}).catch(e=>{Ne("Failed to fetch unified balances:",e)});async function yr(){if(Ne("UNIFIED BALANCES",window.nexusCache,window.nexusCache.has(qe.UNIFIED_BALANCES),window.nexusCache.get(qe.UNIFIED_BALANCES),Date.now()),window.nexusCache.has(qe.UNIFIED_BALANCES)){const t=window.nexusCache.get(qe.UNIFIED_BALANCES);if(Ne("UNIFIED BALANCES CACHED",t,Date.now()),t.expiry>Date.now())return Ne("UNIFIED BALANCES RETURNING CACHE"),t.balances}Ne("UNIFIED BALANCES CACHE FALLBACK"),window.nexusCache.set(qe.ALREADY_RUNNING,!0),Ne("UNIFIED BALANCES FETCHING FROM NETWORK"),await Qc();const e=await window.nexus.getUnifiedBalances();return window.nexusCache.set(qe.ALREADY_RUNNING,!1),Ne("UNIFIED BALANCES FETCHED FROM NETWORK",e),window.nexusCache.set(qe.UNIFIED_BALANCES,{balances:e,expiry:Date.now()+60*1e3}),Ne("UNIFIED BALANCES Unified balances fetched and cached:",e),e}const eu="div.sc-bYMpWt.bSFGqc.dropper-select-list.variant_black",fs="div.sc-bjfHbI.lgpQZk.body18Regular",ps="div.sc-iJnaPW.bwRIip.variant_black",wr=e=>{let t=e.trim();switch(t.toLowerCase()){case"kaia mainnet":return"Kaia";case"op mainnet":return"Optimism";case"ethereum mainnet":return"Ethereum";default:return/mainnet/i.test(t)?t.replace(/\s*Mainnet/gi,"").trim():t}},tu="1.0.8";let fe=class ds extends Error{constructor(t,n={}){const r=n.cause instanceof ds?n.cause.details:n.cause?.message?n.cause.message:n.details,o=n.cause instanceof ds&&n.cause.docsPath||n.docsPath,s=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: https://abitype.dev${o}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${tu}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=o,this.metaMessages=n.metaMessages,this.shortMessage=t}};function Fe(e,t){return e.exec(t)?.groups}const hs=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,bs=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,ms=/^\(.+?\).*?$/,gs=/^tuple(?<array>(\[(\d*)\])*)$/;function xr(e){let t=e.type;if(gs.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let o=0;o<n;o++){const s=e.components[o];t+=xr(s),o<n-1&&(t+=", ")}const r=Fe(gs,e.type);return t+=`)${r?.array??""}`,xr({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Ot(e){let t="";const n=e.length;for(let r=0;r<n;r++){const o=e[r];t+=xr(o),r!==n-1&&(t+=", ")}return t}function kn(e){return e.type==="function"?`function ${e.name}(${Ot(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${Ot(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${Ot(e.inputs)})`:e.type==="error"?`error ${e.name}(${Ot(e.inputs)})`:e.type==="constructor"?`constructor(${Ot(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const ys=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function nu(e){return ys.test(e)}function ru(e){return Fe(ys,e)}const ws=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function ou(e){return ws.test(e)}function su(e){return Fe(ws,e)}const xs=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function iu(e){return xs.test(e)}function au(e){return Fe(xs,e)}const vs=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function vr(e){return vs.test(e)}function cu(e){return Fe(vs,e)}const Es=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function uu(e){return Es.test(e)}function du(e){return Fe(Es,e)}const Ss=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function lu(e){return Ss.test(e)}function fu(e){return Fe(Ss,e)}const pu=/^receive\(\) external payable$/;function hu(e){return pu.test(e)}const bu=new Set(["indexed"]),Er=new Set(["calldata","memory","storage"]);class mu extends fe{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class gu extends fe{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class yu extends fe{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class wu extends fe{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class xu extends fe{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class vu extends fe{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Eu extends fe{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Su extends fe{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class pt extends fe{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Au extends fe{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class $u extends fe{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Bu extends fe{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Pu extends fe{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function ku(e,t,n){let r="";if(n)for(const o of Object.entries(n)){if(!o)continue;let s="";for(const i of o[1])s+=`[${i.type}${i.name?`:${i.name}`:""}]`;r+=`(${o[0]}{${s}})`}return t?`${t}:${e}${r}`:e}const Sr=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Ar(e,t={}){if(iu(e))return Iu(e,t);if(ou(e))return Tu(e,t);if(nu(e))return Cu(e,t);if(uu(e))return Nu(e,t);if(lu(e))return Fu(e);if(hu(e))return{type:"receive",stateMutability:"payable"};throw new Au({signature:e})}function Iu(e,t={}){const n=au(e);if(!n)throw new pt({signature:e,type:"function"});const r=xe(n.parameters),o=[],s=r.length;for(let a=0;a<s;a++)o.push(Ke(r[a],{modifiers:Er,structs:t,type:"function"}));const i=[];if(n.returns){const a=xe(n.returns),c=a.length;for(let u=0;u<c;u++)i.push(Ke(a[u],{modifiers:Er,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:o,outputs:i}}function Tu(e,t={}){const n=su(e);if(!n)throw new pt({signature:e,type:"event"});const r=xe(n.parameters),o=[],s=r.length;for(let i=0;i<s;i++)o.push(Ke(r[i],{modifiers:bu,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:o}}function Cu(e,t={}){const n=ru(e);if(!n)throw new pt({signature:e,type:"error"});const r=xe(n.parameters),o=[],s=r.length;for(let i=0;i<s;i++)o.push(Ke(r[i],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:o}}function Nu(e,t={}){const n=du(e);if(!n)throw new pt({signature:e,type:"constructor"});const r=xe(n.parameters),o=[],s=r.length;for(let i=0;i<s;i++)o.push(Ke(r[i],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:o}}function Fu(e){const t=fu(e);if(!t)throw new pt({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}const Mu=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,zu=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Uu=/^u?int$/;function Ke(e,t){const n=ku(e,t?.type,t?.structs);if(Sr.has(n))return Sr.get(n);const r=ms.test(e),o=Fe(r?zu:Mu,e);if(!o)throw new wu({param:e});if(o.name&&Lu(o.name))throw new xu({param:e,name:o.name});const s=o.name?{name:o.name}:{},i=o.modifier==="indexed"?{indexed:!0}:{},a=t?.structs??{};let c,u={};if(r){c="tuple";const f=xe(o.type),d=[],p=f.length;for(let h=0;h<p;h++)d.push(Ke(f[h],{structs:a}));u={components:d}}else if(o.type in a)c="tuple",u={components:a[o.type]};else if(Uu.test(o.type))c=`${o.type}256`;else if(c=o.type,t?.type!=="struct"&&!As(c))throw new yu({type:c});if(o.modifier){if(!t?.modifiers?.has?.(o.modifier))throw new vu({param:e,type:t?.type,modifier:o.modifier});if(Er.has(o.modifier)&&!Ou(c,!!o.array))throw new Eu({param:e,type:t?.type,modifier:o.modifier})}const l={type:`${c}${o.array??""}`,...s,...i,...u};return Sr.set(n,l),l}function xe(e,t=[],n="",r=0){const o=e.trim().length;for(let s=0;s<o;s++){const i=e[s],a=e.slice(s+1);switch(i){case",":return r===0?xe(a,[...t,n.trim()]):xe(a,t,`${n}${i}`,r);case"(":return xe(a,t,`${n}${i}`,r+1);case")":return xe(a,t,`${n}${i}`,r-1);default:return xe(a,t,`${n}${i}`,r)}}if(n==="")return t;if(r!==0)throw new Pu({current:n,depth:r});return t.push(n.trim()),t}function As(e){return e==="address"||e==="bool"||e==="function"||e==="string"||hs.test(e)||bs.test(e)}const Ru=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Lu(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||hs.test(e)||bs.test(e)||Ru.test(e)}function Ou(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function $s(e){const t={},n=e.length;for(let i=0;i<n;i++){const a=e[i];if(!vr(a))continue;const c=cu(a);if(!c)throw new pt({signature:a,type:"struct"});const u=c.properties.split(";"),l=[],f=u.length;for(let d=0;d<f;d++){const h=u[d].trim();if(!h)continue;const b=Ke(h,{type:"struct"});l.push(b)}if(!l.length)throw new $u({signature:a});t[c.name]=l}const r={},o=Object.entries(t),s=o.length;for(let i=0;i<s;i++){const[a,c]=o[i];r[a]=Bs(c,t)}return r}const Du=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Bs(e,t,n=new Set){const r=[],o=e.length;for(let s=0;s<o;s++){const i=e[s];if(ms.test(i.type))r.push(i);else{const c=Fe(Du,i.type);if(!c?.type)throw new Su({abiParameter:i});const{array:u,type:l}=c;if(l in t){if(n.has(l))throw new Bu({type:l});r.push({...i,type:`tuple${u??""}`,components:Bs(t[l]??[],t,new Set([...n,l]))})}else if(As(l))r.push(i);else throw new gu({type:l})}}return r}function In(e){const t=$s(e),n=[],r=e.length;for(let o=0;o<r;o++){const s=e[o];vr(s)||n.push(Ar(s,t))}return n}function Ps(e){let t;if(typeof e=="string")t=Ar(e);else{const n=$s(e),r=e.length;for(let o=0;o<r;o++){const s=e[o];if(!vr(s)){t=Ar(s,n);break}}}if(!t)throw new mu({signature:e});return t}function N(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const o=e[n];return typeof o=="function"?o:s=>t(e,s)}function ve(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new Qu(e.type);return`${e.name}(${Tn(e.inputs,{includeName:t})})`}function Tn(e,{includeName:t=!1}={}){return e?e.map(n=>_u(n,{includeName:t})).join(t?", ":","):""}function _u(e,{includeName:t}){return e.type.startsWith("tuple")?`(${Tn(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function Ee(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function G(e){return Ee(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const ks="2.34.0";let $r={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${ks}`},v=class ls extends Error{constructor(t,n={}){const r=n.cause instanceof ls?n.cause.details:n.cause?.message?n.cause.message:n.details,o=n.cause instanceof ls&&n.cause.docsPath||n.docsPath,s=$r.getDocsUrl?.({...n,docsPath:o}),i=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],...$r.version?[`Version: ${$r.version}`]:[]].join(`
`);super(i,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=o,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=ks}walk(t){return Is(this,t)}};function Is(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Is(e.cause,t):t?null:e}class ju extends v{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class Ts extends v{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class Cs extends v{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Tn(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class Dt extends v{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Hu extends v{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class qu extends v{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${G(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Gu extends v{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Vu extends v{constructor(t,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${t}", but "${t}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class Ns extends v{constructor(t,{docsPath:n}={}){super([`Error ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class Fs extends v{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class Xu extends v{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class Ms extends v{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class zs extends v{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class ht extends v{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Us extends v{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Zu extends v{constructor(t,{docsPath:n}){super([`Encoded function signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class Wu extends v{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${ve(t.abiItem)}\`, and`,`\`${n.type}\` in \`${ve(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Ku=class extends v{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class _t extends v{constructor({abiItem:t,data:n,params:r,size:o}){super([`Data size of ${o} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Tn(r,{includeName:!0})})`,`Data:   ${n} (${o} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=o}}class Cn extends v{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${ve(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class Yu extends v{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Ju extends v{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let Rs=class extends v{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class Qu extends v{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class ed extends v{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let Ls=class extends v{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},Os=class extends v{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class Ds extends v{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${t} ${r} long.`,{name:"InvalidBytesLengthError"})}}function bt(e,{dir:t,size:n=32}={}){return typeof e=="string"?Ge(e,{dir:t,size:n}):td(e,{dir:t,size:n})}function Ge(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Os({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function td(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Os({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let o=0;o<n;o++){const s=t==="right";r[s?o:n-o-1]=e[s?o:e.length-o-1]}return r}let _s=class extends v{constructor({max:t,min:n,signed:r,size:o,value:s}){super(`Number "${s}" is not in safe ${o?`${o*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class nd extends v{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class rd extends v{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let od=class extends v{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}};function be(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let o=0;o<n.length-1&&n[t==="left"?o:n.length-o-1].toString()==="0";o++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Se(e,{size:t}){if(G(e)>t)throw new od({givenSize:G(e),maxSize:t})}function Q(e,t={}){const{signed:n}=t;t.size&&Se(e,{size:t.size});const r=BigInt(e);if(!n)return r;const o=(e.length-2)/2,s=(1n<<BigInt(o)*8n-1n)-1n;return r<=s?r:r-BigInt(`0x${"f".padStart(o*2,"f")}`)-1n}function sd(e,t={}){let n=e;if(t.size&&(Se(n,{size:t.size}),n=be(n)),be(n)==="0x00")return!1;if(be(n)==="0x01")return!0;throw new rd(n)}function me(e,t={}){return Number(Q(e,t))}const id=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function re(e,t={}){return typeof e=="number"||typeof e=="bigint"?A(e,t):typeof e=="string"?mt(e,t):typeof e=="boolean"?js(e,t):K(e,t)}function js(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Se(n,{size:t.size}),bt(n,{size:t.size})):n}function K(e,t={}){let n="";for(let o=0;o<e.length;o++)n+=id[e[o]];const r=`0x${n}`;return typeof t.size=="number"?(Se(r,{size:t.size}),bt(r,{dir:"right",size:t.size})):r}function A(e,t={}){const{signed:n,size:r}=t,o=BigInt(e);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof s=="bigint"&&n?-s-1n:0;if(s&&o>s||o<i){const c=typeof e=="bigint"?"n":"";throw new _s({max:s?`${s}${c}`:void 0,min:`${i}${c}`,signed:n,size:r,value:`${e}${c}`})}const a=`0x${(n&&o<0?(1n<<BigInt(r*8))+BigInt(o):o).toString(16)}`;return r?bt(a,{size:r}):a}const ad=new TextEncoder;function mt(e,t={}){const n=ad.encode(e);return K(n,t)}const cd=new TextEncoder;function gt(e,t={}){return typeof e=="number"||typeof e=="bigint"?dd(e,t):typeof e=="boolean"?ud(e,t):Ee(e)?Ae(e,t):Ye(e,t)}function ud(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(Se(n,{size:t.size}),bt(n,{size:t.size})):n}const Me={zero:48,nine:57,A:65,F:70,a:97,f:102};function Hs(e){if(e>=Me.zero&&e<=Me.nine)return e-Me.zero;if(e>=Me.A&&e<=Me.F)return e-(Me.A-10);if(e>=Me.a&&e<=Me.f)return e-(Me.a-10)}function Ae(e,t={}){let n=e;t.size&&(Se(n,{size:t.size}),n=bt(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const o=r.length/2,s=new Uint8Array(o);for(let i=0,a=0;i<o;i++){const c=Hs(r.charCodeAt(a++)),u=Hs(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new v(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);s[i]=c*16+u}return s}function dd(e,t){const n=A(e,t);return Ae(n)}function Ye(e,t={}){const n=cd.encode(e);return typeof t.size=="number"?(Se(n,{size:t.size}),bt(n,{dir:"right",size:t.size})):n}const Nn=BigInt(2**32-1),qs=BigInt(32);function ld(e,t=!1){return t?{h:Number(e&Nn),l:Number(e>>qs&Nn)}:{h:Number(e>>qs&Nn)|0,l:Number(e&Nn)|0}}function fd(e,t=!1){const n=e.length;let r=new Uint32Array(n),o=new Uint32Array(n);for(let s=0;s<n;s++){const{h:i,l:a}=ld(e[s],t);[r[s],o[s]]=[i,a]}return[r,o]}const pd=(e,t,n)=>e<<n|t>>>32-n,hd=(e,t,n)=>t<<n|e>>>32-n,bd=(e,t,n)=>t<<n-32|e>>>64-n,md=(e,t,n)=>e<<n-32|t>>>64-n,yt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function jt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function ze(e,...t){if(!Fn(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Gs(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");jt(e.outputLen),jt(e.blockLen)}function wt(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Vs(e,t){ze(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function gd(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function xt(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Br(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Pe(e,t){return e<<32-t|e>>>t}const yd=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function wd(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function xd(e){for(let t=0;t<e.length;t++)e[t]=wd(e[t]);return e}const Xs=yd?e=>e:xd,Zs=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",vd=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function vt(e){if(ze(e),Zs)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=vd[e[n]];return t}const Ue={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ws(e){if(e>=Ue._0&&e<=Ue._9)return e-Ue._0;if(e>=Ue.A&&e<=Ue.F)return e-(Ue.A-10);if(e>=Ue.a&&e<=Ue.f)return e-(Ue.a-10)}function Mn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Zs)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,s=0;o<n;o++,s+=2){const i=Ws(e.charCodeAt(s)),a=Ws(e.charCodeAt(s+1));if(i===void 0||a===void 0){const c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[o]=i*16+a}return r}function Ed(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function zn(e){return typeof e=="string"&&(e=Ed(e)),ze(e),e}function Ve(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];ze(o),t+=o.length}const n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const s=e[r];n.set(s,o),o+=s.length}return n}class Pr{}function Ks(e){const t=r=>e().update(zn(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Ys(e=32){if(yt&&typeof yt.getRandomValues=="function")return yt.getRandomValues(new Uint8Array(e));if(yt&&typeof yt.randomBytes=="function")return Uint8Array.from(yt.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const Sd=BigInt(0),Ht=BigInt(1),Ad=BigInt(2),$d=BigInt(7),Bd=BigInt(256),Pd=BigInt(113),Js=[],Qs=[],ei=[];for(let e=0,t=Ht,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Js.push(2*(5*r+n)),Qs.push((e+1)*(e+2)/2%64);let o=Sd;for(let s=0;s<7;s++)t=(t<<Ht^(t>>$d)*Pd)%Bd,t&Ad&&(o^=Ht<<(Ht<<BigInt(s))-Ht);ei.push(o)}const ti=fd(ei,!0),kd=ti[0],Id=ti[1],ni=(e,t,n)=>n>32?bd(e,t,n):pd(e,t,n),ri=(e,t,n)=>n>32?md(e,t,n):hd(e,t,n);function Td(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10,c=(i+2)%10,u=n[c],l=n[c+1],f=ni(u,l,1)^n[a],d=ri(u,l,1)^n[a+1];for(let p=0;p<50;p+=10)e[i+p]^=f,e[i+p+1]^=d}let o=e[2],s=e[3];for(let i=0;i<24;i++){const a=Qs[i],c=ni(o,s,a),u=ri(o,s,a),l=Js[i];o=e[l],s=e[l+1],e[l]=c,e[l+1]=u}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)n[a]=e[i+a];for(let a=0;a<10;a++)e[i+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=kd[r],e[1]^=Id[r]}xt(n)}class kr extends Pr{constructor(t,n,r,o=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=o,this.rounds=s,jt(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=gd(this.state)}clone(){return this._cloneInto()}keccak(){Xs(this.state32),Td(this.state32,this.rounds),Xs(this.state32),this.posOut=0,this.pos=0}update(t){wt(this),t=zn(t),ze(t);const{blockLen:n,state:r}=this,o=t.length;for(let s=0;s<o;){const i=Math.min(n-this.pos,o-s);for(let a=0;a<i;a++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:o}=this;t[r]^=n,(n&128)!==0&&r===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){wt(this,!1),ze(t),this.finish();const n=this.state,{blockLen:r}=this;for(let o=0,s=t.length;o<s;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,s-o);t.set(n.subarray(this.posOut,this.posOut+i),o),this.posOut+=i,o+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return jt(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Vs(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,xt(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:o,rounds:s,enableXOF:i}=this;return t||(t=new kr(n,r,o,i,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=o,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Cd=(e,t,n)=>Ks(()=>new kr(t,e,n)),oi=Cd(1,136,256/8);function ee(e,t){const n=t||"hex",r=oi(Ee(e,{strict:!1})?gt(e):e);return n==="bytes"?r:re(r)}const Nd=e=>ee(gt(e));function Fd(e){return Nd(e)}function Md(e){let t=!0,n="",r=0,o="",s=!1;for(let i=0;i<e.length;i++){const a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&r++,a===")"&&r--,!!t){if(r===0){if(a===" "&&["event","function",""].includes(o))o="";else if(o+=a,a===")"){s=!0;break}continue}if(a===" "){e[i-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}o+=a,n+=a}}if(!s)throw new v("Unable to normalize signature.");return o}const zd=e=>{const t=typeof e=="string"?e:kn(e);return Md(t)};function si(e){return Fd(zd(e))}const Un=si;let oe=class extends v{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Rn=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Ir=new Rn(8192);function qt(e,t){if(Ir.has(`${e}.${t}`))return Ir.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=ee(Ye(n),"bytes"),o=n.split("");for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&o[i]&&(o[i]=o[i].toUpperCase()),(r[i>>1]&15)>=8&&o[i+1]&&(o[i+1]=o[i+1].toUpperCase());const s=`0x${o.join("")}`;return Ir.set(`${e}.${t}`,s),s}function ii(e,t){if(!Y(e,{strict:!1}))throw new oe({address:e});return qt(e,t)}const Ud=/^0x[a-fA-F0-9]{40}$/,Tr=new Rn(8192);function Y(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Tr.has(r))return Tr.get(r);const o=Ud.test(e)?e.toLowerCase()===e?!0:n?qt(e)===e:!0:!1;return Tr.set(r,o),o}function pe(e){return typeof e[0]=="string"?$e(e):Rd(e)}function Rd(e){let t=0;for(const o of e)t+=o.length;const n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}function $e(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Je(e,t,n,{strict:r}={}){return Ee(e,{strict:!1})?Ln(e,t,n,{strict:r}):ui(e,t,n,{strict:r})}function ai(e,t){if(typeof t=="number"&&t>0&&t>G(e)-1)throw new Ls({offset:t,position:"start",size:G(e)})}function ci(e,t,n){if(typeof t=="number"&&typeof n=="number"&&G(e)!==n-t)throw new Ls({offset:n,position:"end",size:G(e)})}function ui(e,t,n,{strict:r}={}){ai(e,t);const o=e.slice(t,n);return r&&ci(o,t,n),o}function Ln(e,t,n,{strict:r}={}){ai(e,t);const o=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&ci(o,t,n),o}const Ld=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,di=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Re(e,t){if(e.length!==t.length)throw new Gu({expectedLength:e.length,givenLength:t.length});const n=Od({params:e,values:t}),r=Nr(n);return r.length===0?"0x":r}function Od({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(Cr({param:e[r],value:t[r]}));return n}function Cr({param:e,value:t}){const n=Fr(e.type);if(n){const[r,o]=n;return _d(t,{length:r,param:{...e,type:o}})}if(e.type==="tuple")return Vd(t,{param:e});if(e.type==="address")return Dd(t);if(e.type==="bool")return Hd(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,o="256"]=di.exec(e.type)??[];return qd(t,{signed:r,size:Number(o)})}if(e.type.startsWith("bytes"))return jd(t,{param:e});if(e.type==="string")return Gd(t);throw new Yu(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Nr(e){let t=0;for(let s=0;s<e.length;s++){const{dynamic:i,encoded:a}=e[s];i?t+=32:t+=G(a)}const n=[],r=[];let o=0;for(let s=0;s<e.length;s++){const{dynamic:i,encoded:a}=e[s];i?(n.push(A(t+o,{size:32})),r.push(a),o+=G(a)):n.push(a)}return pe([...n,...r])}function Dd(e){if(!Y(e))throw new oe({address:e});return{dynamic:!1,encoded:Ge(e.toLowerCase())}}function _d(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new Rs(e);if(!r&&e.length!==t)throw new Hu({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let o=!1;const s=[];for(let i=0;i<e.length;i++){const a=Cr({param:n,value:e[i]});a.dynamic&&(o=!0),s.push(a)}if(r||o){const i=Nr(s);if(r){const a=A(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?pe([a,i]):a}}if(o)return{dynamic:!0,encoded:i}}return{dynamic:!1,encoded:pe(s.map(({encoded:i})=>i))}}function jd(e,{param:t}){const[,n]=t.type.split("bytes"),r=G(e);if(!n){let o=e;return r%32!==0&&(o=Ge(o,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:pe([Ge(A(r,{size:32})),o])}}if(r!==Number.parseInt(n))throw new qu({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:Ge(e,{dir:"right"})}}function Hd(e){if(typeof e!="boolean")throw new v(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Ge(js(e))}}function qd(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,o=t?-r-1n:0n;if(e>r||e<o)throw new _s({max:r.toString(),min:o.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:A(e,{size:32,signed:t})}}function Gd(e){const t=mt(e),n=Math.ceil(G(t)/32),r=[];for(let o=0;o<n;o++)r.push(Ge(Je(t,o*32,(o+1)*32),{dir:"right"}));return{dynamic:!0,encoded:pe([Ge(A(G(t),{size:32})),...r])}}function Vd(e,{param:t}){let n=!1;const r=[];for(let o=0;o<t.components.length;o++){const s=t.components[o],i=Array.isArray(e)?o:s.name,a=Cr({param:s,value:e[i]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Nr(r):pe(r.map(({encoded:o})=>o))}}function Fr(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const Gt=e=>Je(si(e),0,4);function Qe(e){const{abi:t,args:n=[],name:r}=e,o=Ee(r,{strict:!1}),s=t.filter(a=>o?a.type==="function"?Gt(a)===r:a.type==="event"?Un(a)===r:!1:"name"in a&&a.name===r);if(s.length===0)return;if(s.length===1)return s[0];let i;for(const a of s){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,l)=>{const f="inputs"in a&&a.inputs[l];return f?Mr(u,f):!1})){if(i&&"inputs"in i&&i.inputs){const u=li(a.inputs,i.inputs,n);if(u)throw new Wu({abiItem:a,type:u[0]},{abiItem:i,type:u[1]})}i=a}}return i||s[0]}function Mr(e,t){const n=typeof e,r=t.type;switch(r){case"address":return Y(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((o,s)=>Mr(Object.values(e)[s],o)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(o=>Mr(o,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function li(e,t,n){for(const r in e){const o=e[r],s=t[r];if(o.type==="tuple"&&s.type==="tuple"&&"components"in o&&"components"in s)return li(o.components,s.components,n[r]);const i=[o.type,s.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?Y(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?Y(n[r],{strict:!1}):!1)return i}}const fi="/docs/contract/encodeEventTopics";function Vt(e){const{abi:t,eventName:n,args:r}=e;let o=t[0];if(n){const c=Qe({abi:t,name:n});if(!c)throw new zs(n,{docsPath:fi});o=c}if(o.type!=="event")throw new zs(void 0,{docsPath:fi});const s=ve(o),i=Un(s);let a=[];if(r&&"inputs"in o){const c=o.inputs?.filter(l=>"indexed"in l&&l.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?c?.map(l=>r[l.name])??[]:[];u.length>0&&(a=c?.map((l,f)=>Array.isArray(u[f])?u[f].map((d,p)=>pi({param:l,value:u[f][p]})):typeof u[f]<"u"&&u[f]!==null?pi({param:l,value:u[f]}):null)??[])}return[i,...a]}function pi({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return ee(gt(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new ed(e.type);return Re([e],[t])}function On(e,{method:t}){const n={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:r,response:o,status:s,transport:i})=>{s==="success"&&t===r&&(n[o]=i.request)}),r=>n[r]||e.request}async function zr(e,t){const{address:n,abi:r,args:o,eventName:s,fromBlock:i,strict:a,toBlock:c}=t,u=On(e,{method:"eth_newFilter"}),l=s?Vt({abi:r,args:o,eventName:s}):void 0,f=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof i=="bigint"?A(i):i,toBlock:typeof c=="bigint"?A(c):c,topics:l}]});return{abi:r,args:o,eventName:s,id:f,request:u(f),strict:!!a,type:"event"}}function Z(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const hi="/docs/contract/encodeFunctionData";function Xd(e){const{abi:t,args:n,functionName:r}=e;let o=t[0];if(r){const s=Qe({abi:t,args:n,name:r});if(!s)throw new ht(r,{docsPath:hi});o=s}if(o.type!=="function")throw new ht(void 0,{docsPath:hi});return{abi:[o],functionName:Gt(ve(o))}}function ge(e){const{args:t}=e,{abi:n,functionName:r}=e.abi.length===1&&e.functionName?.startsWith("0x")?e:Xd(e),o=n[0],s=r,i="inputs"in o&&o.inputs?Re(o.inputs,t??[]):void 0;return $e([s,i??"0x"])}const bi={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},mi={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Zd={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class gi extends v{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class yi extends v{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}}class Wd extends v{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Kd={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Wd({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new yi({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new gi({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new gi({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Ur(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(Kd);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function Yd(e,t={}){typeof t.size<"u"&&Se(e,{size:t.size});const n=K(e,t);return Q(n,t)}function Jd(e,t={}){let n=e;if(typeof t.size<"u"&&(Se(n,{size:t.size}),n=be(n)),n.length>1||n[0]>1)throw new nd(n);return!!n[0]}function Le(e,t={}){typeof t.size<"u"&&Se(e,{size:t.size});const n=K(e,t);return me(n,t)}function Qd(e,t={}){let n=e;return typeof t.size<"u"&&(Se(n,{size:t.size}),n=be(n,{dir:"right"})),new TextDecoder().decode(n)}function Xt(e,t){const n=typeof t=="string"?Ae(t):t,r=Ur(n);if(G(n)===0&&e.length>0)throw new Dt;if(G(t)&&G(t)<32)throw new Cs({data:typeof t=="string"?t:K(t),params:e,size:G(t)});let o=0;const s=[];for(let i=0;i<e.length;++i){const a=e[i];r.setPosition(o);const[c,u]=Et(r,a,{staticPosition:0});o+=u,s.push(c)}return s}function Et(e,t,{staticPosition:n}){const r=Fr(t.type);if(r){const[o,s]=r;return tl(e,{...t,type:s},{length:o,staticPosition:n})}if(t.type==="tuple")return sl(e,t,{staticPosition:n});if(t.type==="address")return el(e);if(t.type==="bool")return nl(e);if(t.type.startsWith("bytes"))return rl(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return ol(e,t);if(t.type==="string")return il(e,{staticPosition:n});throw new Ju(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const wi=32,Rr=32;function el(e){const t=e.readBytes(32);return[qt(K(ui(t,-20))),32]}function tl(e,t,{length:n,staticPosition:r}){if(!n){const i=Le(e.readBytes(Rr)),a=r+i,c=a+wi;e.setPosition(a);const u=Le(e.readBytes(wi)),l=Zt(t);let f=0;const d=[];for(let p=0;p<u;++p){e.setPosition(c+(l?p*32:f));const[h,b]=Et(e,t,{staticPosition:c});f+=b,d.push(h)}return e.setPosition(r+32),[d,32]}if(Zt(t)){const i=Le(e.readBytes(Rr)),a=r+i,c=[];for(let u=0;u<n;++u){e.setPosition(a+u*32);const[l]=Et(e,t,{staticPosition:a});c.push(l)}return e.setPosition(r+32),[c,32]}let o=0;const s=[];for(let i=0;i<n;++i){const[a,c]=Et(e,t,{staticPosition:r+o});o+=c,s.push(a)}return[s,o]}function nl(e){return[Jd(e.readBytes(32),{size:32}),32]}function rl(e,t,{staticPosition:n}){const[r,o]=t.type.split("bytes");if(!o){const i=Le(e.readBytes(32));e.setPosition(n+i);const a=Le(e.readBytes(32));if(a===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(a);return e.setPosition(n+32),[K(c),32]}return[K(e.readBytes(Number.parseInt(o),32)),32]}function ol(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256"),o=e.readBytes(32);return[r>48?Yd(o,{signed:n}):Le(o,{signed:n}),32]}function sl(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:i})=>!i),o=r?[]:{};let s=0;if(Zt(t)){const i=Le(e.readBytes(Rr)),a=n+i;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(a+s);const[l,f]=Et(e,u,{staticPosition:a});s+=f,o[r?c:u?.name]=l}return e.setPosition(n+32),[o,32]}for(let i=0;i<t.components.length;++i){const a=t.components[i],[c,u]=Et(e,a,{staticPosition:n});o[r?i:a?.name]=c,s+=u}return[o,s]}function il(e,{staticPosition:t}){const n=Le(e.readBytes(32)),r=t+n;e.setPosition(r);const o=Le(e.readBytes(32));if(o===0)return e.setPosition(t+32),["",32];const s=e.readBytes(o,32),i=Qd(be(s));return e.setPosition(t+32),[i,32]}function Zt(e){const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(Zt);const n=Fr(e.type);return!!(n&&Zt({...e,type:n[1]}))}function xi(e){const{abi:t,data:n}=e,r=Je(n,0,4);if(r==="0x")throw new Dt;const s=[...t||[],mi,Zd].find(i=>i.type==="error"&&r===Gt(ve(i)));if(!s)throw new Fs(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Xt(s.inputs,Je(n,4)):void 0,errorName:s.name}}const te=(e,t,n)=>JSON.stringify(e,(r,o)=>typeof o=="bigint"?o.toString():o,n);function vi({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((o,s)=>`${r&&o.name?`${o.name}: `:""}${typeof t[s]=="object"?te(t[s]):t[s]}`).join(", ")})`}const Ei={gwei:9,wei:18},al={ether:-9,wei:9};function Lr(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[o,s]=[n.slice(0,n.length-t),n.slice(n.length-t)];return s=s.replace(/(0+)$/,""),`${r?"-":""}${o||"0"}${s?`.${s}`:""}`}function Wt(e,t="wei"){return Lr(e,Ei[t])}function ae(e,t="wei"){return Lr(e,al[t])}class cl extends v{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class ul extends v{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Si(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function dl(e){return e.reduce((t,{address:n,...r})=>{let o=`${t}    ${n}:
`;return r.nonce&&(o+=`      nonce: ${r.nonce}
`),r.balance&&(o+=`      balance: ${r.balance}
`),r.code&&(o+=`      code: ${r.code}
`),r.state&&(o+=`      state:
`,o+=Si(r.state)),r.stateDiff&&(o+=`      stateDiff:
`,o+=Si(r.stateDiff)),o},`  State Override:
`).slice(0,-1)}function Kt(e){const t=Object.entries(e).map(([r,o])=>o===void 0||o===!1?null:[r,o]).filter(Boolean),n=t.reduce((r,[o])=>Math.max(r,o.length),0);return t.map(([r,o])=>`  ${`${r}:`.padEnd(n+1)}  ${o}`).join(`
`)}class ll extends v{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class fl extends v{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class pl extends v{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Kt(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class hl extends v{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class bl extends v{constructor(t,{account:n,docsPath:r,chain:o,data:s,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:d}){const p=Kt({chain:o&&`${o?.name} (id: ${o?.id})`,from:n?.address,to:f,value:typeof d<"u"&&`${Wt(d)} ${o?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:i,gasPrice:typeof a<"u"&&`${ae(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ae(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ae(u)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",p].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Ai extends v{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:o,index:s}){let i="Transaction";r&&s!==void 0&&(i=`Transaction at block time "${r}" at index "${s}"`),t&&s!==void 0&&(i=`Transaction at block hash "${t}" at index "${s}"`),n&&s!==void 0&&(i=`Transaction at block number "${n}" at index "${s}"`),o&&(i=`Transaction with hash "${o}"`),super(`${i} could not be found.`,{name:"TransactionNotFoundError"})}}class $i extends v{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class ml extends v{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const gl=e=>e,Dn=e=>e;class Bi extends v{constructor(t,{account:n,docsPath:r,chain:o,data:s,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:d,stateOverride:p}){const h=n?Z(n):void 0;let b=Kt({from:h?.address,to:f,value:typeof d<"u"&&`${Wt(d)} ${o?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:i,gasPrice:typeof a<"u"&&`${ae(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ae(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ae(u)} gwei`,nonce:l});p&&(b+=`
${dl(p)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",b].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class yl extends v{constructor(t,{abi:n,args:r,contractAddress:o,docsPath:s,functionName:i,sender:a}){const c=Qe({abi:n,args:r,name:i}),u=c?vi({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?ve(c,{includeName:!0}):void 0,f=Kt({address:o&&gl(o),function:l,args:u&&u!=="()"&&`${[...Array(i?.length??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(t.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:t,docsPath:s,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],f&&"Contract Call:",f].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=o,this.functionName=i,this.sender=a}}class Or extends v{constructor({abi:t,data:n,functionName:r,message:o}){let s,i,a,c;if(n&&n!=="0x")try{i=xi({abi:t,data:n});const{abiItem:l,errorName:f,args:d}=i;if(f==="Error")c=d[0];else if(f==="Panic"){const[p]=d;c=bi[p]}else{const p=l?ve(l,{includeName:!0}):void 0,h=l&&d?vi({abiItem:l,args:d,includeFunctionName:!1,includeName:!1}):void 0;a=[p?`Error: ${p}`:"",h&&h!=="()"?`       ${[...Array(f?.length??0).keys()].map(()=>" ").join("")}${h}`:""]}}catch(l){s=l}else o&&(c=o);let u;s instanceof Fs&&(u=s.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:s,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=i,this.raw=n,this.reason=c,this.signature=u}}class wl extends v{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class xl extends v{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class _n extends v{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}class jn extends v{constructor({body:t,cause:n,details:r,headers:o,status:s,url:i}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[s&&`Status: ${s}`,`URL: ${Dn(i)}`,t&&`Request body: ${te(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=o,this.status=s,this.url=i}}class Pi extends v{constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${Dn(r)}`,`Request body: ${te(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}const vl=-1;class ce extends v{constructor(t,{code:n,docsPath:r,metaMessages:o,name:s,shortMessage:i}){super(i,{cause:t,docsPath:r,metaMessages:o||t?.metaMessages,name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||t.name,this.code=t instanceof Pi?t.code:n??vl}}class he extends ce{constructor(t,n){super(t,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Yt extends ce{constructor(t){super(t,{code:Yt.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Yt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Jt extends ce{constructor(t){super(t,{code:Jt.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Jt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Qt extends ce{constructor(t,{method:n}={}){super(t,{code:Qt.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Qt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class en extends ce{constructor(t){super(t,{code:en.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(en,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class et extends ce{constructor(t){super(t,{code:et.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(et,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class tt extends ce{constructor(t){super(t,{code:tt.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(tt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class tn extends ce{constructor(t){super(t,{code:tn.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(tn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class nn extends ce{constructor(t){super(t,{code:nn.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(nn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class rn extends ce{constructor(t){super(t,{code:rn.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(rn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class nt extends ce{constructor(t,{method:n}={}){super(t,{code:nt.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(nt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class St extends ce{constructor(t){super(t,{code:St.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(St,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class on extends ce{constructor(t){super(t,{code:on.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(on,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class At extends he{constructor(t){super(t,{code:At.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(At,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class sn extends he{constructor(t){super(t,{code:sn.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(sn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class an extends he{constructor(t,{method:n}={}){super(t,{code:an.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(an,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class cn extends he{constructor(t){super(t,{code:cn.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(cn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class un extends he{constructor(t){super(t,{code:un.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(un,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class dn extends he{constructor(t){super(t,{code:dn.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(dn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class $t extends he{constructor(t){super(t,{code:$t.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty($t,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class ln extends he{constructor(t){super(t,{code:ln.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class fn extends he{constructor(t){super(t,{code:fn.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(fn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class pn extends he{constructor(t){super(t,{code:pn.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class hn extends he{constructor(t){super(t,{code:hn.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class bn extends he{constructor(t){super(t,{code:bn.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Bt extends he{constructor(t){super(t,{code:Bt.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Bt,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class El extends ce{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const Sl=3;function rt(e,{abi:t,address:n,args:r,docsPath:o,functionName:s,sender:i}){const a=e instanceof _n?e:e instanceof v?e.walk(h=>"data"in h)||e.walk():{},{code:c,data:u,details:l,message:f,shortMessage:d}=a,p=e instanceof Dt?new wl({functionName:s}):[Sl,et.code].includes(c)&&(u||l||f||d)?new Or({abi:t,data:typeof u=="object"?u.data:u,functionName:s,message:a instanceof Pi?l:d??f}):e;return new yl(p,{abi:t,args:r,contractAddress:n,docsPath:o,functionName:s,sender:i})}function Al(e){const t=ee(`0x${e.substring(4)}`).substring(26);return qt(`0x${t}`)}async function $l({hash:e,signature:t}){const n=Ee(e)?e:re(e),{secp256k1:r}=await Promise.resolve().then(()=>wh);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:l,v:f,yParity:d}=t,p=Number(d??f),h=ki(p);return new r.Signature(Q(u),Q(l)).addRecoveryBit(h)}const i=Ee(t)?t:re(t);if(G(i)!==65)throw new Error("invalid signature length");const a=me(`0x${i.slice(130)}`),c=ki(a);return r.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function ki(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function Ii({hash:e,signature:t}){return Al(await $l({hash:e,signature:t}))}function Xe(e,t="hex"){const n=Ti(e),r=Ur(new Uint8Array(n.length));return n.encode(r),t==="hex"?K(r.bytes):r.bytes}function Ti(e){return Array.isArray(e)?Bl(e.map(t=>Ti(t))):Pl(e)}function Bl(e){const t=e.reduce((o,s)=>o+s.length,0),n=Ci(t);return{length:t<=55?1+t:1+n+t,encode(o){t<=55?o.pushByte(192+t):(o.pushByte(247+n),n===1?o.pushUint8(t):n===2?o.pushUint16(t):n===3?o.pushUint24(t):o.pushUint32(t));for(const{encode:s}of e)s(o)}}}function Pl(e){const t=typeof e=="string"?Ae(e):e,n=Ci(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(o){t.length===1&&t[0]<128?o.pushBytes(t):t.length<=55?(o.pushByte(128+t.length),o.pushBytes(t)):(o.pushByte(183+n),n===1?o.pushUint8(t.length):n===2?o.pushUint16(t.length):n===3?o.pushUint24(t.length):o.pushUint32(t.length),o.pushBytes(t))}}}function Ci(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new v("Length is too large.")}function kl(e){const{chainId:t,nonce:n,to:r}=e,o=e.contractAddress??e.address,s=ee($e(["0x05",Xe([t?A(t):"0x",o,n?A(n):"0x"])]));return r==="bytes"?Ae(s):s}async function Ni(e){const{authorization:t,signature:n}=e;return Ii({hash:kl(t),signature:n??t})}class Il extends v{constructor(t,{account:n,docsPath:r,chain:o,data:s,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:d}){const p=Kt({from:n?.address,to:f,value:typeof d<"u"&&`${Wt(d)} ${o?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:i,gasPrice:typeof a<"u"&&`${ae(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ae(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ae(u)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",p].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Pt extends v{constructor({cause:t,message:n}={}){const r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}}Object.defineProperty(Pt,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(Pt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class ot extends v{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ae(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}}Object.defineProperty(ot,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Dr extends v{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ae(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}}Object.defineProperty(Dr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class _r extends v{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}}Object.defineProperty(_r,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class jr extends v{constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}}Object.defineProperty(jr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Hr extends v{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}}Object.defineProperty(Hr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class qr extends v{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(qr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Gr extends v{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Gr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Vr extends v{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Vr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Xr extends v{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Xr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class mn extends v{constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ae(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ae(r)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}}Object.defineProperty(mn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class gn extends v{constructor({cause:t}){super(`An error occurred while executing: ${t?.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}function Hn(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof v?e.walk(o=>o?.code===Pt.code):e;return r instanceof v?new Pt({cause:e,message:r.details}):Pt.nodeMessage.test(n)?new Pt({cause:e,message:e.details}):ot.nodeMessage.test(n)?new ot({cause:e,maxFeePerGas:t?.maxFeePerGas}):Dr.nodeMessage.test(n)?new Dr({cause:e,maxFeePerGas:t?.maxFeePerGas}):_r.nodeMessage.test(n)?new _r({cause:e,nonce:t?.nonce}):jr.nodeMessage.test(n)?new jr({cause:e,nonce:t?.nonce}):Hr.nodeMessage.test(n)?new Hr({cause:e,nonce:t?.nonce}):qr.nodeMessage.test(n)?new qr({cause:e}):Gr.nodeMessage.test(n)?new Gr({cause:e,gas:t?.gas}):Vr.nodeMessage.test(n)?new Vr({cause:e,gas:t?.gas}):Xr.nodeMessage.test(n)?new Xr({cause:e}):mn.nodeMessage.test(n)?new mn({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new gn({cause:e})}function Tl(e,{docsPath:t,...n}){const r=(()=>{const o=Hn(e,n);return o instanceof gn?e:o})();return new Il(r,{docsPath:t,...n})}function qn(e,{format:t}){if(!t)return{};const n={};function r(s){const i=Object.keys(s);for(const a of i)a in e&&(n[a]=e[a]),s[a]&&typeof s[a]=="object"&&!Array.isArray(s[a])&&r(s[a])}const o=t(e||{});return r(o),n}function Zr(e,t){return({exclude:n,format:r})=>({exclude:n,format:o=>{const s=t(o);if(n)for(const i of n)delete s[i];return{...s,...r(o)}},type:e})}const Cl={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function kt(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=Nl(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>K(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=A(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=A(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=A(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=A(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=A(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=A(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=Cl[e.type]),typeof e.value<"u"&&(t.value=A(e.value)),t}function Nl(e){return e.map(t=>({address:t.address,r:t.r?A(BigInt(t.r)):t.r,s:t.s?A(BigInt(t.s)):t.s,chainId:A(t.chainId),nonce:A(t.nonce),...typeof t.yParity<"u"?{yParity:A(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:A(t.v)}:{}}))}function Fi(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new Ds({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Ds({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function Fl(e){const{balance:t,nonce:n,state:r,stateDiff:o,code:s}=e,i={};if(s!==void 0&&(i.code=s),t!==void 0&&(i.balance=A(t)),n!==void 0&&(i.nonce=A(n)),r!==void 0&&(i.state=Fi(r)),o!==void 0){if(i.state)throw new ul;i.stateDiff=Fi(o)}return i}function Wr(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!Y(n,{strict:!1}))throw new oe({address:n});if(t[n])throw new cl({address:n});t[n]=Fl(r)}return t}const Gn=2n**256n-1n;function st(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:o,to:s}=e,i=t?Z(t):void 0;if(i&&!Y(i.address))throw new oe({address:i.address});if(s&&!Y(s))throw new oe({address:s});if(typeof n<"u"&&(typeof r<"u"||typeof o<"u"))throw new ll;if(r&&r>Gn)throw new ot({maxFeePerGas:r});if(o&&r&&o>r)throw new mn({maxFeePerGas:r,maxPriorityFeePerGas:o})}class Ml extends v{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Kr extends v{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class zl extends v{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ae(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Mi extends v{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const zi={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Vn(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?me(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?me(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?zi[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=Rl(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}const Ul=Zr("transaction",Vn);function Rl(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function Yr(e){const t=(e.transactions??[]).map(n=>typeof n=="string"?n:Vn(n));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}const Ll=Zr("block",Yr);async function ke(e,{blockHash:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",includeTransactions:o}={}){const s=o??!1,i=n!==void 0?A(n):void 0;let a=null;if(t?a=await e.request({method:"eth_getBlockByHash",params:[t,s]},{dedupe:!0}):a=await e.request({method:"eth_getBlockByNumber",params:[i||r,s]},{dedupe:!!i}),!a)throw new Mi({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||Yr)(a)}async function Jr(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function Ol(e,t){return Ui(e,t)}async function Ui(e,t){const{block:n,chain:r=e.chain,request:o}=t||{};try{const s=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof s=="function"){const a=n||await N(e,ke,"getBlock")({}),c=await s({block:a,client:e,request:o});if(c===null)throw new Error;return c}if(typeof s<"u")return s;const i=await e.request({method:"eth_maxPriorityFeePerGas"});return Q(i)}catch{const[s,i]=await Promise.all([n?Promise.resolve(n):N(e,ke,"getBlock")({}),N(e,Jr,"getGasPrice")({})]);if(typeof s.baseFeePerGas!="bigint")throw new Kr;const a=i-s.baseFeePerGas;return a<0n?0n:a}}async function Dl(e,t){return Qr(e,t)}async function Qr(e,t){const{block:n,chain:r=e.chain,request:o,type:s="eip1559"}=t||{},i=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:o}):r?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new Ml;const c=10**(i.toString().split(".")[1]?.length??0),u=d=>d*BigInt(Math.ceil(i*c))/BigInt(c),l=n||await N(e,ke,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const d=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:o,type:s});if(d!==null)return d}if(s==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new Kr;const d=typeof o?.maxPriorityFeePerGas=="bigint"?o.maxPriorityFeePerGas:await Ui(e,{block:l,chain:r,request:o}),p=u(l.baseFeePerGas);return{maxFeePerGas:o?.maxFeePerGas??p+d,maxPriorityFeePerGas:d}}return{gasPrice:o?.gasPrice??u(await N(e,Jr,"getGasPrice")({}))}}async function eo(e,{address:t,blockTag:n="latest",blockNumber:r}){const o=await e.request({method:"eth_getTransactionCount",params:[t,typeof r=="bigint"?A(r):n]},{dedupe:!!r});return me(o)}function to(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(s=>Ae(s)):e.blobs,o=[];for(const s of r)o.push(Uint8Array.from(t.blobToKzgCommitment(s)));return n==="bytes"?o:o.map(s=>K(s))}function no(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(i=>Ae(i)):e.blobs,o=typeof e.commitments[0]=="string"?e.commitments.map(i=>Ae(i)):e.commitments,s=[];for(let i=0;i<r.length;i++){const a=r[i],c=o[i];s.push(Uint8Array.from(t.computeBlobKzgProof(a,c)))}return n==="bytes"?s:s.map(i=>K(i))}function _l(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+u,a,r)}function jl(e,t,n){return e&t^~e&n}function Hl(e,t,n){return e&t^e&n^t&n}class ql extends Pr{constructor(t,n,r,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.buffer=new Uint8Array(t),this.view=Br(this.buffer)}update(t){wt(this),t=zn(t),ze(t);const{view:n,buffer:r,blockLen:o}=this,s=t.length;for(let i=0;i<s;){const a=Math.min(o-this.pos,s-i);if(a===o){const c=Br(t);for(;o<=s-i;i+=o)this.process(c,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){wt(this),Vs(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:i}=this;n[i++]=128,xt(this.buffer.subarray(i)),this.padOffset>o-i&&(this.process(r,0),i=0);for(let f=i;f<o;f++)n[f]=0;_l(r,o-8,BigInt(this.length*8),s),this.process(r,0);const a=Br(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,l[f],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:i,pos:a}=this;return t.destroyed=i,t.finished=s,t.length=o,t.pos=a,o%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Ze=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Gl=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),We=new Uint32Array(64);class Vl extends ql{constructor(t=32){super(64,t,8,!1),this.A=Ze[0]|0,this.B=Ze[1]|0,this.C=Ze[2]|0,this.D=Ze[3]|0,this.E=Ze[4]|0,this.F=Ze[5]|0,this.G=Ze[6]|0,this.H=Ze[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:i,G:a,H:c}=this;return[t,n,r,o,s,i,a,c]}set(t,n,r,o,s,i,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)We[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const d=We[f-15],p=We[f-2],h=Pe(d,7)^Pe(d,18)^d>>>3,b=Pe(p,17)^Pe(p,19)^p>>>10;We[f]=b+We[f-7]+h+We[f-16]|0}let{A:r,B:o,C:s,D:i,E:a,F:c,G:u,H:l}=this;for(let f=0;f<64;f++){const d=Pe(a,6)^Pe(a,11)^Pe(a,25),p=l+d+jl(a,c,u)+Gl[f]+We[f]|0,b=(Pe(r,2)^Pe(r,13)^Pe(r,22))+Hl(r,o,s)|0;l=u,u=c,c=a,a=i+p|0,i=s,s=o,o=r,r=p+b|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,o,s,i,a,c,u,l)}roundClean(){xt(We)}destroy(){this.set(0,0,0,0,0,0,0,0),xt(this.buffer)}}const Ri=Ks(()=>new Vl),Xl=Ri;function Zl(e,t){return Xl(Ee(e,{strict:!1})?gt(e):e)}function Wl(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),o=Zl(t);return o.set([n],0),r==="bytes"?o:K(o)}function Li(e){const{commitments:t,version:n}=e,r=e.to??(typeof t[0]=="string"?"hex":"bytes"),o=[];for(const s of t)o.push(Wl({commitment:s,to:r,version:n}));return o}const Oi=6,Di=32,ro=4096,_i=Di*ro,ji=_i*Oi-1-1*ro*Oi,Hi=1;class Kl extends v{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class qi extends v{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class Yl extends v{constructor({hash:t,size:n}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class Jl extends v{constructor({hash:t,version:n}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${Hi}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function Ql(e){const t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?Ae(e.data):e.data,r=G(n);if(!r)throw new qi;if(r>ji)throw new Kl({maxSize:ji,size:r});const o=[];let s=!0,i=0;for(;s;){const a=Ur(new Uint8Array(_i));let c=0;for(;c<ro;){const u=n.slice(i,i+(Di-1));if(a.pushByte(0),a.pushBytes(u),u.length<31){a.pushByte(128),s=!1;break}c++,i+=31}o.push(a)}return t==="bytes"?o.map(a=>a.bytes):o.map(a=>K(a.bytes))}function Gi(e){const{data:t,kzg:n,to:r}=e,o=e.blobs??Ql({data:t,to:r}),s=e.commitments??to({blobs:o,kzg:n,to:r}),i=e.proofs??no({blobs:o,commitments:s,kzg:n,to:r}),a=[];for(let c=0;c<o.length;c++)a.push({blob:o[c],commitment:s[c],proof:i[c]});return a}function Vi(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new pl({transaction:e})}async function It(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return me(t)}const Xi=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Zi=new Map;async function Xn(e,t){const{account:n=e.account,blobs:r,chain:o,gas:s,kzg:i,nonce:a,nonceManager:c,parameters:u=Xi,type:l}=t,f=n&&Z(n),d={...t,...f?{from:f?.address}:{}};let p;async function h(){return p||(p=await N(e,ke,"getBlock")({blockTag:"latest"}),p)}let b;async function m(){return b||(o?o.id:typeof t.chainId<"u"?t.chainId:(b=await N(e,It,"getChainId")({}),b))}if(u.includes("nonce")&&typeof a>"u"&&f)if(c){const g=await m();d.nonce=await c.consume({address:f.address,chainId:g,client:e})}else d.nonce=await N(e,eo,"getTransactionCount")({address:f.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&i){const g=to({blobs:r,kzg:i});if(u.includes("blobVersionedHashes")){const y=Li({commitments:g,to:"hex"});d.blobVersionedHashes=y}if(u.includes("sidecars")){const y=no({blobs:r,commitments:g,kzg:i}),x=Gi({blobs:r,commitments:g,proofs:y,to:"hex"});d.sidecars=x}}if(u.includes("chainId")&&(d.chainId=await m()),(u.includes("fees")||u.includes("type"))&&typeof l>"u")try{d.type=Vi(d)}catch{let g=Zi.get(e.uid);typeof g>"u"&&(g=typeof(await h())?.baseFeePerGas=="bigint",Zi.set(e.uid,g)),d.type=g?"eip1559":"legacy"}if(u.includes("fees"))if(d.type!=="legacy"&&d.type!=="eip2930"){if(typeof d.maxFeePerGas>"u"||typeof d.maxPriorityFeePerGas>"u"){const g=await h(),{maxFeePerGas:y,maxPriorityFeePerGas:x}=await Qr(e,{block:g,chain:o,request:d});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<x)throw new zl({maxPriorityFeePerGas:x});d.maxPriorityFeePerGas=x,d.maxFeePerGas=y}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new Kr;if(typeof t.gasPrice>"u"){const g=await h(),{gasPrice:y}=await Qr(e,{block:g,chain:o,request:d,type:"legacy"});d.gasPrice=y}}return u.includes("gas")&&typeof s>"u"&&(d.gas=await N(e,oo,"estimateGas")({...d,account:f&&{address:f.address,type:"json-rpc"}})),st(d),delete d.parameters,d}async function Wi(e,{address:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest"}){const o=typeof n=="bigint"?A(n):void 0,s=await e.request({method:"eth_getBalance",params:[t,o||r]});return BigInt(s)}async function oo(e,t){const{account:n=e.account}=t,r=n?Z(n):void 0;try{let _=function(S){const{block:E,request:w,rpcStateOverride:P}=S;return e.request({method:"eth_estimateGas",params:P?[w,E??e.experimental_blockTag??"latest",P]:E?[w,E]:[w]})};const{accessList:o,authorizationList:s,blobs:i,blobVersionedHashes:a,blockNumber:c,blockTag:u,data:l,gas:f,gasPrice:d,maxFeePerBlobGas:p,maxFeePerGas:h,maxPriorityFeePerGas:b,nonce:m,value:g,stateOverride:y,...x}=await Xn(e,{...t,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),T=(typeof c=="bigint"?A(c):void 0)||u,M=Wr(y),z=await(async()=>{if(x.to)return x.to;if(s&&s.length>0)return await Ni({authorization:s[0]}).catch(()=>{throw new v("`to` is required. Could not infer from `authorizationList`")})})();st(t);const O=e.chain?.formatters?.transactionRequest?.format,D=(O||kt)({...qn(x,{format:O}),from:r?.address,accessList:o,authorizationList:s,blobs:i,blobVersionedHashes:a,data:l,gas:f,gasPrice:d,maxFeePerBlobGas:p,maxFeePerGas:h,maxPriorityFeePerGas:b,nonce:m,to:z,value:g});let U=BigInt(await _({block:T,request:D,rpcStateOverride:M}));if(s){const S=await Wi(e,{address:D.from}),E=await Promise.all(s.map(async w=>{const{address:P}=w,C=await _({block:T,request:{authorizationList:void 0,data:l,from:r?.address,to:P,value:A(S)},rpcStateOverride:M}).catch(()=>100000n);return 2n*BigInt(C)}));U+=E.reduce((w,P)=>w+P,0n)}return U}catch(o){throw Tl(o,{...t,account:r,chain:e.chain})}}async function Ki(e,t){const{abi:n,address:r,args:o,functionName:s,dataSuffix:i,...a}=t,c=ge({abi:n,args:o,functionName:s});try{return await N(e,oo,"estimateGas")({data:`${c}${i?i.replace("0x",""):""}`,to:r,...a})}catch(u){const l=a.account?Z(a.account):void 0;throw rt(u,{abi:n,address:r,args:o,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:l?.address})}}function yn(e,t){if(!Y(e,{strict:!1}))throw new oe({address:e});if(!Y(t,{strict:!1}))throw new oe({address:t});return e.toLowerCase()===t.toLowerCase()}const Yi="/docs/contract/decodeEventLog";function so(e){const{abi:t,data:n,strict:r,topics:o}=e,s=r??!0,[i,...a]=o;if(!i)throw new Xu({docsPath:Yi});const c=t.find(b=>b.type==="event"&&i===Un(ve(b)));if(!(c&&"name"in c)||c.type!=="event")throw new Ms(i,{docsPath:Yi});const{name:u,inputs:l}=c,f=l?.some(b=>!("name"in b&&b.name)),d=f?[]:{},p=l.map((b,m)=>[b,m]).filter(([b])=>"indexed"in b&&b.indexed);for(let b=0;b<p.length;b++){const[m,g]=p[b],y=a[b];if(!y)throw new Cn({abiItem:c,param:m});d[f?g:m.name||g]=ef({param:m,value:y})}const h=l.filter(b=>!("indexed"in b&&b.indexed));if(h.length>0){if(n&&n!=="0x")try{const b=Xt(h,n);if(b)if(f)for(let m=0;m<l.length;m++)d[m]=d[m]??b.shift();else for(let m=0;m<h.length;m++)d[h[m].name]=b[m]}catch(b){if(s)throw b instanceof Cs||b instanceof yi?new _t({abiItem:c,data:n,params:h,size:G(n)}):b}else if(s)throw new _t({abiItem:c,data:"0x",params:h,size:0})}return{eventName:u,args:Object.values(d).length>0?d:void 0}}function ef({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(Xt([e],t)||[])[0]}function io(e){const{abi:t,args:n,logs:r,strict:o=!0}=e,s=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(i=>{try{const a=t.find(u=>u.type==="event"&&i.topics[0]===Un(u));if(!a)return null;const c=so({...i,abi:[a],strict:o});return s&&!s.includes(c.eventName)||!tf({args:c.args,inputs:a.inputs,matchArgs:n})?null:{...c,...i}}catch(a){let c,u;if(a instanceof Ms)return null;if(a instanceof _t||a instanceof Cn){if(o)return null;c=a.abiItem.name,u=a.abiItem.inputs?.some(l=>!("name"in l&&l.name))}return{...i,args:u?[]:{},eventName:c}}}).filter(Boolean)}function tf(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function o(s,i,a){try{return s.type==="address"?yn(i,a):s.type==="string"||s.type==="bytes"?ee(gt(i))===a:i===a}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((s,i)=>{if(s==null)return!0;const a=n[i];return a?(Array.isArray(s)?s:[s]).some(u=>o(a,u,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([s,i])=>{if(i==null)return!0;const a=n.find(u=>u.name===s);return a?(Array.isArray(i)?i:[i]).some(u=>o(a,u,t[s])):!1}):!1}function Oe(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function ao(e,{address:t,blockHash:n,fromBlock:r,toBlock:o,event:s,events:i,args:a,strict:c}={}){const u=c??!1,l=i??(s?[s]:void 0);let f=[];l&&(f=[l.flatMap(b=>Vt({abi:[b],eventName:b.name,args:i?void 0:a}))],s&&(f=f[0]));let d;n?d=await e.request({method:"eth_getLogs",params:[{address:t,topics:f,blockHash:n}]}):d=await e.request({method:"eth_getLogs",params:[{address:t,topics:f,fromBlock:typeof r=="bigint"?A(r):r,toBlock:typeof o=="bigint"?A(o):o}]});const p=d.map(h=>Oe(h));return l?io({abi:l,args:a,logs:p,strict:u}):p}async function co(e,t){const{abi:n,address:r,args:o,blockHash:s,eventName:i,fromBlock:a,toBlock:c,strict:u}=t,l=i?Qe({abi:n,name:i}):void 0,f=l?void 0:n.filter(d=>d.type==="event");return N(e,ao,"getLogs")({address:r,args:o,blockHash:s,event:l,events:f,fromBlock:a,toBlock:c,strict:u})}const uo="/docs/contract/decodeFunctionResult";function it(e){const{abi:t,args:n,functionName:r,data:o}=e;let s=t[0];if(r){const a=Qe({abi:t,args:n,name:r});if(!a)throw new ht(r,{docsPath:uo});s=a}if(s.type!=="function")throw new ht(void 0,{docsPath:uo});if(!s.outputs)throw new Us(s.name,{docsPath:uo});const i=Xt(s.outputs,o);if(i&&i.length>1)return i;if(i&&i.length===1)return i[0]}const nf="0.1.1";function rf(){return nf}class q extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof q){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),o=n.cause instanceof q&&n.cause.docsPath||n.docsPath,i=`https://oxlib.sh${o??""}`,a=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||o?["",r?`Details: ${r}`:void 0,o?`See: ${i}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${rf()}`}),this.cause=n.cause,this.details=r,this.docs=i,this.docsPath=o,this.shortMessage=t}walk(t){return Ji(this,t)}}function Ji(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Ji(e.cause,t):t?null:e}const of="#__bigint";function sf(e,t,n){return JSON.stringify(e,(r,o)=>typeof o=="bigint"?o.toString()+of:o,n)}function af(e,t){if(ta(e)>t)throw new gf({givenSize:ta(e),maxSize:t})}const De={zero:48,nine:57,A:65,F:70,a:97,f:102};function Qi(e){if(e>=De.zero&&e<=De.nine)return e-De.zero;if(e>=De.A&&e<=De.F)return e-(De.A-10);if(e>=De.a&&e<=De.f)return e-(De.a-10)}function cf(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new yf({size:e.length,targetSize:r,type:"Bytes"});const o=new Uint8Array(r);for(let s=0;s<r;s++){const i=n==="right";o[i?s:r-s-1]=e[i?s:e.length-s-1]}return o}function lo(e,t){if(ye(e)>t)throw new Sf({givenSize:ye(e),maxSize:t})}function uf(e,t){if(typeof t=="number"&&t>0&&t>ye(e)-1)throw new aa({offset:t,position:"start",size:ye(e)})}function df(e,t,n){if(typeof t=="number"&&typeof n=="number"&&ye(e)!==n-t)throw new aa({offset:n,position:"end",size:ye(e)})}function ea(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const o=e.replace("0x","");if(o.length>r*2)throw new Af({size:Math.ceil(o.length/2),targetSize:r,type:"Hex"});return`0x${o[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const lf=new TextEncoder;function ff(e){return e instanceof Uint8Array?e:typeof e=="string"?hf(e):pf(e)}function pf(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function hf(e,t={}){const{size:n}=t;let r=e;n&&(lo(e,n),r=ct(e,n));let o=r.slice(2);o.length%2&&(o=`0${o}`);const s=o.length/2,i=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const u=Qi(o.charCodeAt(c++)),l=Qi(o.charCodeAt(c++));if(u===void 0||l===void 0)throw new q(`Invalid byte sequence ("${o[c-2]}${o[c-1]}" in "${o}").`);i[a]=u*16+l}return i}function bf(e,t={}){const{size:n}=t,r=lf.encode(e);return typeof n=="number"?(af(r,n),mf(r,n)):r}function mf(e,t){return cf(e,{dir:"right",size:t})}function ta(e){return e.length}let gf=class extends q{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},yf=class extends q{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const wf=new TextEncoder,xf=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function vf(e,t={}){const{strict:n=!1}=t;if(!e)throw new sa(e);if(typeof e!="string")throw new sa(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new ia(e);if(!e.startsWith("0x"))throw new ia(e)}function Ie(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function na(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(lo(n,t.size),at(n,t.size)):n}function ra(e,t={}){let n="";for(let o=0;o<e.length;o++)n+=xf[e[o]];const r=`0x${n}`;return typeof t.size=="number"?(lo(r,t.size),ct(r,t.size)):r}function se(e,t={}){const{signed:n,size:r}=t,o=BigInt(e);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof s=="bigint"&&n?-s-1n:0;if(s&&o>s||o<i){const u=typeof e=="bigint"?"n":"";throw new oa({max:s?`${s}${u}`:void 0,min:`${i}${u}`,signed:n,size:r,value:`${e}${u}`})}const c=`0x${(n&&o<0?(1n<<BigInt(r*8))+BigInt(o):o).toString(16)}`;return r?at(c,r):c}function fo(e,t={}){return ra(wf.encode(e),t)}function at(e,t){return ea(e,{dir:"left",size:t})}function ct(e,t){return ea(e,{dir:"right",size:t})}function po(e,t,n,r={}){const{strict:o}=r;uf(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return o&&df(s,t,n),s}function ye(e){return Math.ceil((e.length-2)/2)}function Ef(e,t={}){const{strict:n=!1}=t;try{return vf(e,{strict:n}),!0}catch{return!1}}class oa extends q{constructor({max:t,min:n,signed:r,size:o,value:s}){super(`Number \`${s}\` is not in safe${o?` ${o*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class sa extends q{constructor(t){super(`Value \`${typeof t=="object"?sf(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class ia extends q{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class Sf extends q{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class aa extends q{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class Af extends q{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function $f(e){return{address:e.address,amount:se(e.amount),index:se(e.index),validatorIndex:se(e.validatorIndex)}}function ca(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:se(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:se(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:se(e.gasLimit)},...typeof e.number=="bigint"&&{number:se(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:se(e.prevRandao)},...typeof e.time=="bigint"&&{time:se(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map($f)}}}const ho=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],bo=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],ua=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],da=[...ua,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Bf=[...ua,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],la=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],fa=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],pa=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Pf="0x82ad56cb",ha="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",kf="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",If="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class mo extends v{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Tf extends v{constructor({chain:t,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${t.id}  ${t.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${t.id}  ${t.name}`],name:"ChainMismatchError"})}}class Cf extends v{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class ba extends v{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class Zn extends v{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const go="/docs/contract/encodeDeployData";function Wn(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const o=t.find(i=>"type"in i&&i.type==="constructor");if(!o)throw new ju({docsPath:go});if(!("inputs"in o))throw new Ts({docsPath:go});if(!o.inputs||o.inputs.length===0)throw new Ts({docsPath:go});const s=Re(o.inputs,n);return $e([r,s])}function Tt({blockNumber:e,chain:t,contract:n}){const r=t?.contracts?.[n];if(!r)throw new mo({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new mo({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function ma(e,{docsPath:t,...n}){const r=(()=>{const o=Hn(e,n);return o instanceof gn?e:o})();return new Bi(r,{docsPath:t,...n})}function yo(){let e=()=>{},t=()=>{};return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}}const wo=new Map;function Nf({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:o}){const s=async()=>{const l=c();i();const f=l.map(({args:d})=>d);f.length!==0&&e(f).then(d=>{o&&Array.isArray(d)&&d.sort(o);for(let p=0;p<l.length;p++){const{resolve:h}=l[p];h?.([d[p],d])}}).catch(d=>{for(let p=0;p<l.length;p++){const{reject:h}=l[p];h?.(d)}})},i=()=>wo.delete(t),a=()=>c().map(({args:l})=>l),c=()=>wo.get(t)||[],u=l=>wo.set(t,[...c(),l]);return{flush:i,async schedule(l){const{promise:f,resolve:d,reject:p}=yo();return n?.([...a(),l])&&s(),c().length>0?(u({args:l,resolve:d,reject:p}),f):(u({args:l,resolve:d,reject:p}),setTimeout(s,r),f)}}}async function wn(e,t){const{account:n=e.account,authorizationList:r,batch:o=!!e.batch?.multicall,blockNumber:s,blockTag:i=e.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:u,code:l,data:f,factory:d,factoryData:p,gas:h,gasPrice:b,maxFeePerBlobGas:m,maxFeePerGas:g,maxPriorityFeePerGas:y,nonce:x,to:B,value:T,stateOverride:M,...z}=t,O=n?Z(n):void 0;if(l&&(d||p))throw new v("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&B)throw new v("Cannot provide both `code` & `to` as parameters.");const I=l&&f,D=d&&p&&B&&f,_=I||D,U=I?zf({code:l,data:f}):D?Uf({data:f,factory:d,factoryData:p,to:B}):f;try{st(t);const E=(typeof s=="bigint"?A(s):void 0)||i,w=u?ca(u):void 0,P=Wr(M),C=e.chain?.formatters?.transactionRequest?.format,k=(C||kt)({...qn(z,{format:C}),from:O?.address,accessList:a,authorizationList:r,blobs:c,data:U,gas:h,gasPrice:b,maxFeePerBlobGas:m,maxFeePerGas:g,maxPriorityFeePerGas:y,nonce:x,to:_?void 0:B,value:T});if(o&&Ff({request:k})&&!P&&!w)try{return await Mf(e,{...k,blockNumber:s,blockTag:i})}catch(L){if(!(L instanceof ba)&&!(L instanceof mo))throw L}const F=(()=>{const L=[k,E];return P&&w?[...L,P,w]:P?[...L,P]:w?[...L,{},w]:L})(),R=await e.request({method:"eth_call",params:F});return R==="0x"?{data:void 0}:{data:R}}catch(S){const E=Rf(S),{offchainLookup:w,offchainLookupSignature:P}=await Promise.resolve().then(()=>Mp);if(e.ccipRead!==!1&&E?.slice(0,10)===P&&B)return{data:await w(e,{data:E,to:B})};throw _&&E?.slice(0,10)==="0x101bb98d"?new xl({factory:d}):ma(S,{...t,account:O,chain:e.chain})}}function Ff({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(Pf)||!n||Object.values(r).filter(o=>typeof o<"u").length>0)}async function Mf(e,t){const{batchSize:n=1024,wait:r=0}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},{blockNumber:o,blockTag:s=e.experimental_blockTag??"latest",data:i,multicallAddress:a,to:c}=t;let u=a;if(!u){if(!e.chain)throw new ba;u=Tt({blockNumber:o,chain:e.chain,contract:"multicall3"})}const f=(typeof o=="bigint"?A(o):void 0)||s,{schedule:d}=Nf({id:`${e.uid}.${f}`,wait:r,shouldSplitBatch(b){return b.reduce((g,{data:y})=>g+(y.length-2),0)>n*2},fn:async b=>{const m=b.map(x=>({allowFailure:!0,callData:x.data,target:x.to})),g=ge({abi:ho,args:[m],functionName:"aggregate3"}),y=await e.request({method:"eth_call",params:[{data:g,to:u},f]});return it({abi:ho,args:[m],functionName:"aggregate3",data:y||"0x"})}}),[{returnData:p,success:h}]=await d({data:i,to:c});if(!h)throw new _n({data:p});return p==="0x"?{data:void 0}:{data:p}}function zf(e){const{code:t,data:n}=e;return Wn({abi:In(["constructor(bytes, bytes)"]),bytecode:ha,args:[t,n]})}function Uf(e){const{data:t,factory:n,factoryData:r,to:o}=e;return Wn({abi:In(["constructor(address, bytes, address, bytes)"]),bytecode:kf,args:[o,t,n,r]})}function Rf(e){if(!(e instanceof v))return;const t=e.walk();return typeof t?.data=="object"?t.data?.data:t.data}async function Te(e,t){const{abi:n,address:r,args:o,functionName:s,...i}=t,a=ge({abi:n,args:o,functionName:s});try{const{data:c}=await N(e,wn,"call")({...i,data:a,to:r});return it({abi:n,args:o,functionName:s,data:c||"0x"})}catch(c){throw rt(c,{abi:n,address:r,args:o,docsPath:"/docs/contract/readContract",functionName:s})}}async function ga(e,t){const{abi:n,address:r,args:o,dataSuffix:s,functionName:i,...a}=t,c=a.account?Z(a.account):e.account,u=ge({abi:n,args:o,functionName:i});try{const{data:l}=await N(e,wn,"call")({batch:!1,data:`${u}${s?s.replace("0x",""):""}`,to:r,...a,account:c}),f=it({abi:n,args:o,functionName:i,data:l||"0x"}),d=n.filter(p=>"name"in p&&p.name===t.functionName);return{result:f,request:{abi:d,address:r,args:o,dataSuffix:s,functionName:i,...a,account:c}}}catch(l){throw rt(l,{abi:n,address:r,args:o,docsPath:"/docs/contract/simulateContract",functionName:i,sender:c?.address})}}const xo=new Map,ya=new Map;let Lf=0;function _e(e,t,n){const r=++Lf,o=()=>xo.get(e)||[],s=()=>{const l=o();xo.set(e,l.filter(f=>f.id!==r))},i=()=>{const l=o();if(!l.some(d=>d.id===r))return;const f=ya.get(e);if(l.length===1&&f){const d=f();d instanceof Promise&&d.catch(()=>{})}s()},a=o();if(xo.set(e,[...a,{id:r,fns:t}]),a&&a.length>0)return i;const c={};for(const l in t)c[l]=(...f)=>{const d=o();if(d.length!==0)for(const p of d)p.fns[l]?.(...f)};const u=n(c);return typeof u=="function"&&ya.set(e,u),i}async function vo(e){return new Promise(t=>setTimeout(t,e))}function Ct(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let o=!0;const s=()=>o=!1;return(async()=>{let a;t&&(a=await e({unpoll:s}));const c=await n?.(a)??r;await vo(c);const u=async()=>{o&&(await e({unpoll:s}),await vo(r),u())};u()})(),s}const Of=new Map,Df=new Map;function _f(e){const t=(o,s)=>({clear:()=>s.delete(o),get:()=>s.get(o),set:i=>s.set(o,i)}),n=t(e,Of),r=t(e,Df);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function jf(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=_f(t),o=r.response.get();if(o&&n>0&&new Date().getTime()-o.created.getTime()<n)return o.data;let s=r.promise.get();s||(s=e(),r.promise.set(s));try{const i=await s;return r.response.set({created:new Date,data:i}),i}finally{r.promise.clear()}}const Hf=e=>`blockNumber.${e}`;async function xn(e,{cacheTime:t=e.cacheTime}={}){const n=await jf(()=>e.request({method:"eth_blockNumber"}),{cacheKey:Hf(e.uid),cacheTime:t});return BigInt(n)}async function Kn(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const o=r.map(s=>Oe(s));return!("abi"in t)||!t.abi?o:io({abi:t.abi,logs:o,strict:n})}async function Yn(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function wa(e,t){const{abi:n,address:r,args:o,batch:s=!0,eventName:i,fromBlock:a,onError:c,onLogs:u,poll:l,pollingInterval:f=e.pollingInterval,strict:d}=t;return(typeof l<"u"?l:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{const m=d??!1,g=te(["watchContractEvent",r,o,s,e.uid,i,f,m,a]);return _e(g,{onLogs:u,onError:c},y=>{let x;a!==void 0&&(x=a-1n);let B,T=!1;const M=Ct(async()=>{if(!T){try{B=await N(e,zr,"createContractEventFilter")({abi:n,address:r,args:o,eventName:i,strict:m,fromBlock:a})}catch{}T=!0;return}try{let z;if(B)z=await N(e,Kn,"getFilterChanges")({filter:B});else{const O=await N(e,xn,"getBlockNumber")({});x&&x<O?z=await N(e,co,"getContractEvents")({abi:n,address:r,args:o,eventName:i,fromBlock:x+1n,toBlock:O,strict:m}):z=[],x=O}if(z.length===0)return;if(s)y.onLogs(z);else for(const O of z)y.onLogs([O])}catch(z){B&&z instanceof tt&&(T=!1),y.onError?.(z)}},{emitOnBegin:!0,interval:f});return async()=>{B&&await N(e,Yn,"uninstallFilter")({filter:B}),M()}})})():(()=>{const m=d??!1,g=te(["watchContractEvent",r,o,s,e.uid,i,f,m]);let y=!0,x=()=>y=!1;return _e(g,{onLogs:u,onError:c},B=>((async()=>{try{const T=(()=>{if(e.transport.type==="fallback"){const O=e.transport.transports.find(I=>I.config.type==="webSocket"||I.config.type==="ipc");return O?O.value:e.transport}return e.transport})(),M=i?Vt({abi:n,eventName:i,args:o}):[],{unsubscribe:z}=await T.subscribe({params:["logs",{address:r,topics:M}],onData(O){if(!y)return;const I=O.result;try{const{eventName:D,args:_}=so({abi:n,data:I.data,topics:I.topics,strict:d}),U=Oe(I,{args:_,eventName:D});B.onLogs([U])}catch(D){let _,U;if(D instanceof _t||D instanceof Cn){if(d)return;_=D.abiItem.name,U=D.abiItem.inputs?.some(E=>!("name"in E&&E.name))}const S=Oe(I,{args:U?[]:{},eventName:_});B.onLogs([S])}},onError(O){B.onError?.(O)}});x=z,y||x()}catch(T){c?.(T)}})(),()=>x()))})()}class ut extends v{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}class Jn extends v{constructor({docsPath:t,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:t,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function xa({chain:e,currentChainId:t}){if(!e)throw new Cf;if(t!==e.id)throw new Tf({chain:e,currentChainId:t})}function va(e,{docsPath:t,...n}){const r=(()=>{const o=Hn(e,n);return o instanceof gn?e:o})();return new bl(r,{docsPath:t,...n})}async function Eo(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const So=new Rn(128);async function Qn(e,t){const{account:n=e.account,chain:r=e.chain,accessList:o,authorizationList:s,blobs:i,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:d,nonce:p,type:h,value:b,...m}=t;if(typeof n>"u")throw new ut({docsPath:"/docs/actions/wallet/sendTransaction"});const g=n?Z(n):null;try{st(t);const y=await(async()=>{if(t.to)return t.to;if(t.to!==null&&s&&s.length>0)return await Ni({authorization:s[0]}).catch(()=>{throw new v("`to` is required. Could not infer from `authorizationList`.")})})();if(g?.type==="json-rpc"||g===null){let x;r!==null&&(x=await N(e,It,"getChainId")({}),xa({currentChainId:x,chain:r}));const B=e.chain?.formatters?.transactionRequest?.format,M=(B||kt)({...qn(m,{format:B}),accessList:o,authorizationList:s,blobs:i,chainId:x,data:a,from:g?.address,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:d,nonce:p,to:y,type:h,value:b}),z=So.get(e.uid),O=z?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:O,params:[M]},{retryCount:0})}catch(I){if(z===!1)throw I;const D=I;if(D.name==="InvalidInputRpcError"||D.name==="InvalidParamsRpcError"||D.name==="MethodNotFoundRpcError"||D.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[M]},{retryCount:0}).then(_=>(So.set(e.uid,!0),_)).catch(_=>{const U=_;throw U.name==="MethodNotFoundRpcError"||U.name==="MethodNotSupportedRpcError"?(So.set(e.uid,!1),D):U});throw D}}if(g?.type==="local"){const x=await N(e,Xn,"prepareTransactionRequest")({account:g,accessList:o,authorizationList:s,blobs:i,chain:r,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:d,nonce:p,nonceManager:g.nonceManager,parameters:[...Xi,"sidecars"],type:h,value:b,...m,to:y}),B=r?.serializers?.transaction,T=await g.signTransaction(x,{serializer:B});return await N(e,Eo,"sendRawTransaction")({serializedTransaction:T})}throw g?.type==="smart"?new Jn({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Jn({docsPath:"/docs/actions/wallet/sendTransaction",type:g?.type})}catch(y){throw y instanceof Jn?y:va(y,{...t,account:g,chain:t.chain||void 0})}}async function Ea(e,t){const{abi:n,account:r=e.account,address:o,args:s,dataSuffix:i,functionName:a,...c}=t;if(typeof r>"u")throw new ut({docsPath:"/docs/contract/writeContract"});const u=r?Z(r):null,l=ge({abi:n,args:s,functionName:a});try{return await N(e,Qn,"sendTransaction")({data:`${l}${i?i.replace("0x",""):""}`,to:o,account:u,...c})}catch(f){throw rt(f,{abi:n,address:o,args:s,docsPath:"/docs/contract/writeContract",functionName:a,sender:u?.address})}}function er({abi:e,address:t,client:n}){const r=n,[o,s]=r?"public"in r&&"wallet"in r?[r.public,r.wallet]:"public"in r?[r.public,void 0]:"wallet"in r?[void 0,r.wallet]:[r,r]:[void 0,void 0],i=o!=null,a=s!=null,c={};let u=!1,l=!1,f=!1;for(const d of e)if(d.type==="function"?d.stateMutability==="view"||d.stateMutability==="pure"?u=!0:l=!0:d.type==="event"&&(f=!0),u&&l&&f)break;return i&&(u&&(c.read=new Proxy({},{get(d,p){return(...h)=>{const{args:b,options:m}=tr(h);return N(o,Te,"readContract")({abi:e,address:t,functionName:p,args:b,...m})}}})),l&&(c.simulate=new Proxy({},{get(d,p){return(...h)=>{const{args:b,options:m}=tr(h);return N(o,ga,"simulateContract")({abi:e,address:t,functionName:p,args:b,...m})}}})),f&&(c.createEventFilter=new Proxy({},{get(d,p){return(...h)=>{const b=e.find(y=>y.type==="event"&&y.name===p),{args:m,options:g}=Ao(h,b);return N(o,zr,"createContractEventFilter")({abi:e,address:t,eventName:p,args:m,...g})}}}),c.getEvents=new Proxy({},{get(d,p){return(...h)=>{const b=e.find(y=>y.type==="event"&&y.name===p),{args:m,options:g}=Ao(h,b);return N(o,co,"getContractEvents")({abi:e,address:t,eventName:p,args:m,...g})}}}),c.watchEvent=new Proxy({},{get(d,p){return(...h)=>{const b=e.find(y=>y.type==="event"&&y.name===p),{args:m,options:g}=Ao(h,b);return N(o,wa,"watchContractEvent")({abi:e,address:t,eventName:p,args:m,...g})}}}))),a&&l&&(c.write=new Proxy({},{get(d,p){return(...h)=>{const{args:b,options:m}=tr(h);return N(s,Ea,"writeContract")({abi:e,address:t,functionName:p,args:b,...m})}}})),(i||a)&&l&&(c.estimateGas=new Proxy({},{get(d,p){return(...h)=>{const{args:b,options:m}=tr(h);return N(o??s,Ki,"estimateContractGas")({abi:e,address:t,functionName:p,args:b,...m,account:m.account??s.account})}}})),c.address=t,c.abi=e,c}function tr(e){const t=e.length&&Array.isArray(e[0]),n=t?e[0]:[],r=(t?e[1]:e[0])??{};return{args:n,options:r}}function Ao(e,t){let n=!1;Array.isArray(e[0])?n=!0:e.length===1?n=t.inputs.some(s=>s.indexed):e.length===2&&(n=!0);const r=n?e[0]:void 0,o=(n?e[1]:e[0])??{};return{args:r,options:o}}class qf extends v{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}function nr(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((o,s)=>{const i=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof t=="function"?t({count:a,error:u}):t;l&&await vo(l),i({count:a+1})};try{const u=await e();o(u)}catch(u){if(a<n&&await r({count:a,error:u}))return c({error:u});s(u)}};i()})}const Sa={"0x0":"reverted","0x1":"success"};function Aa(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(n=>Oe(n)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?me(e.transactionIndex):null,status:e.status?Sa[e.status]:null,type:e.type?zi[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}const Gf=Zr("transactionReceipt",Aa),$a="0x5792579257925792579257925792579257925792579257925792579257925792",Ba=A(0,{size:32});async function Vf(e,t){const{account:n=e.account,capabilities:r,chain:o=e.chain,experimental_fallback:s,experimental_fallbackDelay:i=32,forceAtomic:a=!1,id:c,version:u="2.0.0"}=t,l=n?Z(n):null,f=t.calls.map(d=>{const p=d,h=p.abi?ge({abi:p.abi,functionName:p.functionName,args:p.args}):p.data;return{data:p.dataSuffix&&h?pe([h,p.dataSuffix]):h,to:p.to,value:p.value?A(p.value):void 0}});try{const d=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:f,capabilities:r,chainId:A(o.id),from:l?.address,id:c,version:u}]},{retryCount:0});return typeof d=="string"?{id:d}:d}catch(d){const p=d;if(s&&(p.name==="MethodNotFoundRpcError"||p.name==="MethodNotSupportedRpcError"||p.name==="UnknownRpcError"||p.details.toLowerCase().includes("does not exist / is not available")||p.details.toLowerCase().includes("missing or invalid. request()")||p.details.toLowerCase().includes("did not match any variant of untagged enum")||p.details.toLowerCase().includes("account upgraded to unsupported contract")||p.details.toLowerCase().includes("eip-7702 not supported")||p.details.toLowerCase().includes("unsupported wc_ method")||p.details.toLowerCase().includes("feature toggled misconfigured"))){if(r&&Object.values(r).some(y=>!y.optional)){const y="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new $t(new v(y,{details:y}))}if(a&&f.length>1){const g="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Bt(new v(g,{details:g}))}const h=[];for(const g of f){const y=Qn(e,{account:l,chain:o,data:g.data,to:g.to,value:g.value?Q(g.value):void 0});h.push(y),i>0&&await new Promise(x=>setTimeout(x,i))}const b=await Promise.allSettled(h);if(b.every(g=>g.status==="rejected"))throw b[0].reason;const m=b.map(g=>g.status==="fulfilled"?g.value:Ba);return{id:pe([...m,A(o.id,{size:32}),$a])}}throw va(d,{...t,account:l,chain:t.chain})}}async function Pa(e,t){async function n(l){if(l.endsWith($a.slice(2))){const d=be(Ln(l,-64,-32)),p=Ln(l,0,-64).slice(2).match(/.{1,64}/g),h=await Promise.all(p.map(m=>Ba.slice(2)!==m?e.request({method:"eth_getTransactionReceipt",params:[`0x${m}`]},{dedupe:!0}):void 0)),b=h.some(m=>m===null)?100:h.every(m=>m?.status==="0x1")?200:h.every(m=>m?.status==="0x0")?500:600;return{atomic:!1,chainId:me(d),receipts:h.filter(Boolean),status:b,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[l]})}const{atomic:r=!1,chainId:o,receipts:s,version:i="2.0.0",...a}=await n(t.id),[c,u]=(()=>{const l=a.status;return l>=100&&l<200?["pending",l]:l>=200&&l<300?["success",l]:l>=300&&l<700?["failure",l]:l==="CONFIRMED"?["success",200]:l==="PENDING"?["pending",100]:[void 0,l]})();return{...a,atomic:r,chainId:o?me(o):void 0,receipts:s?.map(l=>({...l,blockNumber:Q(l.blockNumber),gasUsed:Q(l.gasUsed),status:Sa[l.status]}))??[],statusCode:u,status:c,version:i}}async function Xf(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:o=({statusCode:b})=>b===200||b>=300,retryCount:s=4,retryDelay:i=({count:b})=>~~(1<<b)*200,timeout:a=6e4,throwOnFailure:c=!1}=t,u=te(["waitForCallsStatus",e.uid,n]),{promise:l,resolve:f,reject:d}=yo();let p;const h=_e(u,{resolve:f,reject:d},b=>{const m=Ct(async()=>{const g=y=>{clearTimeout(p),m(),y(),h()};try{const y=await nr(async()=>{const x=await Pa(e,{id:n});if(c&&x.status==="failure")throw new qf(x);return x},{retryCount:s,delay:i});if(!o(y))return;g(()=>b.resolve(y))}catch(y){g(()=>b.reject(y))}},{interval:r,emitOnBegin:!0});return m});return p=a?setTimeout(()=>{h(),clearTimeout(p),d(new Zf({id:n}))},a):void 0,await l}class Zf extends v{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const $o=256;let rr=$o,or;function ka(e=11){if(!or||rr+e>$o*2){or="",rr=0;for(let t=0;t<$o;t++)or+=(256+Math.random()*256|0).toString(16).substring(1)}return or.substring(rr,rr+++e)}function Ia(e){const{batch:t,chain:n,ccipRead:r,key:o="base",name:s="Base Client",type:i="base"}=e,a=e.experimental_blockTag??(typeof n?.experimental_preconfirmationTime=="number"?"pending":void 0),c=n?.blockTime??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),l=e.pollingInterval??u,f=e.cacheTime??l,d=e.account?Z(e.account):void 0,{config:p,request:h,value:b}=e.transport({chain:n,pollingInterval:l}),m={...p,...b},g={account:d,batch:t,cacheTime:f,ccipRead:r,chain:n,key:o,name:s,pollingInterval:l,request:h,transport:m,type:i,uid:ka(),...a?{experimental_blockTag:a}:{}};function y(x){return B=>{const T=B(x);for(const z in g)delete T[z];const M={...x,...T};return Object.assign(M,{extend:y(M)})}}return Object.assign(g,{extend:y(g)})}const sr=new Rn(8192);function Wf(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(sr.get(n))return sr.get(n);const r=e().finally(()=>sr.delete(n));return sr.set(n,r),r}function Kf(e,t={}){return async(n,r={})=>{const{dedupe:o=!1,methods:s,retryDelay:i=150,retryCount:a=3,uid:c}={...t,...r},{method:u}=n;if(s?.exclude?.includes(u))throw new nt(new Error("method not supported"),{method:u});if(s?.include&&!s.include.includes(u))throw new nt(new Error("method not supported"),{method:u});const l=o?mt(`${c}.${te(n)}`):void 0;return Wf(()=>nr(async()=>{try{return await e(n)}catch(f){const d=f;switch(d.code){case Yt.code:throw new Yt(d);case Jt.code:throw new Jt(d);case Qt.code:throw new Qt(d,{method:n.method});case en.code:throw new en(d);case et.code:throw new et(d);case tt.code:throw new tt(d);case tn.code:throw new tn(d);case nn.code:throw new nn(d);case rn.code:throw new rn(d);case nt.code:throw new nt(d,{method:n.method});case St.code:throw new St(d);case on.code:throw new on(d);case At.code:throw new At(d);case sn.code:throw new sn(d);case an.code:throw new an(d);case cn.code:throw new cn(d);case un.code:throw new un(d);case dn.code:throw new dn(d);case $t.code:throw new $t(d);case ln.code:throw new ln(d);case fn.code:throw new fn(d);case pn.code:throw new pn(d);case hn.code:throw new hn(d);case bn.code:throw new bn(d);case Bt.code:throw new Bt(d);case 5e3:throw new At(d);default:throw f instanceof v?f:new El(d)}}},{delay:({count:f,error:d})=>{if(d&&d instanceof jn){const p=d?.headers?.get("Retry-After");if(p?.match(/\d/))return Number.parseInt(p)*1e3}return~~(1<<f)*i},retryCount:a,shouldRetry:({error:f})=>Yf(f)}),{enabled:o,id:l})}}function Yf(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===St.code||e.code===et.code:e instanceof jn&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function Jf({key:e,methods:t,name:n,request:r,retryCount:o=3,retryDelay:s=150,timeout:i,type:a},c){const u=ka();return{config:{key:e,methods:t,name:n,request:r,retryCount:o,retryDelay:s,timeout:i,type:a},request:Kf(r,{methods:t,retryCount:o,retryDelay:s,uid:u}),value:c}}function Nt(e,t={}){const{key:n="custom",methods:r,name:o="Custom Provider",retryDelay:s}=t;return({retryCount:i})=>Jf({key:n,methods:r,name:o,request:e.request.bind(e),retryCount:t.retryCount??i,retryDelay:s,type:"custom"})}function Bo(e,t){if(!(e instanceof v))return!1;const n=e.walk(r=>r instanceof Or);return n instanceof Or?!!(n.data?.errorName==="ResolverNotFound"||n.data?.errorName==="ResolverWildcardNotSupported"||n.data?.errorName==="ResolverNotContract"||n.data?.errorName==="ResolverError"||n.data?.errorName==="HttpError"||n.reason?.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&n.reason===bi[50]):!1}function Qf(e){const{abi:t,data:n}=e,r=Je(n,0,4),o=t.find(s=>s.type==="function"&&r===Gt(ve(s)));if(!o)throw new Zu(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:o.name,args:"inputs"in o&&o.inputs&&o.inputs.length>0?Xt(o.inputs,Je(n,4)):void 0}}const Po="/docs/contract/encodeErrorResult";function Ta(e){const{abi:t,errorName:n,args:r}=e;let o=t[0];if(n){const c=Qe({abi:t,args:r,name:n});if(!c)throw new Ns(n,{docsPath:Po});o=c}if(o.type!=="error")throw new Ns(void 0,{docsPath:Po});const s=ve(o),i=Gt(s);let a="0x";if(r&&r.length>0){if(!o.inputs)throw new Vu(o.name,{docsPath:Po});a=Re(o.inputs,r)}return $e([i,a])}const ko="/docs/contract/encodeFunctionResult";function ep(e){const{abi:t,functionName:n,result:r}=e;let o=t[0];if(n){const i=Qe({abi:t,name:n});if(!i)throw new ht(n,{docsPath:ko});o=i}if(o.type!=="function")throw new ht(void 0,{docsPath:ko});if(!o.outputs)throw new Us(o.name,{docsPath:ko});const s=(()=>{if(o.outputs.length===0)return[];if(o.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new Rs(r)})();return Re(o.outputs,s)}const ir="x-batch-gateway:true";async function Ca(e){const{data:t,ccipRequest:n}=e,{args:[r]}=Qf({abi:bo,data:t}),o=[],s=[];return await Promise.all(r.map(async(i,a)=>{try{s[a]=i.urls.includes(ir)?await Ca({data:i.data,ccipRequest:n}):await n(i),o[a]=!1}catch(c){o[a]=!0,s[a]=tp(c)}})),ep({abi:bo,functionName:"query",result:[o,s]})}function tp(e){return e.name==="HttpRequestError"&&e.status?Ta({abi:bo,errorName:"HttpError",args:[e.status,e.shortMessage]}):Ta({abi:[mi],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}function Na(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return Ee(t)?t:null}function ar(e){let t=new Uint8Array(32).fill(0);if(!e)return K(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const o=Na(n[r]),s=o?gt(o):ee(Ye(n[r]),"bytes");t=ee(pe([t,s]),"bytes")}return K(t)}function np(e){return`[${e.slice(2)}]`}function rp(e){const t=new Uint8Array(32).fill(0);return e?Na(e)||ee(Ye(e)):K(t)}function cr(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(Ye(t).byteLength+2);let r=0;const o=t.split(".");for(let s=0;s<o.length;s++){let i=Ye(o[s]);i.byteLength>255&&(i=Ye(np(rp(o[s])))),n[r]=i.length,n.set(i,r+1),r+=i.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function op(e,t){const{blockNumber:n,blockTag:r,coinType:o,name:s,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Tt({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c?.ensTlds;if(l&&!l.some(f=>s.endsWith(f)))return null;try{const f=ge({abi:fa,functionName:"addr",...o!=null?{args:[ar(s),BigInt(o)]}:{args:[ar(s)]}}),d={address:u,abi:da,functionName:"resolve",args:[re(cr(s)),f,i??[ir]],blockNumber:n,blockTag:r},h=await N(e,Te,"readContract")(d);if(h[0]==="0x")return null;const b=it({abi:fa,args:o!=null?[ar(s),BigInt(o)]:void 0,functionName:"addr",data:h[0]});return b==="0x"||be(b)==="0x00"?null:b}catch(f){if(a)throw f;if(Bo(f,"resolve"))return null;throw f}}class sp extends v{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class vn extends v{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class Io extends v{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class ip extends v{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const ap=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,cp=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,up=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,dp=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function lp(e){try{const t=await fetch(e,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function Fa(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Ma({uri:e,gatewayUrls:t}){const n=up.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=Fa(t?.ipfs,"https://ipfs.io"),o=Fa(t?.arweave,"https://arweave.net"),s=e.match(ap),{protocol:i,subpath:a,target:c,subtarget:u=""}=s?.groups||{},l=i==="ipns:/"||a==="ipns/",f=i==="ipfs:/"||a==="ipfs/"||cp.test(e);if(e.startsWith("http")&&!l&&!f){let p=e;return t?.arweave&&(p=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:p,isOnChain:!1,isEncoded:!1}}if((l||f)&&c)return{uri:`${r}/${l?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&c)return{uri:`${o}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let d=e.replace(dp,"");if(d.startsWith("<svg")&&(d=`data:image/svg+xml;base64,${btoa(d)}`),d.startsWith("data:")||d.startsWith("{"))return{uri:d,isOnChain:!0,isEncoded:!1};throw new Io({uri:e})}function za(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new sp({data:e});return e.image||e.image_url||e.image_data}async function fp({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(o=>o.json());return await To({gatewayUrls:e,uri:za(n)})}catch{throw new Io({uri:t})}}async function To({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=Ma({uri:t,gatewayUrls:e});if(r||await lp(n))return n;throw new Io({uri:t})}function pp(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,o]=t.split("/"),[s,i]=n.split(":"),[a,c]=r.split(":");if(!s||s.toLowerCase()!=="eip155")throw new vn({reason:"Only EIP-155 supported"});if(!i)throw new vn({reason:"Chain ID not found"});if(!c)throw new vn({reason:"Contract address not found"});if(!o)throw new vn({reason:"Token ID not found"});if(!a)throw new vn({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i),namespace:a.toLowerCase(),contractAddress:c,tokenID:o}}async function hp(e,{nft:t}){if(t.namespace==="erc721")return Te(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return Te(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new ip({namespace:t.namespace})}async function bp(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?mp(e,{gatewayUrls:t,record:n}):To({uri:n,gatewayUrls:t})}async function mp(e,{gatewayUrls:t,record:n}){const r=pp(n),o=await hp(e,{nft:r}),{uri:s,isOnChain:i,isEncoded:a}=Ma({uri:o,gatewayUrls:t});if(i&&(s.includes("data:application/json;base64,")||s.startsWith("{"))){const u=a?atob(s.replace("data:application/json;base64,","")):s,l=JSON.parse(u);return To({uri:za(l),gatewayUrls:t})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),fp({gatewayUrls:t,uri:s.replace(/(?:0x)?{id}/,c)})}async function Ua(e,t){const{blockNumber:n,blockTag:r,key:o,name:s,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Tt({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c?.ensTlds;if(l&&!l.some(f=>s.endsWith(f)))return null;try{const f={address:u,abi:da,functionName:"resolve",args:[re(cr(s)),ge({abi:la,functionName:"text",args:[ar(s),o]}),i??[ir]],blockNumber:n,blockTag:r},p=await N(e,Te,"readContract")(f);if(p[0]==="0x")return null;const h=it({abi:la,functionName:"text",data:p[0]});return h===""?null:h}catch(f){if(a)throw f;if(Bo(f,"resolve"))return null;throw f}}async function gp(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:o,gatewayUrls:s,strict:i,universalResolverAddress:a}){const c=await N(e,Ua,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:o,universalResolverAddress:a,gatewayUrls:s,strict:i});if(!c)return null;try{return await bp(e,{record:c,gatewayUrls:r})}catch{return null}}async function yp(e,{address:t,blockNumber:n,blockTag:r,gatewayUrls:o,strict:s,universalResolverAddress:i}){let a=i;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=Tt({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const c=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const u={address:a,abi:Bf,functionName:"reverse",args:[re(cr(c))],blockNumber:n,blockTag:r},l=N(e,Te,"readContract"),[f,d]=o?await l({...u,args:[...u.args,o]}):await l(u);return t.toLowerCase()!==d.toLowerCase()?null:f}catch(u){if(s)throw u;if(Bo(u,"reverse"))return null;throw u}}async function wp(e,t){const{blockNumber:n,blockTag:r,name:o}=t,{chain:s}=e,i=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!s)throw new Error("client chain not configured. universalResolverAddress is required.");return Tt({blockNumber:n,chain:s,contract:"ensUniversalResolver"})})(),a=s?.ensTlds;if(a&&!a.some(u=>o.endsWith(u)))throw new Error(`${o} is not a valid ENS TLD (${a?.join(", ")}) for chain "${s.name}" (id: ${s.id}).`);const[c]=await N(e,Te,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[re(cr(o))],blockNumber:n,blockTag:r});return c}async function Ra(e,t){const{account:n=e.account,blockNumber:r,blockTag:o="latest",blobs:s,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:f,to:d,value:p,...h}=t,b=n?Z(n):void 0;try{st(t);const g=(typeof r=="bigint"?A(r):void 0)||o,y=e.chain?.formatters?.transactionRequest?.format,B=(y||kt)({...qn(h,{format:y}),from:b?.address,blobs:s,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:f,to:d,value:p}),T=await e.request({method:"eth_createAccessList",params:[B,g]});return{accessList:T.accessList,gasUsed:BigInt(T.gasUsed)}}catch(m){throw ma(m,{...t,account:b,chain:e.chain})}}async function xp(e){const t=On(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function La(e,{address:t,args:n,event:r,events:o,fromBlock:s,strict:i,toBlock:a}={}){const c=o??(r?[r]:void 0),u=On(e,{method:"eth_newFilter"});let l=[];c&&(l=[c.flatMap(p=>Vt({abi:[p],eventName:p.name,args:n}))],r&&(l=l[0]));const f=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof s=="bigint"?A(s):s,toBlock:typeof a=="bigint"?A(a):a,...l.length?{topics:l}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:s,id:f,request:u(f),strict:!!i,toBlock:a,type:"event"}}async function Oa(e){const t=On(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function vp(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function Ep(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const o=n!==void 0?A(n):void 0;let s;return t?s=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):s=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[o||r]},{dedupe:!!o}),me(s)}async function Da(e,{address:t,blockNumber:n,blockTag:r="latest"}){const o=n!==void 0?A(n):void 0,s=await e.request({method:"eth_getCode",params:[t,o||r]},{dedupe:!!o});if(s!=="0x")return s}class Sp extends v{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Ap(e,t){const{address:n,factory:r,factoryData:o}=t;try{const[s,i,a,c,u,l,f]=await N(e,Te,"readContract")({abi:$p,address:n,functionName:"eip712Domain",factory:r,factoryData:o});return{domain:{name:i,version:a,chainId:Number(c),verifyingContract:u,salt:l},extensions:f,fields:s}}catch(s){const i=s;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new Sp({address:n}):i}}const $p=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Bp(e){return{baseFeePerGas:e.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(t=>t.map(n=>BigInt(n)))}}async function Pp(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:o}){const s=typeof n=="bigint"?A(n):void 0,i=await e.request({method:"eth_feeHistory",params:[A(t),s||r,o]},{dedupe:!!s});return Bp(i)}async function kp(e,{filter:t}){const n=t.strict??!1,o=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(s=>Oe(s));return t.abi?io({abi:t.abi,logs:o,strict:n}):o}class Ip extends v{constructor({callbackSelector:t,cause:n,data:r,extraData:o,sender:s,urls:i}){super(n.shortMessage||"An error occurred while fetching for an offchain result.",{cause:n,metaMessages:[...n.metaMessages||[],n.metaMessages?.length?"":[],"Offchain Gateway Call:",i&&["  Gateway URL(s):",...i.map(a=>`    ${Dn(a)}`)],`  Sender: ${s}`,`  Data: ${r}`,`  Callback selector: ${t}`,`  Extra data: ${o}`].flat(),name:"OffchainLookupError"})}}class Tp extends v{constructor({result:t,url:n}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${Dn(n)}`,`Response: ${te(t)}`],name:"OffchainLookupResponseMalformedError"})}}class Cp extends v{constructor({sender:t,to:n}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${n}`,`OffchainLookup sender address: ${t}`],name:"OffchainLookupSenderMismatchError"})}}const Np="0x556f1830",_a={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function Fp(e,{blockNumber:t,blockTag:n,data:r,to:o}){const{args:s}=xi({data:r,abi:[_a]}),[i,a,c,u,l]=s,{ccipRead:f}=e,d=f&&typeof f?.request=="function"?f.request:ja;try{if(!yn(o,i))throw new Cp({sender:i,to:o});const p=a.includes(ir)?await Ca({data:c,ccipRequest:d}):await d({data:c,sender:i,urls:a}),{data:h}=await wn(e,{blockNumber:t,blockTag:n,data:pe([u,Re([{type:"bytes"},{type:"bytes"}],[p,l])]),to:o});return h}catch(p){throw new Ip({callbackSelector:u,cause:p,data:r,extraData:l,sender:i,urls:a})}}async function ja({data:e,sender:t,urls:n}){let r=new Error("An unknown error occurred.");for(let o=0;o<n.length;o++){const s=n[o],i=s.includes("{data}")?"GET":"POST",a=i==="POST"?{data:e,sender:t}:void 0,c=i==="POST"?{"Content-Type":"application/json"}:{};try{const u=await fetch(s.replace("{sender}",t.toLowerCase()).replace("{data}",e),{body:JSON.stringify(a),headers:c,method:i});let l;if(u.headers.get("Content-Type")?.startsWith("application/json")?l=(await u.json()).data:l=await u.text(),!u.ok){r=new jn({body:a,details:l?.error?te(l.error):u.statusText,headers:u.headers,status:u.status,url:s});continue}if(!Ee(l)){r=new Tp({result:l,url:s});continue}return l}catch(u){r=new jn({body:a,details:u.message,url:s})}}throw r}const Mp=Object.freeze(Object.defineProperty({__proto__:null,ccipRequest:ja,offchainLookup:Fp,offchainLookupAbiItem:_a,offchainLookupSignature:Np},Symbol.toStringTag,{value:"Module"}));function Co(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}class zp extends v{constructor({domain:t}){super(`Invalid domain "${te(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Up extends v{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Rp extends v{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Lp(e){const{domain:t={},message:n,primaryType:r}=e,o={EIP712Domain:Za({domain:t}),...e.types};Xa({domain:t,message:n,primaryType:r,types:o});const s=["0x1901"];return t&&s.push(Op({domain:t,types:o})),r!=="EIP712Domain"&&s.push(Ha({data:n,primaryType:r,types:o})),ee(pe(s))}function Op({domain:e,types:t}){return Ha({data:e,primaryType:"EIP712Domain",types:t})}function Ha({data:e,primaryType:t,types:n}){const r=qa({data:e,primaryType:t,types:n});return ee(r)}function qa({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],o=[Dp({primaryType:t,types:n})];for(const s of n[t]){const[i,a]=Va({types:n,name:s.name,type:s.type,value:e[s.name]});r.push(i),o.push(a)}return Re(r,o)}function Dp({primaryType:e,types:t}){const n=re(_p({primaryType:e,types:t}));return ee(n)}function _p({primaryType:e,types:t}){let n="";const r=Ga({primaryType:e,types:t});r.delete(e);const o=[e,...Array.from(r).sort()];for(const s of o)n+=`${s}(${t[s].map(({name:i,type:a})=>`${a} ${i}`).join(",")})`;return n}function Ga({primaryType:e,types:t},n=new Set){const o=e.match(/^\w*/u)?.[0];if(n.has(o)||t[o]===void 0)return n;n.add(o);for(const s of t[o])Ga({primaryType:s.type,types:t},n);return n}function Va({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},ee(qa({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},ee(r)];if(n==="string")return[{type:"bytes32"},ee(re(r))];if(n.lastIndexOf("]")===n.length-1){const o=n.slice(0,n.lastIndexOf("[")),s=r.map(i=>Va({name:t,type:o,types:e,value:i}));return[{type:"bytes32"},ee(Re(s.map(([i])=>i),s.map(([,i])=>i)))]}return[{type:n},r]}function jp(e){const{domain:t,message:n,primaryType:r,types:o}=e,s=(c,u)=>{const l={...u};for(const f of c){const{name:d,type:p}=f;p==="address"&&(l[d]=l[d].toLowerCase())}return l},i=o.EIP712Domain?t?s(o.EIP712Domain,t):{}:{},a=(()=>{if(r!=="EIP712Domain")return s(o[r],n)})();return te({domain:i,message:a,primaryType:r,types:o})}function Xa(e){const{domain:t,message:n,primaryType:r,types:o}=e,s=(i,a)=>{for(const c of i){const{name:u,type:l}=c,f=a[u],d=l.match(di);if(d&&(typeof f=="number"||typeof f=="bigint")){const[b,m,g]=d;A(f,{signed:m==="int",size:Number.parseInt(g)/8})}if(l==="address"&&typeof f=="string"&&!Y(f))throw new oe({address:f});const p=l.match(Ld);if(p){const[b,m]=p;if(m&&G(f)!==Number.parseInt(m))throw new Ku({expectedSize:Number.parseInt(m),givenSize:G(f)})}const h=o[l];h&&(Hp(l),s(h,f))}};if(o.EIP712Domain&&t){if(typeof t!="object")throw new zp({domain:t});s(o.EIP712Domain,t)}if(r!=="EIP712Domain")if(o[r])s(o[r],n);else throw new Up({primaryType:r,types:o})}function Za({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},(typeof e?.chainId=="number"||typeof e?.chainId=="bigint")&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Hp(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Rp({type:e})}function qp(e){const{authorizationList:t}=e;if(t)for(const n of t){const{chainId:r}=n,o=n.address;if(!Y(o))throw new oe({address:o});if(r<0)throw new Zn({chainId:r})}No(e)}function Gp(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new qi;for(const n of t){const r=G(n),o=me(Je(n,0,1));if(r!==32)throw new Yl({hash:n,size:r});if(o!==Hi)throw new Jl({hash:n,version:o})}}No(e)}function No(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:o}=e;if(t<=0)throw new Zn({chainId:t});if(o&&!Y(o))throw new oe({address:o});if(r&&r>Gn)throw new ot({maxFeePerGas:r});if(n&&r&&n>r)throw new mn({maxFeePerGas:r,maxPriorityFeePerGas:n})}function Vp(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:o,to:s}=e;if(t<=0)throw new Zn({chainId:t});if(s&&!Y(s))throw new oe({address:s});if(n||o)throw new v("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>Gn)throw new ot({maxFeePerGas:r})}function Xp(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:o,to:s}=e;if(s&&!Y(s))throw new oe({address:s});if(typeof t<"u"&&t<=0)throw new Zn({chainId:t});if(n||o)throw new v("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>Gn)throw new ot({maxFeePerGas:r})}function ur(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:r,storageKeys:o}=e[n];for(let s=0;s<o.length;s++)if(o[s].length-2!==64)throw new hl({storageKey:o[s]});if(!Y(r,{strict:!1}))throw new oe({address:r});t.push([r,o])}return t}function Zp(e,t){const n=Vi(e);return n==="eip1559"?Yp(e,t):n==="eip2930"?Jp(e,t):n==="eip4844"?Kp(e,t):n==="eip7702"?Wp(e,t):Qp(e,t)}function Wp(e,t){const{authorizationList:n,chainId:r,gas:o,nonce:s,to:i,value:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:l,data:f}=e;qp(e);const d=ur(l),p=e0(n);return $e(["0x04",Xe([A(r),s?A(s):"0x",u?A(u):"0x",c?A(c):"0x",o?A(o):"0x",i??"0x",a?A(a):"0x",f??"0x",d,p,...En(e,t)])])}function Kp(e,t){const{chainId:n,gas:r,nonce:o,to:s,value:i,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:l,data:f}=e;Gp(e);let d=e.blobVersionedHashes,p=e.sidecars;if(e.blobs&&(typeof d>"u"||typeof p>"u")){const x=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(M=>K(M)),B=e.kzg,T=to({blobs:x,kzg:B});if(typeof d>"u"&&(d=Li({commitments:T})),typeof p>"u"){const M=no({blobs:x,commitments:T,kzg:B});p=Gi({blobs:x,commitments:T,proofs:M})}}const h=ur(l),b=[A(n),o?A(o):"0x",u?A(u):"0x",c?A(c):"0x",r?A(r):"0x",s??"0x",i?A(i):"0x",f??"0x",h,a?A(a):"0x",d??[],...En(e,t)],m=[],g=[],y=[];if(p)for(let x=0;x<p.length;x++){const{blob:B,commitment:T,proof:M}=p[x];m.push(B),g.push(T),y.push(M)}return $e(["0x03",Xe(p?[b,m,g,y]:b)])}function Yp(e,t){const{chainId:n,gas:r,nonce:o,to:s,value:i,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:u,data:l}=e;No(e);const f=ur(u),d=[A(n),o?A(o):"0x",c?A(c):"0x",a?A(a):"0x",r?A(r):"0x",s??"0x",i?A(i):"0x",l??"0x",f,...En(e,t)];return $e(["0x02",Xe(d)])}function Jp(e,t){const{chainId:n,gas:r,data:o,nonce:s,to:i,value:a,accessList:c,gasPrice:u}=e;Vp(e);const l=ur(c),f=[A(n),s?A(s):"0x",u?A(u):"0x",r?A(r):"0x",i??"0x",a?A(a):"0x",o??"0x",l,...En(e,t)];return $e(["0x01",Xe(f)])}function Qp(e,t){const{chainId:n=0,gas:r,data:o,nonce:s,to:i,value:a,gasPrice:c}=e;Xp(e);let u=[s?A(s):"0x",c?A(c):"0x",r?A(r):"0x",i??"0x",a?A(a):"0x",o??"0x"];if(t){const l=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const p=27n+(t.v===27n?0n:1n);if(t.v!==p)throw new fl({v:t.v});return p})(),f=be(t.r),d=be(t.s);u=[...u,A(l),f==="0x00"?"0x":f,d==="0x00"?"0x":d]}else n>0&&(u=[...u,A(n),"0x","0x"]);return Xe(u)}function En(e,t){const n=t??e,{v:r,yParity:o}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof o>"u")return[];const s=be(n.r),i=be(n.s);return[typeof o=="number"?o?A(1):"0x":r===0n?"0x":r===1n?A(1):r===27n?"0x":A(1),s==="0x00"?"0x":s,i==="0x00"?"0x":i]}function e0(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{chainId:r,nonce:o,...s}=n,i=n.address;t.push([r?re(r):"0x",i,o?re(o):"0x",...En({},s)])}return t}const t0=`Ethereum Signed Message:
`;function n0(e){const t=typeof e=="string"?mt(e):typeof e.raw=="string"?e.raw:K(e.raw),n=mt(`${t0}${G(t)}`);return pe([n,t])}function Wa(e,t){return ee(n0(e),t)}const Ka="0x6492649264926492649264926492649264926492649264926492649264926492";function r0(e){return Ln(e,-32)===Ka}function o0(e){const{address:t,data:n,signature:r,to:o="hex"}=e,s=$e([Re([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),Ka]);return o==="hex"?s:Ae(s)}class s0 extends v{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Fo(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new s0({value:e});let[n,r="0"]=e.split(".");const o=n.startsWith("-");if(o&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),t===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){const[s,i,a]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],c=Math.round(+`${i}.${a}`);c>9?r=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):r=`${s}${c}`,r.length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${o?"-":""}${n}${r}`)}function i0(e,t="wei"){return Fo(e,Ei[t])}function a0(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function c0(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?me(e.nonce):void 0,storageProof:e.storageProof?a0(e.storageProof):void 0}}async function u0(e,{address:t,blockNumber:n,blockTag:r,storageKeys:o}){const s=r??"latest",i=n!==void 0?A(n):void 0,a=await e.request({method:"eth_getProof",params:[t,o,i||s]});return c0(a)}async function d0(e,{address:t,blockNumber:n,blockTag:r="latest",slot:o}){const s=n!==void 0?A(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,o,s||r]})}async function Mo(e,{blockHash:t,blockNumber:n,blockTag:r,hash:o,index:s}){const i=r||"latest",a=n!==void 0?A(n):void 0;let c=null;if(o?c=await e.request({method:"eth_getTransactionByHash",params:[o]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,A(s)]},{dedupe:!0}):c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||i,A(s)]},{dedupe:!!a}),!c)throw new Ai({blockHash:t,blockNumber:n,blockTag:i,hash:o,index:s});return(e.chain?.formatters?.transaction?.format||Vn)(c)}async function l0(e,{hash:t,transactionReceipt:n}){const[r,o]=await Promise.all([N(e,xn,"getBlockNumber")({}),t?N(e,Mo,"getTransaction")({hash:t}):void 0]),s=n?.blockNumber||o?.blockNumber;return s?r-s+1n:0n}async function dr(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new $i({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||Aa)(n)}async function f0(e,t){const{account:n,allowFailure:r=!0,batchSize:o,blockNumber:s,blockTag:i,multicallAddress:a,stateOverride:c}=t,u=t.contracts,l=o??(typeof e.batch?.multicall=="object"&&e.batch.multicall.batchSize||1024);let f=a;if(!f){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");f=Tt({blockNumber:s,chain:e.chain,contract:"multicall3"})}const d=[[]];let p=0,h=0;for(let g=0;g<u.length;g++){const{abi:y,address:x,args:B,functionName:T}=u[g];try{const M=ge({abi:y,args:B,functionName:T});h+=(M.length-2)/2,l>0&&h>l&&d[p].length>0&&(p++,h=(M.length-2)/2,d[p]=[]),d[p]=[...d[p],{allowFailure:!0,callData:M,target:x}]}catch(M){const z=rt(M,{abi:y,address:x,args:B,docsPath:"/docs/contract/multicall",functionName:T,sender:n});if(!r)throw z;d[p]=[...d[p],{allowFailure:!0,callData:"0x",target:x}]}}const b=await Promise.allSettled(d.map(g=>N(e,Te,"readContract")({abi:ho,account:n,address:f,args:[g],blockNumber:s,blockTag:i,functionName:"aggregate3",stateOverride:c}))),m=[];for(let g=0;g<b.length;g++){const y=b[g];if(y.status==="rejected"){if(!r)throw y.reason;for(let B=0;B<d[g].length;B++)m.push({status:"failure",error:y.reason,result:void 0});continue}const x=y.value;for(let B=0;B<x.length;B++){const{returnData:T,success:M}=x[B],{callData:z}=d[g][B],{abi:O,address:I,functionName:D,args:_}=u[m.length];try{if(z==="0x")throw new Dt;if(!M)throw new _n({data:T});const U=it({abi:O,args:_,data:T,functionName:D});m.push(r?{result:U,status:"success"}:U)}catch(U){const S=rt(U,{abi:O,address:I,args:_,docsPath:"/docs/contract/multicall",functionName:D});if(!r)throw S;m.push({error:S,result:void 0,status:"failure"})}}}if(m.length!==u.length)throw new v("multicall results mismatch");return m}async function zo(e,t){const{blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",blocks:o,returnFullTransactions:s,traceTransfers:i,validation:a}=t;try{const c=[];for(const d of o){const p=d.blockOverrides?ca(d.blockOverrides):void 0,h=d.calls.map(m=>{const g=m,y=g.account?Z(g.account):void 0,x=g.abi?ge(g):g.data,B={...g,data:g.dataSuffix?pe([x||"0x",g.dataSuffix]):x,from:g.from??y?.address};return st(B),kt(B)}),b=d.stateOverrides?Wr(d.stateOverrides):void 0;c.push({blockOverrides:p,calls:h,stateOverrides:b})}const l=(typeof n=="bigint"?A(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:s,traceTransfers:i,validation:a},l]})).map((d,p)=>({...Yr(d),calls:d.calls.map((h,b)=>{const{abi:m,args:g,functionName:y,to:x}=o[p].calls[b],B=h.error?.data??h.returnData,T=BigInt(h.gasUsed),M=h.logs?.map(D=>Oe(D)),z=h.status==="0x1"?"success":"failure",O=m&&z==="success"&&B!=="0x"?it({abi:m,data:B,functionName:y}):null,I=(()=>{if(z==="success")return;let D;if(h.error?.data==="0x"?D=new Dt:h.error&&(D=new _n(h.error)),!!D)return rt(D,{abi:m??[],address:x??"0x",args:g,functionName:y??"<unknown>"})})();return{data:B,gasUsed:T,logs:M,status:z,...z==="success"?{result:O}:{error:I}}})}))}catch(c){const u=c,l=Hn(u,{});throw l instanceof gn?u:l}}function Ya(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=oi(ff(e));return n==="Bytes"?r:ra(r)}class p0 extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Uo={checksum:new p0(8192)}.checksum,h0=/^0x[a-fA-F0-9]{40}$/;function lr(e,t={}){const{strict:n=!0}=t;if(!h0.test(e))throw new Ja({address:e,cause:new m0});if(n){if(e.toLowerCase()===e)return;if(b0(e)!==e)throw new Ja({address:e,cause:new g0})}}function b0(e){if(Uo.has(e))return Uo.get(e);lr(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=Ya(bf(t),{as:"Bytes"}),r=t.split("");for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&r[s]&&(r[s]=r[s].toUpperCase()),(n[s>>1]&15)>=8&&r[s+1]&&(r[s+1]=r[s+1].toUpperCase());const o=`0x${r.join("")}`;return Uo.set(e,o),o}function Ro(e,t={}){const{strict:n=!0}=t??{};try{return lr(e,{strict:n}),!0}catch{return!1}}class Ja extends q{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class m0 extends q{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class g0 extends q{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function Lo(e){let t=!0,n="",r=0,o="",s=!1;for(let i=0;i<e.length;i++){const a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&r++,a===")"&&r--,!!t){if(r===0){if(a===" "&&["event","function","error",""].includes(o))o="";else if(o+=a,a===")"){s=!0;break}continue}if(a===" "){e[i-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}o+=a,n+=a}}if(!s)throw new q("Unable to normalize signature.");return o}function Oo(e,t){const n=typeof e,r=t.type;switch(r){case"address":return Ro(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((o,s)=>Oo(Object.values(e)[s],o)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(o=>Oo(o,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Qa(e,t,n){for(const r in e){const o=e[r],s=t[r];if(o.type==="tuple"&&s.type==="tuple"&&"components"in o&&"components"in s)return Qa(o.components,s.components,n[r]);const i=[o.type,s.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?Ro(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?Ro(n[r],{strict:!1}):!1)return i}}function ec(e,t={}){const{prepare:n=!0}=t,r=Array.isArray(e)||typeof e=="string"?Ps(e):e;return{...r,...n?{hash:Ft(r)}:{}}}function y0(e,t,n){const{args:r=[],prepare:o=!0}=n??{},s=Ef(t,{strict:!1}),i=e.filter(u=>s?u.type==="function"||u.type==="error"?tc(u)===po(t,0,4):u.type==="event"?Ft(u)===t:!1:"name"in u&&u.name===t);if(i.length===0)throw new Do({name:t});if(i.length===1)return{...i[0],...o?{hash:Ft(i[0])}:{}};let a;for(const u of i){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...o?{hash:Ft(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((f,d)=>{const p="inputs"in u&&u.inputs[d];return p?Oo(f,p):!1})){if(a&&"inputs"in a&&a.inputs){const f=Qa(u.inputs,a.inputs,r);if(f)throw new x0({abiItem:u,type:f[0]},{abiItem:a,type:f[1]})}a=u}}const c=(()=>{if(a)return a;const[u,...l]=i;return{...u,overloads:l}})();if(!c)throw new Do({name:t});return{...c,...o?{hash:Ft(c)}:{}}}function tc(e){return po(Ft(e),0,4)}function w0(e){const t=typeof e=="string"?e:kn(e);return Lo(t)}function Ft(e){return typeof e!="string"&&"hash"in e&&e.hash?e.hash:Ya(fo(w0(e)))}class x0 extends q{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${Lo(kn(t.abiItem))}\`, and`,`\`${n.type}\` in \`${Lo(kn(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Do extends q{constructor({name:t,data:n,type:r="item"}){const o=t?` with name "${t}"`:n?` with data "${n}"`:"";super(`ABI ${r}${o} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const v0=/^(.*)\[([0-9]*)\]$/,E0=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,nc=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function S0({checksumAddress:e,parameters:t,values:n}){const r=[];for(let o=0;o<t.length;o++)r.push(_o({checksumAddress:e,parameter:t[o],value:n[o]}));return r}function _o({checksumAddress:e=!1,parameter:t,value:n}){const r=t,o=C0(r.type);if(o){const[s,i]=o;return $0(n,{checksumAddress:e,length:s,parameter:{...r,type:i}})}if(r.type==="tuple")return T0(n,{checksumAddress:e,parameter:r});if(r.type==="address")return A0(n,{checksum:e});if(r.type==="bool")return P0(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const s=r.type.startsWith("int"),[,,i="256"]=nc.exec(r.type)??[];return k0(n,{signed:s,size:Number(i)})}if(r.type.startsWith("bytes"))return B0(n,{type:r.type});if(r.type==="string")return I0(n);throw new ic(r.type)}function jo(e){let t=0;for(let s=0;s<e.length;s++){const{dynamic:i,encoded:a}=e[s];i?t+=32:t+=ye(a)}const n=[],r=[];let o=0;for(let s=0;s<e.length;s++){const{dynamic:i,encoded:a}=e[s];i?(n.push(se(t+o,{size:32})),r.push(a),o+=ye(a)):n.push(a)}return Ie(...n,...r)}function A0(e,t){const{checksum:n=!1}=t;return lr(e,{strict:n}),{dynamic:!1,encoded:at(e.toLowerCase())}}function $0(e,t){const{checksumAddress:n,length:r,parameter:o}=t,s=r===null;if(!Array.isArray(e))throw new F0(e);if(!s&&e.length!==r)throw new N0({expectedLength:r,givenLength:e.length,type:`${o.type}[${r}]`});let i=!1;const a=[];for(let c=0;c<e.length;c++){const u=_o({checksumAddress:n,parameter:o,value:e[c]});u.dynamic&&(i=!0),a.push(u)}if(s||i){const c=jo(a);if(s){const u=se(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Ie(u,c):u}}if(i)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Ie(...a.map(({encoded:c})=>c))}}function B0(e,{type:t}){const[,n]=t.split("bytes"),r=ye(e);if(!n){let o=e;return r%32!==0&&(o=ct(o,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:Ie(at(se(r,{size:32})),o)}}if(r!==Number.parseInt(n))throw new oc({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:ct(e)}}function P0(e){if(typeof e!="boolean")throw new q(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:at(na(e))}}function k0(e,{signed:t,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,o=t?-r-1n:0n;if(e>r||e<o)throw new oa({max:r.toString(),min:o.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:se(e,{size:32,signed:t})}}function I0(e){const t=fo(e),n=Math.ceil(ye(t)/32),r=[];for(let o=0;o<n;o++)r.push(ct(po(t,o*32,(o+1)*32)));return{dynamic:!0,encoded:Ie(ct(se(ye(t),{size:32})),...r)}}function T0(e,t){const{checksumAddress:n,parameter:r}=t;let o=!1;const s=[];for(let i=0;i<r.components.length;i++){const a=r.components[i],c=Array.isArray(e)?i:a.name,u=_o({checksumAddress:n,parameter:a,value:e[c]});s.push(u),u.dynamic&&(o=!0)}return{dynamic:o,encoded:o?jo(s):Ie(...s.map(({encoded:i})=>i))}}function C0(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function rc(e,t,n){const{checksumAddress:r=!1}={};if(e.length!==t.length)throw new sc({expectedLength:e.length,givenLength:t.length});const o=S0({checksumAddress:r,parameters:e,values:t}),s=jo(o);return s.length===0?"0x":s}function Ho(e,t){if(e.length!==t.length)throw new sc({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const o=e[r],s=t[r];n.push(Ho.encode(o,s))}return Ie(...n)}(function(e){function t(n,r,o=!1){if(n==="address"){const c=r;return lr(c),at(c.toLowerCase(),o?32:0)}if(n==="string")return fo(r);if(n==="bytes")return r;if(n==="bool")return at(na(r),o?32:1);const s=n.match(nc);if(s){const[c,u,l="256"]=s,f=Number.parseInt(l)/8;return se(r,{size:o?32:f,signed:u==="int"})}const i=n.match(E0);if(i){const[c,u]=i;if(Number.parseInt(u)!==(r.length-2)/2)throw new oc({expectedSize:Number.parseInt(u),value:r});return ct(r,o?32:0)}const a=n.match(v0);if(a&&Array.isArray(r)){const[c,u]=a,l=[];for(let f=0;f<r.length;f++)l.push(t(u,r[f],!0));return l.length===0?"0x":Ie(...l)}throw new ic(n)}e.encode=t})(Ho||(Ho={}));class N0 extends q{constructor({expectedLength:t,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class oc extends q{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${ye(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class sc extends q{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class F0 extends q{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class ic extends q{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function M0(e,t){const{bytecode:n,args:r}=t;return Ie(n,e.inputs?.length&&r?.length?rc(e.inputs,r):"0x")}function z0(e){return ec(e)}function U0(e,...t){const{overloads:n}=e,r=n?R0([e,...n],e.name,{args:t[0]}):e,o=L0(r),s=t.length>0?rc(r.inputs,t[0]):void 0;return s?Ie(o,s):o}function Mt(e,t={}){return ec(e,t)}function R0(e,t,n){const r=y0(e,t,n);if(r.type!=="function")throw new Do({name:t,type:"function"});return r}function L0(e){return tc(e)}const O0="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Ce="0x0000000000000000000000000000000000000000",D0="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function _0(e,t){const{blockNumber:n,blockTag:r,calls:o,stateOverrides:s,traceAssetChanges:i,traceTransfers:a,validation:c}=t,u=t.account?Z(t.account):void 0;if(i&&!u)throw new v("`account` is required when `traceAssetChanges` is true");const l=u?M0(z0("constructor(bytes, bytes)"),{bytecode:ha,args:[D0,U0(Mt("function getBalance(address)"),[u.address])]}):void 0,f=i?await Promise.all(t.calls.map(async $=>{if(!$.data&&!$.abi)return;const{accessList:k}=await Ra(e,{account:u.address,...$,data:$.abi?ge($):$.data});return k.map(({address:F,storageKeys:R})=>R.length>0?F:null)})).then($=>$.flat().filter(Boolean)):[],d=await zo(e,{blockNumber:n,blockTag:r,blocks:[...i?[{calls:[{data:l}],stateOverrides:s},{calls:f.map(($,k)=>({abi:[Mt("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:$,from:Ce,nonce:k})),stateOverrides:[{address:Ce,nonce:0}]}]:[],{calls:[...o,{}].map($=>({...$,from:u?.address})),stateOverrides:s},...i?[{calls:[{data:l}]},{calls:f.map(($,k)=>({abi:[Mt("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:$,from:Ce,nonce:k})),stateOverrides:[{address:Ce,nonce:0}]},{calls:f.map(($,k)=>({to:$,abi:[Mt("function decimals() returns (uint256)")],functionName:"decimals",from:Ce,nonce:k})),stateOverrides:[{address:Ce,nonce:0}]},{calls:f.map(($,k)=>({to:$,abi:[Mt("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Ce,nonce:k})),stateOverrides:[{address:Ce,nonce:0}]},{calls:f.map(($,k)=>({to:$,abi:[Mt("function symbol() returns (string)")],functionName:"symbol",from:Ce,nonce:k})),stateOverrides:[{address:Ce,nonce:0}]}]:[]],traceTransfers:a,validation:c}),p=i?d[2]:d[0],[h,b,,m,g,y,x,B]=i?d:[],{calls:T,...M}=p,z=T.slice(0,-1)??[],O=h?.calls??[],I=b?.calls??[],D=[...O,...I].map($=>$.status==="success"?Q($.data):null),_=m?.calls??[],U=g?.calls??[],S=[..._,...U].map($=>$.status==="success"?Q($.data):null),E=(y?.calls??[]).map($=>$.status==="success"?$.result:null),w=(B?.calls??[]).map($=>$.status==="success"?$.result:null),P=(x?.calls??[]).map($=>$.status==="success"?$.result:null),C=[];for(const[$,k]of S.entries()){const F=D[$];if(typeof k!="bigint"||typeof F!="bigint")continue;const R=E[$-1],L=w[$-1],W=P[$-1],H=$===0?{address:O0,decimals:18,symbol:"ETH"}:{address:f[$-1],decimals:W||R?Number(R??1):void 0,symbol:L??void 0};C.some(j=>j.token.address===H.address)||C.push({token:H,value:{pre:F,post:k,diff:k-F}})}return{assetChanges:C,block:M,results:z}}class ac extends Pr{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Gs(t);const r=zn(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=t.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),xt(s)}update(t){return wt(this),this.iHash.update(t),this}digestInto(t){wt(this),ze(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:i,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const cc=(e,t,n)=>new ac(e,t).update(n).digest();cc.create=(e,t)=>new ac(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qo=BigInt(0),Go=BigInt(1);function fr(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function dt(e,t,n=""){const r=Fn(e),o=e?.length,s=t!==void 0;if(!r||s&&o!==t){const i=n&&`"${n}" `,a=s?` of length ${t}`:"",c=r?`length=${o}`:`type=${typeof e}`;throw new Error(i+"expected Uint8Array"+a+", got "+c)}return e}function pr(e){const t=e.toString(16);return t.length&1?"0"+t:t}function uc(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?qo:BigInt("0x"+e)}function hr(e){return uc(vt(e))}function dc(e){return ze(e),uc(vt(Uint8Array.from(e).reverse()))}function Vo(e,t){return Mn(e.toString(16).padStart(t*2,"0"))}function lc(e,t){return Vo(e,t).reverse()}function ue(e,t,n){let r;if(typeof t=="string")try{r=Mn(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(Fn(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");return r.length,r}const Xo=e=>typeof e=="bigint"&&qo<=e;function j0(e,t,n){return Xo(e)&&Xo(t)&&Xo(n)&&t<=e&&e<n}function H0(e,t,n,r){if(!j0(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function fc(e){let t;for(t=0;e>qo;e>>=Go,t+=1);return t}const Sn=e=>(Go<<BigInt(e))-Go;function q0(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=p=>new Uint8Array(p),o=p=>Uint8Array.of(p);let s=r(e),i=r(e),a=0;const c=()=>{s.fill(1),i.fill(0),a=0},u=(...p)=>n(i,s,...p),l=(p=r(0))=>{i=u(o(0),p),s=u(),p.length!==0&&(i=u(o(1),p),s=u())},f=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const h=[];for(;p<t;){s=u();const b=s.slice();h.push(b),p+=s.length}return Ve(...h)};return(p,h)=>{c(),l(p);let b;for(;!(b=h(f()));)l();return c(),b}}function Zo(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(o,s,i){const a=e[o];if(i&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${o}" is invalid: expected ${s}, got ${c}`)}Object.entries(t).forEach(([o,s])=>r(o,s,!1)),Object.entries(n).forEach(([o,s])=>r(o,s,!0))}function pc(e){const t=new WeakMap;return(n,...r)=>{const o=t.get(n);if(o!==void 0)return o;const s=e(n,...r);return t.set(n,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const de=BigInt(0),ie=BigInt(1),lt=BigInt(2),hc=BigInt(3),bc=BigInt(4),mc=BigInt(5),G0=BigInt(7),gc=BigInt(8),V0=BigInt(9),yc=BigInt(16);function Be(e,t){const n=e%t;return n>=de?n:t+n}function we(e,t,n){let r=e;for(;t-- >de;)r*=r,r%=n;return r}function wc(e,t){if(e===de)throw new Error("invert: expected non-zero number");if(t<=de)throw new Error("invert: expected positive modulus, got "+t);let n=Be(e,t),r=t,o=de,s=ie;for(;n!==de;){const a=r/n,c=r%n,u=o-s*a;r=n,n=c,o=s,s=u}if(r!==ie)throw new Error("invert: does not exist");return Be(o,t)}function Wo(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function xc(e,t){const n=(e.ORDER+ie)/bc,r=e.pow(t,n);return Wo(e,r,t),r}function X0(e,t){const n=(e.ORDER-mc)/gc,r=e.mul(t,lt),o=e.pow(r,n),s=e.mul(t,o),i=e.mul(e.mul(s,lt),o),a=e.mul(s,e.sub(i,e.ONE));return Wo(e,a,t),a}function Z0(e){const t=An(e),n=vc(e),r=n(t,t.neg(t.ONE)),o=n(t,r),s=n(t,t.neg(r)),i=(e+G0)/yc;return(a,c)=>{let u=a.pow(c,i),l=a.mul(u,r);const f=a.mul(u,o),d=a.mul(u,s),p=a.eql(a.sqr(l),c),h=a.eql(a.sqr(f),c);u=a.cmov(u,l,p),l=a.cmov(d,f,h);const b=a.eql(a.sqr(l),c),m=a.cmov(u,l,b);return Wo(a,m,c),m}}function vc(e){if(e<hc)throw new Error("sqrt is not defined for small field");let t=e-ie,n=0;for(;t%lt===de;)t/=lt,n++;let r=lt;const o=An(e);for(;Sc(o,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return xc;let s=o.pow(r,t);const i=(t+ie)/lt;return function(c,u){if(c.is0(u))return u;if(Sc(c,u)!==1)throw new Error("Cannot find square root");let l=n,f=c.mul(c.ONE,s),d=c.pow(u,t),p=c.pow(u,i);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let h=1,b=c.sqr(d);for(;!c.eql(b,c.ONE);)if(h++,b=c.sqr(b),h===l)throw new Error("Cannot find square root");const m=ie<<BigInt(l-h-1),g=c.pow(f,m);l=h,f=c.sqr(g),d=c.mul(d,f),p=c.mul(p,g)}return p}}function W0(e){return e%bc===hc?xc:e%gc===mc?X0:e%yc===V0?Z0(e):vc(e)}const K0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Y0(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=K0.reduce((r,o)=>(r[o]="function",r),t);return Zo(e,n),e}function J0(e,t,n){if(n<de)throw new Error("invalid exponent, negatives unsupported");if(n===de)return e.ONE;if(n===ie)return t;let r=e.ONE,o=t;for(;n>de;)n&ie&&(r=e.mul(r,o)),o=e.sqr(o),n>>=ie;return r}function Ec(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),o=t.reduce((i,a,c)=>e.is0(a)?i:(r[c]=i,e.mul(i,a)),e.ONE),s=e.inv(o);return t.reduceRight((i,a,c)=>e.is0(a)?i:(r[c]=e.mul(i,r[c]),e.mul(i,a)),s),r}function Sc(e,t){const n=(e.ORDER-ie)/lt,r=e.pow(t,n),o=e.eql(r,e.ONE),s=e.eql(r,e.ZERO),i=e.eql(r,e.neg(e.ONE));if(!o&&!s&&!i)throw new Error("invalid Legendre symbol result");return o?1:s?0:-1}function Ac(e,t){t!==void 0&&jt(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function An(e,t,n=!1,r={}){if(e<=de)throw new Error("invalid field: expected ORDER > 0, got "+e);let o,s,i=!1,a;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const d=t;d.BITS&&(o=d.BITS),d.sqrt&&(s=d.sqrt),typeof d.isLE=="boolean"&&(n=d.isLE),typeof d.modFromBytes=="boolean"&&(i=d.modFromBytes),a=d.allowedLengths}else typeof t=="number"&&(o=t),r.sqrt&&(s=r.sqrt);const{nBitLength:c,nByteLength:u}=Ac(e,o);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const f=Object.freeze({ORDER:e,isLE:n,BITS:c,BYTES:u,MASK:Sn(c),ZERO:de,ONE:ie,allowedLengths:a,create:d=>Be(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return de<=d&&d<e},is0:d=>d===de,isValidNot0:d=>!f.is0(d)&&f.isValid(d),isOdd:d=>(d&ie)===ie,neg:d=>Be(-d,e),eql:(d,p)=>d===p,sqr:d=>Be(d*d,e),add:(d,p)=>Be(d+p,e),sub:(d,p)=>Be(d-p,e),mul:(d,p)=>Be(d*p,e),pow:(d,p)=>J0(f,d,p),div:(d,p)=>Be(d*wc(p,e),e),sqrN:d=>d*d,addN:(d,p)=>d+p,subN:(d,p)=>d-p,mulN:(d,p)=>d*p,inv:d=>wc(d,e),sqrt:s||(d=>(l||(l=W0(e)),l(f,d))),toBytes:d=>n?lc(d,u):Vo(d,u),fromBytes:(d,p=!0)=>{if(a){if(!a.includes(d.length)||d.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+d.length);const b=new Uint8Array(u);b.set(d,n?0:b.length-d.length),d=b}if(d.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+d.length);let h=n?dc(d):hr(d);if(i&&(h=Be(h,e)),!p&&!f.isValid(h))throw new Error("invalid field element: outside of range 0..ORDER");return h},invertBatch:d=>Ec(f,d),cmov:(d,p,h)=>h?p:d});return Object.freeze(f)}function $c(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Bc(e){const t=$c(e);return t+Math.ceil(t/2)}function Q0(e,t,n=!1){const r=e.length,o=$c(t),s=Bc(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const i=n?dc(e):hr(e),a=Be(i,t-ie)+ie;return n?lc(a,o):Vo(a,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zt=BigInt(0),ft=BigInt(1);function br(e,t){const n=t.negate();return e?n:t}function Ko(e,t){const n=Ec(e.Fp,t.map(r=>r.Z));return t.map((r,o)=>e.fromAffine(r.toAffine(n[o])))}function Pc(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Yo(e,t){Pc(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),o=2**e,s=Sn(e),i=BigInt(e);return{windows:n,windowSize:r,mask:s,maxNumber:o,shiftBy:i}}function kc(e,t,n){const{windowSize:r,mask:o,maxNumber:s,shiftBy:i}=n;let a=Number(e&o),c=e>>i;a>r&&(a-=s,c+=ft);const u=t*r,l=u+Math.abs(a)-1,f=a===0,d=a<0,p=t%2!==0;return{nextN:c,offset:l,isZero:f,isNeg:d,isNegF:p,offsetF:u}}function eh(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function th(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Jo=new WeakMap,Ic=new WeakMap;function Qo(e){return Ic.get(e)||1}function Tc(e){if(e!==zt)throw new Error("invalid wNAF")}class nh{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,r=this.ZERO){let o=t;for(;n>zt;)n&ft&&(r=r.add(o)),o=o.double(),n>>=ft;return r}precomputeWindow(t,n){const{windows:r,windowSize:o}=Yo(n,this.bits),s=[];let i=t,a=i;for(let c=0;c<r;c++){a=i,s.push(a);for(let u=1;u<o;u++)a=a.add(i),s.push(a);i=a.double()}return s}wNAF(t,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let o=this.ZERO,s=this.BASE;const i=Yo(t,this.bits);for(let a=0;a<i.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:f,isNegF:d,offsetF:p}=kc(r,a,i);r=c,l?s=s.add(br(d,n[p])):o=o.add(br(f,n[u]))}return Tc(r),{p:o,f:s}}wNAFUnsafe(t,n,r,o=this.ZERO){const s=Yo(t,this.bits);for(let i=0;i<s.windows&&r!==zt;i++){const{nextN:a,offset:c,isZero:u,isNeg:l}=kc(r,i,s);if(r=a,!u){const f=n[c];o=o.add(l?f.negate():f)}}return Tc(r),o}getPrecomputes(t,n,r){let o=Jo.get(n);return o||(o=this.precomputeWindow(n,t),t!==1&&(typeof r=="function"&&(o=r(o)),Jo.set(n,o))),o}cached(t,n,r){const o=Qo(t);return this.wNAF(o,this.getPrecomputes(o,t,r),n)}unsafe(t,n,r,o){const s=Qo(t);return s===1?this._unsafeLadder(t,n,o):this.wNAFUnsafe(s,this.getPrecomputes(s,t,r),n,o)}createCache(t,n){Pc(n,this.bits),Ic.set(t,n),Jo.delete(t)}hasCache(t){return Qo(t)!==1}}function rh(e,t,n,r){let o=t,s=e.ZERO,i=e.ZERO;for(;n>zt||r>zt;)n&ft&&(s=s.add(o)),r&ft&&(i=i.add(o)),o=o.double(),n>>=ft,r>>=ft;return{p1:s,p2:i}}function oh(e,t,n,r){eh(n,e),th(r,t);const o=n.length,s=r.length;if(o!==s)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,a=fc(BigInt(o));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=Sn(c),l=new Array(Number(u)+1).fill(i),f=Math.floor((t.BITS-1)/c)*c;let d=i;for(let p=f;p>=0;p-=c){l.fill(i);for(let b=0;b<s;b++){const m=r[b],g=Number(m>>BigInt(p)&u);l[g]=l[g].add(n[b])}let h=i;for(let b=l.length-1,m=i;b>0;b--)m=m.add(l[b]),h=h.add(m);if(d=d.add(h),p!==0)for(let b=0;b<c;b++)d=d.double()}return d}function Cc(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Y0(t),t}else return An(e,{isLE:n})}function sh(e,t,n={},r){if(r===void 0&&(r=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const c of["p","n","h"]){const u=t[c];if(!(typeof u=="bigint"&&u>zt))throw new Error(`CURVE.${c} must be positive bigint`)}const o=Cc(t.p,n.Fp,r),s=Cc(t.n,n.Fn,r),a=["Gx","Gy","a","b"];for(const c of a)if(!o.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:o,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nc=(e,t)=>(e+(e>=0?t:-t)/Fc)/t;function ih(e,t,n){const[[r,o],[s,i]]=t,a=Nc(i*e,n),c=Nc(-o*e,n);let u=e-a*r-c*s,l=-a*o-c*i;const f=u<He,d=l<He;f&&(u=-u),d&&(l=-l);const p=Sn(Math.ceil(fc(n)/2))+Ut;if(u<He||u>=p||l<He||l>=p)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:f,k1:u,k2neg:d,k2:l}}function es(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function ts(e,t){const n={};for(let r of Object.keys(t))n[r]=e[r]===void 0?t[r]:e[r];return fr(n.lowS,"lowS"),fr(n.prehash,"prehash"),n.format!==void 0&&es(n.format),n}class ah extends Error{constructor(t=""){super(t)}}const je={Err:ah,_tlv:{encode:(e,t)=>{const{Err:n}=je;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,o=pr(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?pr(o.length/2|128):"";return pr(e)+s+o+t},decode(e,t){const{Err:n}=je;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const o=t[r++],s=!!(o&128);let i=0;if(!s)i=o;else{const c=o&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)i=i<<8|l;if(r+=c,i<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+i);if(a.length!==i)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=je;if(e<He)throw new t("integer: negative integers are not allowed");let n=pr(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=je;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return hr(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=je,o=ue("signature",e),{v:s,l:i}=r.decode(48,o);if(i.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:u,l}=r.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=je,r=t.encode(2,n.encode(e.r)),o=t.encode(2,n.encode(e.s)),s=r+o;return t.encode(48,s)}},He=BigInt(0),Ut=BigInt(1),Fc=BigInt(2),mr=BigInt(3),ch=BigInt(4);function Rt(e,t){const{BYTES:n}=e;let r;if(typeof t=="bigint")r=t;else{let o=ue("private key",t);try{r=e.fromBytes(o)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function uh(e,t={}){const n=sh("weierstrass",e,t),{Fp:r,Fn:o}=n;let s=n.CURVE;const{h:i,n:a}=s;Zo(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!r.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=zc(r,o);function l(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(U,S,E){const{x:w,y:P}=S.toAffine(),C=r.toBytes(w);if(fr(E,"isCompressed"),E){l();const $=!r.isOdd(P);return Ve(Mc($),C)}else return Ve(Uint8Array.of(4),C,r.toBytes(P))}function d(U){dt(U,void 0,"Point");const{publicKey:S,publicKeyUncompressed:E}=u,w=U.length,P=U[0],C=U.subarray(1);if(w===S&&(P===2||P===3)){const $=r.fromBytes(C);if(!r.isValid($))throw new Error("bad point: is not on curve, wrong x");const k=b($);let F;try{F=r.sqrt(k)}catch(W){const H=W instanceof Error?": "+W.message:"";throw new Error("bad point: is not on curve, sqrt error"+H)}l();const R=r.isOdd(F);return(P&1)===1!==R&&(F=r.neg(F)),{x:$,y:F}}else if(w===E&&P===4){const $=r.BYTES,k=r.fromBytes(C.subarray(0,$)),F=r.fromBytes(C.subarray($,$*2));if(!m(k,F))throw new Error("bad point: is not on curve");return{x:k,y:F}}else throw new Error(`bad point: got length ${w}, expected compressed=${S} or uncompressed=${E}`)}const p=t.toBytes||f,h=t.fromBytes||d;function b(U){const S=r.sqr(U),E=r.mul(S,U);return r.add(r.add(E,r.mul(U,s.a)),s.b)}function m(U,S){const E=r.sqr(S),w=b(U);return r.eql(E,w)}if(!m(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const g=r.mul(r.pow(s.a,mr),ch),y=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(g,y)))throw new Error("bad curve params: a or b");function x(U,S,E=!1){if(!r.isValid(S)||E&&r.is0(S))throw new Error(`bad point coordinate ${U}`);return S}function B(U){if(!(U instanceof I))throw new Error("ProjectivePoint expected")}function T(U){if(!c||!c.basises)throw new Error("no endo");return ih(U,c.basises,o.ORDER)}const M=pc((U,S)=>{const{X:E,Y:w,Z:P}=U;if(r.eql(P,r.ONE))return{x:E,y:w};const C=U.is0();S==null&&(S=C?r.ONE:r.inv(P));const $=r.mul(E,S),k=r.mul(w,S),F=r.mul(P,S);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(F,r.ONE))throw new Error("invZ was invalid");return{x:$,y:k}}),z=pc(U=>{if(U.is0()){if(t.allowInfinityPoint&&!r.is0(U.Y))return;throw new Error("bad point: ZERO")}const{x:S,y:E}=U.toAffine();if(!r.isValid(S)||!r.isValid(E))throw new Error("bad point: x or y not field elements");if(!m(S,E))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function O(U,S,E,w,P){return E=new I(r.mul(E.X,U),E.Y,E.Z),S=br(w,S),E=br(P,E),S.add(E)}class I{constructor(S,E,w){this.X=x("x",S),this.Y=x("y",E,!0),this.Z=x("z",w),Object.freeze(this)}static CURVE(){return s}static fromAffine(S){const{x:E,y:w}=S||{};if(!S||!r.isValid(E)||!r.isValid(w))throw new Error("invalid affine point");if(S instanceof I)throw new Error("projective point not allowed");return r.is0(E)&&r.is0(w)?I.ZERO:new I(E,w,r.ONE)}static fromBytes(S){const E=I.fromAffine(h(dt(S,void 0,"point")));return E.assertValidity(),E}static fromHex(S){return I.fromBytes(ue("pointHex",S))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(S=8,E=!0){return _.createCache(this,S),E||this.multiply(mr),this}assertValidity(){z(this)}hasEvenY(){const{y:S}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(S)}equals(S){B(S);const{X:E,Y:w,Z:P}=this,{X:C,Y:$,Z:k}=S,F=r.eql(r.mul(E,k),r.mul(C,P)),R=r.eql(r.mul(w,k),r.mul($,P));return F&&R}negate(){return new I(this.X,r.neg(this.Y),this.Z)}double(){const{a:S,b:E}=s,w=r.mul(E,mr),{X:P,Y:C,Z:$}=this;let k=r.ZERO,F=r.ZERO,R=r.ZERO,L=r.mul(P,P),W=r.mul(C,C),H=r.mul($,$),j=r.mul(P,C);return j=r.add(j,j),R=r.mul(P,$),R=r.add(R,R),k=r.mul(S,R),F=r.mul(w,H),F=r.add(k,F),k=r.sub(W,F),F=r.add(W,F),F=r.mul(k,F),k=r.mul(j,k),R=r.mul(w,R),H=r.mul(S,H),j=r.sub(L,H),j=r.mul(S,j),j=r.add(j,R),R=r.add(L,L),L=r.add(R,L),L=r.add(L,H),L=r.mul(L,j),F=r.add(F,L),H=r.mul(C,$),H=r.add(H,H),L=r.mul(H,j),k=r.sub(k,L),R=r.mul(H,W),R=r.add(R,R),R=r.add(R,R),new I(k,F,R)}add(S){B(S);const{X:E,Y:w,Z:P}=this,{X:C,Y:$,Z:k}=S;let F=r.ZERO,R=r.ZERO,L=r.ZERO;const W=s.a,H=r.mul(s.b,mr);let j=r.mul(E,C),V=r.mul(w,$),J=r.mul(P,k),le=r.add(E,w),X=r.add(C,$);le=r.mul(le,X),X=r.add(j,V),le=r.sub(le,X),X=r.add(E,P);let ne=r.add(C,k);return X=r.mul(X,ne),ne=r.add(j,J),X=r.sub(X,ne),ne=r.add(w,P),F=r.add($,k),ne=r.mul(ne,F),F=r.add(V,J),ne=r.sub(ne,F),L=r.mul(W,X),F=r.mul(H,J),L=r.add(F,L),F=r.sub(V,L),L=r.add(V,L),R=r.mul(F,L),V=r.add(j,j),V=r.add(V,j),J=r.mul(W,J),X=r.mul(H,X),V=r.add(V,J),J=r.sub(j,J),J=r.mul(W,J),X=r.add(X,J),j=r.mul(V,X),R=r.add(R,j),j=r.mul(ne,X),F=r.mul(le,F),F=r.sub(F,j),j=r.mul(le,V),L=r.mul(ne,L),L=r.add(L,j),new I(F,R,L)}subtract(S){return this.add(S.negate())}is0(){return this.equals(I.ZERO)}multiply(S){const{endo:E}=t;if(!o.isValidNot0(S))throw new Error("invalid scalar: out of range");let w,P;const C=$=>_.cached(this,$,k=>Ko(I,k));if(E){const{k1neg:$,k1:k,k2neg:F,k2:R}=T(S),{p:L,f:W}=C(k),{p:H,f:j}=C(R);P=W.add(j),w=O(E.beta,L,H,$,F)}else{const{p:$,f:k}=C(S);w=$,P=k}return Ko(I,[w,P])[0]}multiplyUnsafe(S){const{endo:E}=t,w=this;if(!o.isValid(S))throw new Error("invalid scalar: out of range");if(S===He||w.is0())return I.ZERO;if(S===Ut)return w;if(_.hasCache(this))return this.multiply(S);if(E){const{k1neg:P,k1:C,k2neg:$,k2:k}=T(S),{p1:F,p2:R}=rh(I,w,C,k);return O(E.beta,F,R,P,$)}else return _.unsafe(w,S)}multiplyAndAddUnsafe(S,E,w){const P=this.multiplyUnsafe(E).add(S.multiplyUnsafe(w));return P.is0()?void 0:P}toAffine(S){return M(this,S)}isTorsionFree(){const{isTorsionFree:S}=t;return i===Ut?!0:S?S(I,this):_.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:S}=t;return i===Ut?this:S?S(I,this):this.multiplyUnsafe(i)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}toBytes(S=!0){return fr(S,"isCompressed"),this.assertValidity(),p(I,this,S)}toHex(S=!0){return vt(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(S=!0){return this.toBytes(S)}_setWindowSize(S){this.precompute(S)}static normalizeZ(S){return Ko(I,S)}static msm(S,E){return oh(I,o,S,E)}static fromPrivateKey(S){return I.BASE.multiply(Rt(o,S))}}I.BASE=new I(s.Gx,s.Gy,r.ONE),I.ZERO=new I(r.ZERO,r.ONE,r.ZERO),I.Fp=r,I.Fn=o;const D=o.BITS,_=new nh(I,t.endo?Math.ceil(D/2):D);return I.BASE.precompute(8),I}function Mc(e){return Uint8Array.of(e?2:3)}function zc(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function dh(e,t={}){const{Fn:n}=e,r=t.randomBytes||Ys,o=Object.assign(zc(e.Fp,n),{seed:Bc(n.ORDER)});function s(p){try{return!!Rt(n,p)}catch{return!1}}function i(p,h){const{publicKey:b,publicKeyUncompressed:m}=o;try{const g=p.length;return h===!0&&g!==b||h===!1&&g!==m?!1:!!e.fromBytes(p)}catch{return!1}}function a(p=r(o.seed)){return Q0(dt(p,o.seed,"seed"),n.ORDER)}function c(p,h=!0){return e.BASE.multiply(Rt(n,p)).toBytes(h)}function u(p){const h=a(p);return{secretKey:h,publicKey:c(h)}}function l(p){if(typeof p=="bigint")return!1;if(p instanceof e)return!0;const{secretKey:h,publicKey:b,publicKeyUncompressed:m}=o;if(n.allowedLengths||h===b)return;const g=ue("key",p).length;return g===b||g===m}function f(p,h,b=!0){if(l(p)===!0)throw new Error("first arg must be private key");if(l(h)===!1)throw new Error("second arg must be public key");const m=Rt(n,p);return e.fromHex(h).multiply(m).toBytes(b)}return Object.freeze({getPublicKey:c,getSharedSecret:f,keygen:u,Point:e,utils:{isValidSecretKey:s,isValidPublicKey:i,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:p=>Rt(n,p),precompute(p=8,h=e.BASE){return h.precompute(p,!1)}},lengths:o})}function lh(e,t,n={}){Gs(t),Zo(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||Ys,o=n.hmac||((E,...w)=>cc(t,E,Ve(...w))),{Fp:s,Fn:i}=e,{ORDER:a,BITS:c}=i,{keygen:u,getPublicKey:l,getSharedSecret:f,utils:d,lengths:p}=dh(e,n),h={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},b="compact";function m(E){const w=a>>Ut;return E>w}function g(E,w){if(!i.isValidNot0(w))throw new Error(`invalid signature ${E}: out of range 1..Point.Fn.ORDER`);return w}function y(E,w){es(w);const P=p.signature,C=w==="compact"?P:w==="recovered"?P+1:void 0;return dt(E,C,`${w} signature`)}class x{constructor(w,P,C){this.r=g("r",w),this.s=g("s",P),C!=null&&(this.recovery=C),Object.freeze(this)}static fromBytes(w,P=b){y(w,P);let C;if(P==="der"){const{r:R,s:L}=je.toSig(dt(w));return new x(R,L)}P==="recovered"&&(C=w[0],P="compact",w=w.subarray(1));const $=i.BYTES,k=w.subarray(0,$),F=w.subarray($,$*2);return new x(i.fromBytes(k),i.fromBytes(F),C)}static fromHex(w,P){return this.fromBytes(Mn(w),P)}addRecoveryBit(w){return new x(this.r,this.s,w)}recoverPublicKey(w){const P=s.ORDER,{r:C,s:$,recovery:k}=this;if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");if(a*Fc<P&&k>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=k===2||k===3?C+a:C;if(!s.isValid(R))throw new Error("recovery id 2 or 3 invalid");const L=s.toBytes(R),W=e.fromBytes(Ve(Mc((k&1)===0),L)),H=i.inv(R),j=T(ue("msgHash",w)),V=i.create(-j*H),J=i.create($*H),le=e.BASE.multiplyUnsafe(V).add(W.multiplyUnsafe(J));if(le.is0())throw new Error("point at infinify");return le.assertValidity(),le}hasHighS(){return m(this.s)}toBytes(w=b){if(es(w),w==="der")return Mn(je.hexFromSig(this));const P=i.toBytes(this.r),C=i.toBytes(this.s);if(w==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ve(Uint8Array.of(this.recovery),P,C)}return Ve(P,C)}toHex(w){return vt(this.toBytes(w))}assertValidity(){}static fromCompact(w){return x.fromBytes(ue("sig",w),"compact")}static fromDER(w){return x.fromBytes(ue("sig",w),"der")}normalizeS(){return this.hasHighS()?new x(this.r,i.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return vt(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return vt(this.toBytes("compact"))}}const B=n.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const P=hr(w),C=w.length*8-c;return C>0?P>>BigInt(C):P},T=n.bits2int_modN||function(w){return i.create(B(w))},M=Sn(c);function z(E){return H0("num < 2^"+c,E,He,M),i.toBytes(E)}function O(E,w){return dt(E,void 0,"message"),w?dt(t(E),void 0,"prehashed message"):E}function I(E,w,P){if(["recovered","canonical"].some(V=>V in P))throw new Error("sign() legacy options not supported");const{lowS:C,prehash:$,extraEntropy:k}=ts(P,h);E=O(E,$);const F=T(E),R=Rt(i,w),L=[z(R),z(F)];if(k!=null&&k!==!1){const V=k===!0?r(p.secretKey):k;L.push(ue("extraEntropy",V))}const W=Ve(...L),H=F;function j(V){const J=B(V);if(!i.isValidNot0(J))return;const le=i.inv(J),X=e.BASE.multiply(J).toAffine(),ne=i.create(X.x);if(ne===He)return;const gr=i.create(le*i.create(H+ne*R));if(gr===He)return;let Yc=(X.x===ne?0:2)|Number(X.y&Ut),Jc=gr;return C&&m(gr)&&(Jc=i.neg(gr),Yc^=1),new x(ne,Jc,Yc)}return{seed:W,k2sig:j}}function D(E,w,P={}){E=ue("message",E);const{seed:C,k2sig:$}=I(E,w,P);return q0(t.outputLen,i.BYTES,o)(C,$)}function _(E){let w;const P=typeof E=="string"||Fn(E),C=!P&&E!==null&&typeof E=="object"&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!P&&!C)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(C)w=new x(E.r,E.s);else if(P){try{w=x.fromBytes(ue("sig",E),"der")}catch($){if(!($ instanceof je.Err))throw $}if(!w)try{w=x.fromBytes(ue("sig",E),"compact")}catch{return!1}}return w||!1}function U(E,w,P,C={}){const{lowS:$,prehash:k,format:F}=ts(C,h);if(P=ue("publicKey",P),w=O(ue("message",w),k),"strict"in C)throw new Error("options.strict was renamed to lowS");const R=F===void 0?_(E):x.fromBytes(ue("sig",E),F);if(R===!1)return!1;try{const L=e.fromBytes(P);if($&&R.hasHighS())return!1;const{r:W,s:H}=R,j=T(w),V=i.inv(H),J=i.create(j*V),le=i.create(W*V),X=e.BASE.multiplyUnsafe(J).add(L.multiplyUnsafe(le));return X.is0()?!1:i.create(X.x)===W}catch{return!1}}function S(E,w,P={}){const{prehash:C}=ts(P,h);return w=O(w,C),x.fromBytes(E,"recovered").recoverPublicKey(w).toBytes()}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:f,utils:d,lengths:p,Point:e,sign:D,verify:U,recoverPublicKey:S,Signature:x,hash:t})}function fh(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(i=>Math.ceil(i/2)))):void 0;const o=An(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),s={Fp:n,Fn:o,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:s}}function ph(e){const{CURVE:t,curveOpts:n}=fh(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}function hh(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,Ac(n.Fn.ORDER,n.Fn.BITS))})}function bh(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:o}=ph(e),s=uh(t,n),i=lh(s,r,o);return hh(e,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mh(e,t){const n=r=>bh({...e,hash:r});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ns={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},gh={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Uc=BigInt(2);function yh(e){const t=ns.p,n=BigInt(3),r=BigInt(6),o=BigInt(11),s=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,f=we(l,n,t)*l%t,d=we(f,n,t)*l%t,p=we(d,Uc,t)*u%t,h=we(p,o,t)*p%t,b=we(h,s,t)*h%t,m=we(b,a,t)*b%t,g=we(m,c,t)*m%t,y=we(g,a,t)*b%t,x=we(y,n,t)*l%t,B=we(x,i,t)*h%t,T=we(B,r,t)*u%t,M=we(T,Uc,t);if(!rs.eql(rs.sqr(M),e))throw new Error("Cannot find square root");return M}const rs=An(ns.p,{sqrt:yh}),Rc=mh({...ns,Fp:rs,lowS:!0,endo:gh},Ri),wh=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Rc},Symbol.toStringTag,{value:"Module"}));function xh({r:e,s:t,to:n="hex",v:r,yParity:o}){const s=(()=>{if(o===0||o===1)return o;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new Rc.Signature(Q(e),Q(t)).toCompactHex()}${s===0?"1b":"1c"}`;return n==="hex"?i:Ae(i)}async function os(e,t){const{address:n,factory:r,factoryData:o,hash:s,signature:i,universalSignatureVerifierAddress:a=e.chain?.contracts?.universalSignatureVerifier?.address,...c}=t,u=Ee(i)?i:typeof i=="object"&&"r"in i&&"s"in i?xh(i):K(i),l=await(async()=>!r&&!o||r0(u)?u:o0({address:r,data:o,signature:u}))();try{const f=a?{to:a,data:ge({abi:pa,functionName:"isValidSig",args:[n,s,l]}),...c}:{data:Wn({abi:pa,args:[n,s,l],bytecode:If}),...c},{data:d}=await N(e,wn,"call")(f);return sd(d??"0x0")}catch(f){try{if(yn(ii(n),await Ii({hash:s,signature:i})))return!0}catch{}if(f instanceof Bi)return!1;throw f}}async function vh(e,{address:t,message:n,factory:r,factoryData:o,signature:s,...i}){const a=Wa(n);return os(e,{address:t,factory:r,factoryData:o,hash:a,signature:s,...i})}async function Eh(e,t){const{address:n,factory:r,factoryData:o,signature:s,message:i,primaryType:a,types:c,domain:u,...l}=t,f=Lp({message:i,primaryType:a,types:c,domain:u});return os(e,{address:n,factory:r,factoryData:o,hash:f,signature:s,...l})}function Lc(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:o,poll:s,pollingInterval:i=e.pollingInterval}){const a=typeof s<"u"?s:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const f=te(["watchBlockNumber",e.uid,t,n,i]);return _e(f,{onBlockNumber:r,onError:o},d=>Ct(async()=>{try{const p=await N(e,xn,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let h=c+1n;h<p;h++)d.onBlockNumber(h,c),c=h}(!c||p>c)&&(d.onBlockNumber(p,c),c=p)}catch(p){d.onError?.(p)}},{emitOnBegin:t,interval:i}))})():(()=>{const f=te(["watchBlockNumber",e.uid,t,n]);return _e(f,{onBlockNumber:r,onError:o},d=>{let p=!0,h=()=>p=!1;return(async()=>{try{const b=(()=>{if(e.transport.type==="fallback"){const g=e.transport.transports.find(y=>y.config.type==="webSocket"||y.config.type==="ipc");return g?g.value:e.transport}return e.transport})(),{unsubscribe:m}=await b.subscribe({params:["newHeads"],onData(g){if(!p)return;const y=Q(g.result?.number);d.onBlockNumber(y,c),c=y},onError(g){d.onError?.(g)}});h=m,p||h()}catch(b){o?.(b)}})(),()=>h()})})()}async function Sh(e,t){const{checkReplacement:n=!0,confirmations:r=1,hash:o,onReplaced:s,retryCount:i=6,retryDelay:a=({count:T})=>~~(1<<T)*200,timeout:c=18e4}=t,u=te(["waitForTransactionReceipt",e.uid,o]),l=t.pollingInterval?t.pollingInterval:e.chain?.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval;let f,d,p,h=!1,b,m;const{promise:g,resolve:y,reject:x}=yo(),B=c?setTimeout(()=>{m(),b(),x(new ml({hash:o}))},c):void 0;return b=_e(u,{onReplaced:s,resolve:y,reject:x},async T=>{if(p=await N(e,dr,"getTransactionReceipt")({hash:o}).catch(()=>{}),p&&r<=1){clearTimeout(B),T.resolve(p),b();return}m=N(e,Lc,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:l,async onBlockNumber(M){const z=I=>{clearTimeout(B),m(),I(),b()};let O=M;if(!h)try{if(p){if(r>1&&(!p.blockNumber||O-p.blockNumber+1n<r))return;z(()=>T.resolve(p));return}if(n&&!f&&(h=!0,await nr(async()=>{f=await N(e,Mo,"getTransaction")({hash:o}),f.blockNumber&&(O=f.blockNumber)},{delay:a,retryCount:i}),h=!1),p=await N(e,dr,"getTransactionReceipt")({hash:o}),r>1&&(!p.blockNumber||O-p.blockNumber+1n<r))return;z(()=>T.resolve(p))}catch(I){if(I instanceof Ai||I instanceof $i){if(!f){h=!1;return}try{d=f,h=!0;const D=await nr(()=>N(e,ke,"getBlock")({blockNumber:O,includeTransactions:!0}),{delay:a,retryCount:i,shouldRetry:({error:S})=>S instanceof Mi});h=!1;const _=D.transactions.find(({from:S,nonce:E})=>S===d.from&&E===d.nonce);if(!_||(p=await N(e,dr,"getTransactionReceipt")({hash:_.hash}),r>1&&(!p.blockNumber||O-p.blockNumber+1n<r)))return;let U="replaced";_.to===d.to&&_.value===d.value&&_.input===d.input?U="repriced":_.from===_.to&&_.value===0n&&(U="cancelled"),z(()=>{T.onReplaced?.({reason:U,replacedTransaction:d,transaction:_,transactionReceipt:p}),T.resolve(p)})}catch(D){z(()=>T.reject(D))}}else z(()=>T.reject(I))}}})}),g}function Ah(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:o,onError:s,includeTransactions:i,poll:a,pollingInterval:c=e.pollingInterval}){const u=typeof a<"u"?a:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),l=i??!1;let f;return u?(()=>{const h=te(["watchBlocks",e.uid,t,n,r,l,c]);return _e(h,{onBlock:o,onError:s},b=>Ct(async()=>{try{const m=await N(e,ke,"getBlock")({blockTag:t,includeTransactions:l});if(m.number!==null&&f?.number!=null){if(m.number===f.number)return;if(m.number-f.number>1&&n)for(let g=f?.number+1n;g<m.number;g++){const y=await N(e,ke,"getBlock")({blockNumber:g,includeTransactions:l});b.onBlock(y,f),f=y}}(f?.number==null||t==="pending"&&m?.number==null||m.number!==null&&m.number>f.number)&&(b.onBlock(m,f),f=m)}catch(m){b.onError?.(m)}},{emitOnBegin:r,interval:c}))})():(()=>{let h=!0,b=!0,m=()=>h=!1;return(async()=>{try{r&&N(e,ke,"getBlock")({blockTag:t,includeTransactions:l}).then(x=>{h&&b&&(o(x,void 0),b=!1)}).catch(s);const g=(()=>{if(e.transport.type==="fallback"){const x=e.transport.transports.find(B=>B.config.type==="webSocket"||B.config.type==="ipc");return x?x.value:e.transport}return e.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],async onData(x){if(!h)return;const B=await N(e,ke,"getBlock")({blockNumber:x.result?.number,includeTransactions:l}).catch(()=>{});h&&(o(B,f),b=!1,f=B)},onError(x){s?.(x)}});m=y,h||m()}catch(g){s?.(g)}})(),()=>m()})()}function $h(e,{address:t,args:n,batch:r=!0,event:o,events:s,fromBlock:i,onError:a,onLogs:c,poll:u,pollingInterval:l=e.pollingInterval,strict:f}){const d=typeof u<"u"?u:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),p=f??!1;return d?(()=>{const m=te(["watchEvent",t,n,r,e.uid,o,l,i]);return _e(m,{onLogs:c,onError:a},g=>{let y;i!==void 0&&(y=i-1n);let x,B=!1;const T=Ct(async()=>{if(!B){try{x=await N(e,La,"createEventFilter")({address:t,args:n,event:o,events:s,strict:p,fromBlock:i})}catch{}B=!0;return}try{let M;if(x)M=await N(e,Kn,"getFilterChanges")({filter:x});else{const z=await N(e,xn,"getBlockNumber")({});y&&y!==z?M=await N(e,ao,"getLogs")({address:t,args:n,event:o,events:s,fromBlock:y+1n,toBlock:z}):M=[],y=z}if(M.length===0)return;if(r)g.onLogs(M);else for(const z of M)g.onLogs([z])}catch(M){x&&M instanceof tt&&(B=!1),g.onError?.(M)}},{emitOnBegin:!0,interval:l});return async()=>{x&&await N(e,Yn,"uninstallFilter")({filter:x}),T()}})})():(()=>{let m=!0,g=()=>m=!1;return(async()=>{try{const y=(()=>{if(e.transport.type==="fallback"){const M=e.transport.transports.find(z=>z.config.type==="webSocket"||z.config.type==="ipc");return M?M.value:e.transport}return e.transport})(),x=s??(o?[o]:void 0);let B=[];x&&(B=[x.flatMap(z=>Vt({abi:[z],eventName:z.name,args:n}))],o&&(B=B[0]));const{unsubscribe:T}=await y.subscribe({params:["logs",{address:t,topics:B}],onData(M){if(!m)return;const z=M.result;try{const{eventName:O,args:I}=so({abi:x??[],data:z.data,topics:z.topics,strict:p}),D=Oe(z,{args:I,eventName:O});c([D])}catch(O){let I,D;if(O instanceof _t||O instanceof Cn){if(f)return;I=O.abiItem.name,D=O.abiItem.inputs?.some(U=>!("name"in U&&U.name))}const _=Oe(z,{args:D?[]:{},eventName:I});c([_])}},onError(M){a?.(M)}});g=T,m||g()}catch(y){a?.(y)}})(),()=>g()})()}function Bh(e,{batch:t=!0,onError:n,onTransactions:r,poll:o,pollingInterval:s=e.pollingInterval}){return(typeof o<"u"?o:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{const u=te(["watchPendingTransactions",e.uid,t,s]);return _e(u,{onTransactions:r,onError:n},l=>{let f;const d=Ct(async()=>{try{if(!f)try{f=await N(e,Oa,"createPendingTransactionFilter")({});return}catch(h){throw d(),h}const p=await N(e,Kn,"getFilterChanges")({filter:f});if(p.length===0)return;if(t)l.onTransactions(p);else for(const h of p)l.onTransactions([h])}catch(p){l.onError?.(p)}},{emitOnBegin:!0,interval:s});return async()=>{f&&await N(e,Yn,"uninstallFilter")({filter:f}),d()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:f}=await e.transport.subscribe({params:["newPendingTransactions"],onData(d){if(!u)return;const p=d.result;r([p])},onError(d){n?.(d)}});l=f,u||l()}catch(f){n?.(f)}})(),()=>l()})()}function Ph(e){const{scheme:t,statement:n,...r}=e.match(kh)?.groups??{},{chainId:o,expirationTime:s,issuedAt:i,notBefore:a,requestId:c,...u}=e.match(Ih)?.groups??{},l=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...u,...o?{chainId:Number(o)}:{},...s?{expirationTime:new Date(s)}:{},...i?{issuedAt:new Date(i)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...l?{resources:l}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const kh=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Ih=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Th(e){const{address:t,domain:n,message:r,nonce:o,scheme:s,time:i=new Date}=e;if(n&&r.domain!==n||o&&r.nonce!==o||s&&r.scheme!==s||r.expirationTime&&i>=r.expirationTime||r.notBefore&&i<r.notBefore)return!1;try{if(!r.address||!Y(r.address,{strict:!1})||t&&!yn(r.address,t))return!1}catch{return!1}return!0}async function Ch(e,t){const{address:n,domain:r,message:o,nonce:s,scheme:i,signature:a,time:c=new Date,...u}=t,l=Ph(o);if(!l.address||!Th({address:n,domain:r,message:l,nonce:s,scheme:i,time:c}))return!1;const d=Wa(o);return os(e,{address:l.address,hash:d,signature:a,...u})}function Nh(e){return{call:t=>wn(e,t),createAccessList:t=>Ra(e,t),createBlockFilter:()=>xp(e),createContractEventFilter:t=>zr(e,t),createEventFilter:t=>La(e,t),createPendingTransactionFilter:()=>Oa(e),estimateContractGas:t=>Ki(e,t),estimateGas:t=>oo(e,t),getBalance:t=>Wi(e,t),getBlobBaseFee:()=>vp(e),getBlock:t=>ke(e,t),getBlockNumber:t=>xn(e,t),getBlockTransactionCount:t=>Ep(e,t),getBytecode:t=>Da(e,t),getChainId:()=>It(e),getCode:t=>Da(e,t),getContractEvents:t=>co(e,t),getEip712Domain:t=>Ap(e,t),getEnsAddress:t=>op(e,t),getEnsAvatar:t=>gp(e,t),getEnsName:t=>yp(e,t),getEnsResolver:t=>wp(e,t),getEnsText:t=>Ua(e,t),getFeeHistory:t=>Pp(e,t),estimateFeesPerGas:t=>Dl(e,t),getFilterChanges:t=>Kn(e,t),getFilterLogs:t=>kp(e,t),getGasPrice:()=>Jr(e),getLogs:t=>ao(e,t),getProof:t=>u0(e,t),estimateMaxPriorityFeePerGas:t=>Ol(e,t),getStorageAt:t=>d0(e,t),getTransaction:t=>Mo(e,t),getTransactionConfirmations:t=>l0(e,t),getTransactionCount:t=>eo(e,t),getTransactionReceipt:t=>dr(e,t),multicall:t=>f0(e,t),prepareTransactionRequest:t=>Xn(e,t),readContract:t=>Te(e,t),sendRawTransaction:t=>Eo(e,t),simulate:t=>zo(e,t),simulateBlocks:t=>zo(e,t),simulateCalls:t=>_0(e,t),simulateContract:t=>ga(e,t),verifyMessage:t=>vh(e,t),verifySiweMessage:t=>Ch(e,t),verifyTypedData:t=>Eh(e,t),uninstallFilter:t=>Yn(e,t),waitForTransactionReceipt:t=>Sh(e,t),watchBlocks:t=>Ah(e,t),watchBlockNumber:t=>Lc(e,t),watchContractEvent:t=>wa(e,t),watchEvent:t=>$h(e,t),watchPendingTransactions:t=>Bh(e,t)}}function ss(e){const{key:t="public",name:n="Public Client"}=e;return Ia({...e,key:t,name:n,type:"publicClient"}).extend(Nh)}async function Fh(e,{chain:t}){const{id:n,name:r,nativeCurrency:o,rpcUrls:s,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:A(n),chainName:r,nativeCurrency:o,rpcUrls:s.default.http,blockExplorerUrls:i?Object.values(i).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Mh(e,t){const{abi:n,args:r,bytecode:o,...s}=t,i=Wn({abi:n,args:r,bytecode:o});return Qn(e,{...s,...s.authorizationList?{to:null}:{},data:i})}async function zh(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(n=>qt(n))}async function Uh(e,t={}){const{account:n=e.account,chainId:r}=t,o=n?Z(n):void 0,s=r?[o?.address,[A(r)]]:[o?.address],i=await e.request({method:"wallet_getCapabilities",params:s}),a={};for(const[c,u]of Object.entries(i)){a[Number(c)]={};for(let[l,f]of Object.entries(u))l==="addSubAccount"&&(l="unstable_addSubAccount"),a[Number(c)][l]=f}return typeof r=="number"?a[r]:a}async function Rh(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Oc(e,t){const{account:n=e.account,chainId:r,nonce:o}=t;if(!n)throw new ut({docsPath:"/docs/eip7702/prepareAuthorization"});const s=Z(n),i=(()=>{if(t.executor)return t.executor==="self"?t.executor:Z(t.executor)})(),a={address:t.contractAddress??t.address,chainId:r,nonce:o};return typeof a.chainId>"u"&&(a.chainId=e.chain?.id??await N(e,It,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await N(e,eo,"getTransactionCount")({address:s.address,blockTag:"pending"}),(i==="self"||i?.address&&yn(i.address,s.address))&&(a.nonce+=1)),a}async function Lh(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>ii(n))}async function Oh(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function Dh(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}async function _h(e,t){const{account:n=e.account}=t;if(!n)throw new ut({docsPath:"/docs/eip7702/signAuthorization"});const r=Z(n);if(!r.signAuthorization)throw new Jn({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const o=await Oc(e,t);return r.signAuthorization(o)}async function jh(e,{account:t=e.account,message:n}){if(!t)throw new ut({docsPath:"/docs/actions/wallet/signMessage"});const r=Z(t);if(r.signMessage)return r.signMessage({message:n});const o=typeof n=="string"?mt(n):n.raw instanceof Uint8Array?re(n.raw):n.raw;return e.request({method:"personal_sign",params:[o,r.address]},{retryCount:0})}async function Hh(e,t){const{account:n=e.account,chain:r=e.chain,...o}=t;if(!n)throw new ut({docsPath:"/docs/actions/wallet/signTransaction"});const s=Z(n);st({account:s,...t});const i=await N(e,It,"getChainId")({});r!==null&&xa({currentChainId:i,chain:r});const c=(r?.formatters||e.chain?.formatters)?.transactionRequest?.format||kt;return s.signTransaction?s.signTransaction({...o,chainId:i},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...c(o),chainId:A(i),from:s.address}]},{retryCount:0})}async function qh(e,t){const{account:n=e.account,domain:r,message:o,primaryType:s}=t;if(!n)throw new ut({docsPath:"/docs/actions/wallet/signTypedData"});const i=Z(n),a={EIP712Domain:Za({domain:r}),...t.types};if(Xa({domain:r,message:o,primaryType:s,types:a}),i.signTypedData)return i.signTypedData({domain:r,message:o,primaryType:s,types:a});const c=jp({domain:r,message:o,primaryType:s,types:a});return e.request({method:"eth_signTypedData_v4",params:[i.address,c]},{retryCount:0})}async function Gh(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:A(t)}]},{retryCount:0})}async function Vh(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function Xh(e){return{addChain:t=>Fh(e,t),deployContract:t=>Mh(e,t),getAddresses:()=>zh(e),getCallsStatus:t=>Pa(e,t),getCapabilities:t=>Uh(e,t),getChainId:()=>It(e),getPermissions:()=>Rh(e),prepareAuthorization:t=>Oc(e,t),prepareTransactionRequest:t=>Xn(e,t),requestAddresses:()=>Lh(e),requestPermissions:t=>Oh(e,t),sendCalls:t=>Vf(e,t),sendRawTransaction:t=>Eo(e,t),sendTransaction:t=>Qn(e,t),showCallsStatus:t=>Dh(e,t),signAuthorization:t=>_h(e,t),signMessage:t=>jh(e,t),signTransaction:t=>Hh(e,t),signTypedData:t=>qh(e,t),switchChain:t=>Gh(e,t),waitForCallsStatus:t=>Xf(e,t),watchAsset:t=>Vh(e,t),writeContract:t=>Ea(e,t)}}function is(e){const{key:t="wallet",name:n="Wallet Client",transport:r}=e;return Ia({...e,key:t,name:n,transport:r,type:"walletClient"}).extend(Xh)}In(["function deposit(uint256 assets, address receiver) external returns (uint256)","function asset() external view returns (address)","function totalAssets() external view returns (uint256)","function balanceOf(address) external view returns (uint256)"]),In(["function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)","function balanceOf(address) external view returns (uint256)","function decimals() external view returns (uint8)"]);function Zh(e){const t=e.match(/\/vault\/(0x[a-fA-F0-9]{40})/);return t?t[1]:null}const Wh={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},Kh={block:Ll({format(e){return{transactions:e.transactions?.map(n=>{if(typeof n=="string")return n;const r=Vn(n);return r.typeHex==="0x7e"&&(r.isSystemTx=n.isSystemTx,r.mint=n.mint?Q(n.mint):void 0,r.sourceHash=n.sourceHash,r.type="deposit"),r}),stateRoot:e.stateRoot}}}),transaction:Ul({format(e){const t={};return e.type==="0x7e"&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?Q(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}}),transactionReceipt:Gf({format(e){return{l1GasPrice:e.l1GasPrice?Q(e.l1GasPrice):null,l1GasUsed:e.l1GasUsed?Q(e.l1GasUsed):null,l1Fee:e.l1Fee?Q(e.l1Fee):null,l1FeeScalar:e.l1FeeScalar?Number(e.l1FeeScalar):null}}})};function Yh(e,t){return eb(e)?Qh(e):Zp(e,t)}const Jh={transaction:Yh};function Qh(e){tb(e);const{sourceHash:t,data:n,from:r,gas:o,isSystemTx:s,mint:i,to:a,value:c}=e,u=[t,r,a??"0x",i?re(i):"0x",c?re(c):"0x",o?re(o):"0x",s?"0x1":"0x",n??"0x"];return $e(["0x7e",Xe(u)])}function eb(e){return e.type==="deposit"||typeof e.sourceHash<"u"}function tb(e){const{from:t,to:n}=e;if(t&&!Y(t))throw new oe({address:t});if(n&&!Y(n))throw new oe({address:n})}const Dc={blockTime:2e3,contracts:Wh,formatters:Kh,serializers:Jh},$n=1,Bn=Co({...Dc,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...Dc.contracts,disputeGameFactory:{[$n]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[$n]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[$n]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[$n]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:$n});({...Bn});const _c=Co({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),jc=[{type:"function",name:"submit",inputs:[{name:"_referral",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"payable"},{type:"function",name:"balanceOf",inputs:[{name:"_account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"}],Hc="0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84",qc="0x0000000000000000000000000000000000000000";async function Gc(e){try{if(console.log(` NEXUS: Starting Lido ETH staking for ${e} ETH`),!window.ethereum)throw new Error("No ethereum provider found");const t=ss({chain:_c,transport:Nt(window.ethereum)}),n=is({chain:_c,transport:Nt(window.ethereum)}),[r]=await n.getAddresses();if(!r)throw new Error("No wallet account found");console.log(` NEXUS: Staking ${e} ETH from account ${r}`);const o=i0(e),s=await t.getBalance({address:r});if(console.log(` NEXUS: Current ETH balance: ${Wt(s)} ETH`),s<o)throw new Error(`Insufficient ETH balance. Need ${e} ETH, have ${Wt(s)} ETH`);try{await t.simulateContract({address:Hc,abi:jc,functionName:"submit",args:[qc],value:o,account:r})}catch(c){throw console.error(" NEXUS: Lido staking simulation failed:",c),new Error(`Transaction simulation failed: ${c.message}`)}console.log(" NEXUS: Simulation successful, executing Lido staking...");const i=await n.writeContract({address:Hc,abi:jc,functionName:"submit",args:[qc],value:o,account:r});if(console.log(` NEXUS: Lido staking transaction submitted: ${i}`),(await t.waitForTransactionReceipt({hash:i,timeout:6e4})).status==="success")return console.log(` NEXUS: Lido staking successful! ${e} ETH staked`),{success:!0,txHash:i};throw new Error("Transaction failed")}catch(t){return console.error(" NEXUS: Error staking ETH with Lido:",t),{success:!1,error:t.message||"Unknown error occurred"}}}const as="0xA238Dd80C259a72e81d7e4664a9801593F98d1c5",Vc="0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",nb=[{inputs:[{internalType:"address",name:"asset",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"onBehalfOf",type:"address"},{internalType:"uint16",name:"referralCode",type:"uint16"}],name:"supply",outputs:[],stateMutability:"nonpayable",type:"function"}],rb=[{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];async function ob(e){try{if(console.log(` NEXUS: Starting Aave supply of ${e} USDC`),!window.ethereum)throw new Error("MetaMask not found");const t=await window.ethereum.request({method:"eth_chainId"}),n=parseInt(t,16);if(console.log(` NEXUS: Current chain ID: ${n}`),n!==8453)throw new Error(`Aave supply only supported on Base chain. Current chain: ${n}. Please switch to Base network.`);const r=ss({chain:Bn,transport:Nt(window.ethereum)}),o=is({chain:Bn,transport:Nt(window.ethereum)}),[s]=await o.getAddresses();if(!s)throw new Error("No wallet address found");console.log(` NEXUS: User address: ${s}`);const i=Fo(e,6);console.log(` NEXUS: Amount in wei: ${i}`);const a=er({address:Vc,abi:rb,client:{public:r,wallet:o}}),c=er({address:as,abi:nb,client:{public:r,wallet:o}});console.log(" NEXUS: Checking USDC allowance for Aave Pool...");const u=await a.read.allowance([s,as]);if(console.log(` NEXUS: Current allowance: ${Lr(u,6)} USDC`),u<i){console.log(` NEXUS: Insufficient allowance, approving ${e} USDC for Aave Pool...`);const f=await a.write.approve([as,i],{account:s});console.log(` NEXUS: Approve transaction sent: ${f}`),await r.waitForTransactionReceipt({hash:f}),console.log(" NEXUS: Approve transaction confirmed")}else console.log(" NEXUS: Sufficient allowance already exists");console.log(` NEXUS: Supplying ${e} USDC to Aave...`);const l=await c.write.supply([Vc,i,s,0],{account:s});return console.log(` NEXUS: Supply transaction sent: ${l}`),await r.waitForTransactionReceipt({hash:l}),console.log(` NEXUS: Supply transaction confirmed: ${l}`),{success:!0,txHash:l}}catch(t){return console.error(" NEXUS: Error supplying to Aave:",t),{success:!1,error:t.message||"Unknown error occurred"}}}const Xc="0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",Zc=[{inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Wc=[{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"}],name:"deposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"}];async function sb(e,t){try{if(console.log(` NEXUS: Starting Morpho vault supply for ${e} USDC to vault ${t}`),!window.ethereum)throw new Error("No Ethereum provider found");const n=ss({chain:Bn,transport:Nt(window.ethereum)}),r=is({chain:Bn,transport:Nt(window.ethereum)}),[o]=await r.getAddresses();if(!o)throw new Error("No account connected");console.log(` NEXUS: Using account ${o} for Morpho vault supply`);const s=Fo(e,6);console.log(` NEXUS: Amount in wei: ${s}`);const i=er({address:Xc,abi:Zc,client:n}),a=er({address:t,abi:Wc,client:n});console.log(` NEXUS: Checking allowance for vault ${t}`);const c=await i.read.allowance([o,t]);if(console.log(` NEXUS: Current allowance: ${c}`),c<s){console.log(` NEXUS: Insufficient allowance, approving ${s} USDC`);const f=await r.writeContract({address:Xc,abi:Zc,functionName:"approve",args:[t,s],account:o});console.log(` NEXUS: Approve transaction sent: ${f}`);const d=await n.waitForTransactionReceipt({hash:f,timeout:6e4});if(d.status!=="success")throw new Error("Approval transaction failed");console.log(` NEXUS: Approval confirmed in block ${d.blockNumber}`)}else console.log(" NEXUS: Sufficient allowance already exists");console.log(` NEXUS: Depositing ${s} USDC to Morpho vault`);const u=await r.writeContract({address:t,abi:Wc,functionName:"deposit",args:[s,o],account:o});console.log(` NEXUS: Deposit transaction sent: ${u}`);const l=await n.waitForTransactionReceipt({hash:u,timeout:6e4});if(l.status!=="success")throw new Error("Deposit transaction failed");return console.log(` NEXUS: Deposit confirmed in block ${l.blockNumber}`),console.log(` NEXUS: Successfully supplied ${e} USDC to Morpho vault!`),{success:!0,txHash:u}}catch(n){return console.error(" NEXUS: Error supplying to Morpho vault:",n),{success:!1,error:n.message||"Unknown error occurred"}}}function cs(e){e.setAttribute("style","display: none;")}function Kc(e){console.log(" NEXUS: Opening Lido unified ETH modal");const t=parseFloat(e.balance||"0"),n=e.breakdown?.filter(u=>Number(u.balance)>0)||[];let r=0;n.forEach(u=>{(u.chain.name==="Ethereum"||u.chain.name==="Mainnet")&&(r=parseFloat(u.balance||"0"))});const o=document.createElement("div");o.className="nexus-lido-modal-overlay",o.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 999999;
    backdrop-filter: blur(5px);
  `;const s=document.createElement("div");s.style.cssText=`
    background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
    border-radius: 16px;
    padding: 24px;
    width: 450px;
    max-width: 90vw;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(79, 70, 229, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  `,s.innerHTML=`
    <div style="margin-bottom: 24px;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
        <h2 style="margin: 0; color: #fff; font-size: 24px; font-weight: 600;"> Unified ETH Staking</h2>
        <button id="close-modal" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer; padding: 0; line-height: 1;"></button>
      </div>
      <p style="margin: 0; color: rgba(255,255,255,0.8); font-size: 14px;">Bridge ETH to Ethereum mainnet and stake with Lido automatically</p>
    </div>

    <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
      <div style="font-size: 16px; font-weight: 600; margin-bottom: 12px;"> Your ETH Balance</div>
      <div style="font-size: 20px; font-weight: bold; color: #A5B4FC; margin-bottom: 8px;">${t.toFixed(4)} ETH Total</div>
      <div style="font-size: 14px; color: rgba(255,255,255,0.7);">
        ${n.map(u=>`${wr(u.chain.name)}: ${parseFloat(u.balance).toFixed(4)} ETH`).join("  ")}
      </div>
    </div>

    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 600;">ETH Amount to Stake</label>
      <input 
        type="number" 
        id="eth-amount-input" 
        placeholder="0.1"
        step="0.0001"
        max="${t}"
        style="
          width: 100%;
          padding: 14px;
          border: 1px solid rgba(255,255,255,0.3);
          border-radius: 8px;
          background: rgba(255,255,255,0.1);
          color: white;
          font-size: 16px;
          font-family: inherit;
          box-sizing: border-box;
        "
      />
      <div style="font-size: 12px; color: rgba(255,255,255,0.6); margin-top: 4px;">
        Min: 0.0001 ETH  Max: ${t.toFixed(4)} ETH
      </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
      <button id="quick-stake-btn" style="
        padding: 14px;
        background: rgba(255,255,255,0.1);
        border: 1px solid rgba(255,255,255,0.3);
        border-radius: 10px;
        color: white;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      ">
         Quick Stake<br>
        <span style="font-size: 11px; opacity: 0.8;">Use mainnet ETH</span>
      </button>
      
      <button id="bridge-stake-btn" style="
        padding: 14px;
        background: linear-gradient(45deg, #10B981, #059669);
        border: none;
        border-radius: 10px;
        color: white;
        font-size: 14px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
      ">
         Bridge + Stake<br>
        <span style="font-size: 11px; opacity: 0.9;">Bridge then auto-stake</span>
      </button>
    </div>
  `,o.appendChild(s),document.body.appendChild(o);const i=s.querySelector("#eth-amount-input"),a=s.querySelector("#quick-stake-btn"),c=s.querySelector("#bridge-stake-btn");s.querySelector("#close-modal")?.addEventListener("click",()=>{o.remove()}),o.addEventListener("click",u=>{u.target===o&&o.remove()}),c.addEventListener("click",async()=>{const u=parseFloat(i.value||"0");if(!u||u<=0){alert("Please enter a valid ETH amount");return}if(u>t){alert(`Amount exceeds your total ETH balance of ${t.toFixed(4)} ETH`);return}const l=Math.max(0,u-r);c.disabled=!0,c.innerHTML=" Bridging...",c.style.opacity="0.7";try{console.log(` NEXUS: Need to stake ${u} ETH`),console.log(` NEXUS: Current mainnet ETH: ${r.toFixed(4)} ETH`),console.log(` NEXUS: Need to bridge: ${l.toFixed(4)} ETH`),window.nexus?.setDestinationChainId&&(window.nexus.setDestinationChainId(1),console.log(" NEXUS: Set destination chainId to 1 (Ethereum mainnet)"));let f={success:!0};if(l>1e-4&&(f=await window.nexus.bridge({amount:l.toString(),token:"eth",chainId:1})),console.log(" NEXUS: Bridge result:",f),f.success){o.remove(),console.log(` NEXUS: Auto-staking ${u} ETH with Lido after successful bridge`);const d=document.createElement("div");d.className="nexus-lido-loading-modal",d.style.cssText=`
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 999999;
          backdrop-filter: blur(5px);
        `;const p=document.createElement("div");p.style.cssText=`
          background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
          border-radius: 16px;
          padding: 32px;
          width: 400px;
          max-width: 90vw;
          box-shadow: 0 20px 60px rgba(79, 70, 229, 0.3);
          border: 1px solid rgba(255, 255, 255, 0.3);
          color: white;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          text-align: center;
        `,p.innerHTML=`
          <div style="margin-bottom: 24px;">
            <div style="font-size: 48px; margin-bottom: 16px;"></div>
            <h2 style="margin: 0 0 8px 0; color: #fff; font-size: 24px; font-weight: 600;">Auto Staking...</h2>
            <p style="margin: 0; color: rgba(255,255,255,0.8); font-size: 14px;">Bridged ${l.toFixed(4)} ETH  Now staking with Lido</p>
          </div>
          
          <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 16px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.2);">
            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;"> Staking Amount</div>
            <div style="font-size: 20px; font-weight: bold; color: #A5B4FC;">${u.toFixed(4)} ETH</div>
          </div>
          
          <div style="display: flex; align-items: center; justify-content: center; gap: 12px; color: rgba(255,255,255,0.8);">
            <div style="width: 20px; height: 20px; border: 2px solid #A5B4FC; border-top: 2px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
            <span>Staking ETH with Lido...</span>
          </div>
          
          <style>
            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          </style>
        `,d.appendChild(p),document.body.appendChild(d),setTimeout(async()=>{try{const h=await Gc(u.toString());if(d.remove(),h.success){const b=document.createElement("div");b.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 999999;
                backdrop-filter: blur(5px);
              `;const m=document.createElement("div");m.style.cssText=`
                background: linear-gradient(135deg, #059669 0%, #10B981 100%);
                border-radius: 16px;
                padding: 32px;
                width: 400px;
                max-width: 90vw;
                box-shadow: 0 20px 60px rgba(16, 185, 129, 0.3);
                border: 1px solid rgba(16, 185, 129, 0.3);
                color: white;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                text-align: center;
              `,m.innerHTML=`
                <div style="margin-bottom: 24px;">
                  <div style="font-size: 64px; margin-bottom: 16px;"></div>
                  <h2 style="margin: 0 0 8px 0; color: #fff; font-size: 28px; font-weight: 600;">Staking Complete!</h2>
                  <p style="margin: 0; color: rgba(255,255,255,0.9); font-size: 16px;">Fully automated bridge + Lido staking completed</p>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 20px; margin-bottom: 24px;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span> Bridged to Mainnet:</span>
                    <span style="font-weight: bold;">${l.toFixed(4)} ETH</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span> Staked with Lido:</span>
                    <span style="font-weight: bold;">${u.toFixed(4)} ETH</span>
                  </div>
                  <div style="display: flex; justify-content: space-between;">
                    <span> Received stETH:</span>
                    <span style="font-weight: bold;">~${u.toFixed(4)} stETH</span>
                  </div>
                </div>
                
                <div style="margin-bottom: 24px; padding: 12px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                  <div style="font-size: 12px; opacity: 0.8; margin-bottom: 4px;">Transaction Hash:</div>
                  <div style="font-size: 10px; font-family: monospace; word-break: break-all;">${h.txHash}</div>
                </div>
                
                <button onclick="this.parentElement.parentElement.remove()" style="
                  width: 100%;
                  padding: 16px;
                  background: rgba(255,255,255,0.2);
                  border: 1px solid rgba(255,255,255,0.3);
                  border-radius: 12px;
                  color: white;
                  font-size: 16px;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s ease;
                ">
                     Close
                </button>
              `,b.appendChild(m),document.body.appendChild(b)}else alert(` Bridge succeeded but auto-staking failed:

${h.error}

You can manually stake your ETH on Lido.`)}catch(h){d.remove(),console.error(" NEXUS: Error during auto-staking:",h),alert(` Bridge succeeded but auto-staking failed:

${h.message||h}

You can manually stake your ETH on Lido.`)}},2e3)}else console.log(" NEXUS: Bridging was rejected or failed"),alert("Bridging was cancelled or failed. Please try again."),c.disabled=!1,c.innerHTML=' Bridge + Stake<br><span style="font-size: 11px; opacity: 0.9;">Bridge then auto-stake</span>',c.style.opacity="1"}catch(f){console.error(" NEXUS: Error during unified ETH staking:",f),alert(`Failed to initiate bridging: ${f?.message||f}`),c.disabled=!1,c.innerHTML=' Bridge + Stake<br><span style="font-size: 11px; opacity: 0.9;">Bridge then auto-stake</span>',c.style.opacity="1"}}),a.addEventListener("click",async()=>{const u=parseFloat(i.value||"0");if(!u||u<=0){alert("Please enter a valid ETH amount");return}if(u>r){alert(`Amount exceeds your mainnet balance of ${r.toFixed(4)} ETH`);return}console.log(` NEXUS: Quick stake ${u} ETH with Lido`),a.disabled=!0,a.innerHTML=" Staking...",a.style.opacity="0.7";try{const l=await Gc(u.toString());l.success?(o.remove(),alert(` Staking Successful!

 Staked ${u.toFixed(4)} ETH with Lido
 Received ~${u.toFixed(4)} stETH

Transaction: ${l.txHash}

Your ETH is now earning staking rewards!`)):(a.disabled=!1,a.innerHTML=' Quick Stake<br><span style="font-size: 11px; opacity: 0.8;">Use mainnet ETH</span>',a.style.opacity="1",alert(` Staking failed:

${l.error}

Please try again.`))}catch(l){a.disabled=!1,a.innerHTML=' Quick Stake<br><span style="font-size: 11px; opacity: 0.8;">Use mainnet ETH</span>',a.style.opacity="1",alert(` Staking failed:

${l.message||l}

Please try again.`)}}),setTimeout(()=>{i.focus()},100)}async function ib(e,t){console.log(" NEXUS: Opening unified USDC supply modal for Aave");const n=document.querySelector(".nexus-aave-modal");n&&n.remove();let r=137,o="Polygon";try{const b=await window.ethereum?.request({method:"eth_chainId"});b&&(r=parseInt(b,16),o={1:"Ethereum",10:"Optimism",56:"BSC",137:"Polygon",8453:"Base",42161:"Arbitrum",43114:"Avalanche"}[r]||`Chain ${r}`,console.log(` NEXUS: Detected current chain: ${o} (${r})`))}catch{console.log(" NEXUS: Failed to detect chain, using Polygon as fallback")}const s=document.createElement("div");s.className="nexus-aave-modal",s.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 999999;
    backdrop-filter: blur(5px);
  `;const i=document.createElement("div");i.style.cssText=`
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    border-radius: 16px;
    padding: 24px;
    width: 400px;
    max-width: 90vw;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  `,i.innerHTML=`
    <div style="text-align: center; margin-bottom: 24px;">
      <h2 style="margin: 0 0 8px 0; color: #fff; font-size: 24px; font-weight: 600;"> Supply with Unified USDC</h2>
      <p style="margin: 0; color: rgba(255,255,255,0.7); font-size: 14px;">Supply USDC to Aave from all your chains</p>
    </div>
    
    <div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
        <span style="font-weight: 600; color: #fff;">Available Balance</span>
        <span style="font-weight: bold; color: #00ff88; font-size: 18px;">$${e.toFixed(2)} USDC</span>
      </div>
      <div style="font-size: 12px; color: rgba(255,255,255,0.8);">
        ${t.map(b=>`
          <div style="display: flex; justify-content: space-between; margin: 4px 0;">
            <span>${wr(b.chain.name)}</span>
            <span style="color: #ffeb3b; font-weight: 600;">$${parseFloat(b.balance).toFixed(2)} USDC</span>
          </div>
        `).join("")}
      </div>
    </div>
    
    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 600;">USDC Amount to Supply</label>
      <div style="position: relative;">
        <input 
          type="number" 
          id="usdc-amount-input" 
          placeholder="100.00"
          step="0.01"
          min="0.01"
          max="${e}"
          inputmode="decimal"
          style="
            width: 100%;
            padding: 14px 60px 14px 14px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 16px;
            font-family: inherit;
            box-sizing: border-box;
            -webkit-appearance: none;
            -moz-appearance: textfield;
          "
        />
        <div style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 2px;">
          <button id="increment-btn" style="
            width: 24px;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 4px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
          "></button>
          <button id="decrement-btn" style="
            width: 24px;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 4px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
          "></button>
        </div>
      </div>
      <div style="display: flex; gap: 8px; margin-top: 8px;">
        <button id="quick-25" style="
          flex: 1;
          padding: 8px;
          background: rgba(255,255,255,0.1);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 6px;
          color: white;
          font-size: 12px;
          cursor: pointer;
        ">25%</button>
        <button id="quick-50" style="
          flex: 1;
          padding: 8px;
          background: rgba(255,255,255,0.1);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 6px;
          color: white;
          font-size: 12px;
          cursor: pointer;
        ">50%</button>
        <button id="quick-75" style="
          flex: 1;
          padding: 8px;
          background: rgba(255,255,255,0.1);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 6px;
          color: white;
          font-size: 12px;
          cursor: pointer;
        ">75%</button>
        <button id="quick-max" style="
          flex: 1;
          padding: 8px;
          background: rgba(255,255,255,0.1);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 6px;
          color: white;
          font-size: 12px;
          cursor: pointer;
        ">MAX</button>
      </div>
      <div style="font-size: 12px; color: rgba(255,255,255,0.6); margin-top: 4px;">
        Min: $0.01 USDC  Max: $${e.toFixed(2)} USDC
      </div>
    </div>

    <button id="bridge-supply-btn" style="
      width: 100%;
      padding: 16px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    ">
       Bridge + Supply to Aave
      <div style="font-size: 12px; opacity: 0.9; margin-top: 4px;">Bridge USDC to ${o} then supply automatically</div>
    </button>
  `,s.appendChild(i),document.body.appendChild(s);const a=i.querySelector("#usdc-amount-input"),c=i.querySelector("#bridge-supply-btn"),u=i.querySelector("#increment-btn"),l=i.querySelector("#decrement-btn"),f=i.querySelector("#quick-25"),d=i.querySelector("#quick-50"),p=i.querySelector("#quick-75"),h=i.querySelector("#quick-max");a&&(a.disabled=!1,a.readOnly=!1,a.style.pointerEvents="auto",console.log(" NEXUS: Enhanced input controls ready")),u?.addEventListener("click",()=>{const b=parseFloat(a.value||"0"),m=Math.min(b+.1,e);a.value=m.toFixed(2)}),l?.addEventListener("click",()=>{const b=parseFloat(a.value||"0"),m=Math.max(b-.1,.01);a.value=m.toFixed(2)}),f?.addEventListener("click",()=>{a.value=(e*.25).toFixed(2)}),d?.addEventListener("click",()=>{a.value=(e*.5).toFixed(2)}),p?.addEventListener("click",()=>{a.value=(e*.75).toFixed(2)}),h?.addEventListener("click",()=>{a.value=e.toFixed(2)}),s.addEventListener("click",b=>{b.target===s&&s.remove()}),c.addEventListener("click",async()=>{const b=parseFloat(a.value||"0");if(!b||b<=0){alert("Please enter a valid USDC amount");return}if(b<.01){alert("Minimum amount is $0.01 USDC");return}if(b>e){alert(`Amount exceeds your total USDC balance of $${e.toFixed(2)}`);return}c.disabled=!0,c.innerHTML=" Bridging...";try{if(console.log(` NEXUS: Bridging $${b} USDC to ${o} (${r}) for Aave supply`),window.nexus?.setDestinationChainId&&(window.nexus.setDestinationChainId(r),console.log(` NEXUS: Set destination chainId to ${r} (${o})`)),(await window.nexus.bridge({amount:b.toString(),token:"usdc",chainId:r})).success){s.remove();const g=document.createElement("div");g.className="nexus-aave-loading-modal",g.style.cssText=`
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 999999;
          backdrop-filter: blur(5px);
        `;const y=document.createElement("div");y.style.cssText=`
          background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
          border-radius: 16px;
          padding: 32px;
          width: 400px;
          max-width: 90vw;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
          border: 1px solid rgba(255, 255, 255, 0.1);
          color: white;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          text-align: center;
        `,y.innerHTML=`
          <div style="margin-bottom: 24px;">
            <div style="font-size: 48px; margin-bottom: 16px;"></div>
            <h2 style="margin: 0 0 8px 0; color: #fff; font-size: 24px; font-weight: 600;">Auto Supplying...</h2>
            <p style="margin: 0; color: rgba(255,255,255,0.8); font-size: 14px;">Bridged $${b} USDC  Now supplying to Aave</p>
          </div>
          
          <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 16px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.2);">
            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;"> Supply Amount</div>
            <div style="font-size: 20px; font-weight: bold; color: #00ff88;">$${b.toFixed(2)} USDC</div>
          </div>
          
          <div style="display: flex; align-items: center; justify-content: center; gap: 12px; color: rgba(255,255,255,0.8);">
            <div style="width: 20px; height: 20px; border: 2px solid #00ff88; border-top: 2px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
            <span>Supplying USDC to Aave...</span>
          </div>
          
          <style>
            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          </style>
        `,g.appendChild(y),document.body.appendChild(g),setTimeout(async()=>{try{console.log(` NEXUS: Auto-supplying $${b} USDC to Aave after successful bridge`);const x=await ob(b.toString());if(g.remove(),x.success){const B=document.createElement("div");B.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 999999;
                backdrop-filter: blur(5px);
              `;const T=document.createElement("div");T.style.cssText=`
                background: linear-gradient(135deg, #059669 0%, #10B981 100%);
                border-radius: 16px;
                padding: 32px;
                width: 400px;
                max-width: 90vw;
                box-shadow: 0 20px 60px rgba(16, 185, 129, 0.3);
                border: 1px solid rgba(16, 185, 129, 0.3);
                color: white;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                text-align: center;
              `,T.innerHTML=`
                <div style="margin-bottom: 24px;">
                  <div style="font-size: 64px; margin-bottom: 16px;"></div>
                  <h2 style="margin: 0 0 8px 0; color: #fff; font-size: 28px; font-weight: 600;">Supply Complete!</h2>
                  <p style="margin: 0; color: rgba(255,255,255,0.9); font-size: 16px;">Fully automated bridge + Aave supply completed</p>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 20px; margin-bottom: 24px;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span> Bridged to ${o}:</span>
                    <span style="font-weight: bold;">$${b.toFixed(2)} USDC</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span> Supplied to Aave:</span>
                    <span style="font-weight: bold;">$${b.toFixed(2)} USDC</span>
                  </div>
                  <div style="display: flex; justify-content: space-between;">
                    <span> Received aUSDC:</span>
                    <span style="font-weight: bold;">~$${b.toFixed(2)} aUSDC</span>
                  </div>
                </div>
                
                <div style="margin-bottom: 24px; padding: 12px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                  <div style="font-size: 12px; opacity: 0.8; margin-bottom: 4px;">Transaction Hash:</div>
                  <div style="font-size: 10px; font-family: monospace; word-break: break-all;">${x.txHash}</div>
                </div>
                
                <button onclick="this.parentElement.parentElement.remove()" style="
                  width: 100%;
                  padding: 16px;
                  background: rgba(255,255,255,0.2);
                  border: 1px solid rgba(255,255,255,0.3);
                  border-radius: 12px;
                  color: white;
                  font-size: 16px;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s ease;
                ">
                     Close
                </button>
              `,B.appendChild(T),document.body.appendChild(B)}else alert(` Bridge succeeded but auto-supply failed:

${x.error}

You can manually supply your USDC to Aave on ${o}.`)}catch(x){g.remove(),console.error(" NEXUS: Error during auto-supply:",x),alert(` Bridge succeeded but auto-supply failed:

${x.message||x}

You can manually supply your USDC to Aave on ${o}.`)}},3e3)}else c.disabled=!1,c.innerHTML=` Bridge + Supply to Aave<div style="font-size: 12px; opacity: 0.9; margin-top: 4px;">Bridge USDC to ${o} then supply automatically</div>`,alert("Bridging was cancelled or failed. Please try again.")}catch(m){console.error(" NEXUS: Error during unified USDC bridging:",m),c.disabled=!1,c.innerHTML=` Bridge + Supply to Aave<div style="font-size: 12px; opacity: 0.9; margin-top: 4px;">Bridge USDC to ${o} then supply automatically</div>`,alert(`Failed to initiate bridging: ${m?.message||m}`)}}),setTimeout(()=>{a&&(a.focus(),a.click(),console.log(" NEXUS: Enhanced input focused and ready for typing"))},200)}async function us(e,t){console.log(" NEXUS: Opening unified USDC supply modal for Morpho");const n=document.querySelector(".nexus-morpho-modal");n&&n.remove();const r=Zh(window.location.href);if(!r){alert(" Unable to detect Morpho vault address from this page. Please make sure you're on a specific vault page.");return}console.log(` NEXUS: Detected Morpho vault address: ${r}`);const o=document.createElement("div");o.className="nexus-morpho-modal",o.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 999999;
    backdrop-filter: blur(5px);
  `;const s=document.createElement("div");s.style.cssText=`
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 16px;
    padding: 24px;
    width: 400px;
    max-width: 90vw;
    box-shadow: 0 20px 60px rgba(102, 126, 234, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  `,s.innerHTML=`
    <div style="text-align: center; margin-bottom: 24px;">
      <h2 style="margin: 0 0 8px 0; color: #fff; font-size: 24px; font-weight: 600;"> Supply with Unified USDC</h2>
      <p style="margin: 0; color: rgba(255,255,255,0.8); font-size: 14px;">Supply USDC to Morpho vault from all your chains</p>
    </div>
    
    <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
        <span style="font-weight: 600; color: #fff;">Available Balance</span>
        <span style="font-weight: bold; color: #A5B4FC; font-size: 18px;">$${e.toFixed(2)} USDC</span>
      </div>
      <div style="font-size: 12px; color: rgba(255,255,255,0.8);">
        ${t.map(h=>`
          <div style="display: flex; justify-content: space-between; margin: 4px 0;">
            <span>${wr(h.chain.name)}</span>
            <span style="color: #A5B4FC; font-weight: 600;">$${parseFloat(h.balance).toFixed(2)} USDC</span>
          </div>
        `).join("")}
      </div>
    </div>
    
    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 600;">USDC Amount to Supply</label>
      <div style="position: relative;">
        <input 
          type="number" 
          id="morpho-usdc-amount-input" 
          placeholder="100.00"
          step="0.01"
          min="0.01"
          max="${e}"
          inputmode="decimal"
          style="
            width: 100%;
            padding: 14px 60px 14px 14px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 16px;
            font-family: inherit;
            box-sizing: border-box;
            -webkit-appearance: none;
            -moz-appearance: textfield;
          "
        />
        <div style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 2px;">
          <button id="morpho-increment-btn" style="
            width: 24px;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 4px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
          "></button>
          <button id="morpho-decrement-btn" style="
            width: 24px;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 4px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
          "></button>
        </div>
      </div>
      <div style="display: flex; gap: 8px; margin-top: 8px;">
        <button id="morpho-quick-25" style="
          flex: 1;
          padding: 8px;
          background: rgba(255,255,255,0.1);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 6px;
          color: white;
          font-size: 12px;
          cursor: pointer;
        ">25%</button>
        <button id="morpho-quick-50" style="
          flex: 1;
          padding: 8px;
          background: rgba(255,255,255,0.1);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 6px;
          color: white;
          font-size: 12px;
          cursor: pointer;
        ">50%</button>
        <button id="morpho-quick-75" style="
          flex: 1;
          padding: 8px;
          background: rgba(255,255,255,0.1);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 6px;
          color: white;
          font-size: 12px;
          cursor: pointer;
        ">75%</button>
        <button id="morpho-quick-max" style="
          flex: 1;
          padding: 8px;
          background: rgba(255,255,255,0.1);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 6px;
          color: white;
          font-size: 12px;
          cursor: pointer;
        ">MAX</button>
      </div>
      <div style="font-size: 12px; color: rgba(255,255,255,0.6); margin-top: 4px;">
        Min: $0.01 USDC  Max: $${e.toFixed(2)} USDC
      </div>
    </div>

    <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 12px; margin-bottom: 20px;">
      <div style="font-size: 12px; color: rgba(255,255,255,0.8); margin-bottom: 4px;">Target Vault:</div>
      <div style="font-size: 10px; font-family: monospace; word-break: break-all; color: #A5B4FC;">${r}</div>
    </div>

    <button id="morpho-bridge-supply-btn" style="
      width: 100%;
      padding: 16px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    ">
       Bridge + Supply to Morpho
      <div style="font-size: 12px; opacity: 0.9; margin-top: 4px;">Bridge USDC to Base then supply automatically</div>
    </button>
  `,o.appendChild(s),document.body.appendChild(o);const i=s.querySelector("#morpho-usdc-amount-input"),a=s.querySelector("#morpho-bridge-supply-btn"),c=s.querySelector("#morpho-increment-btn"),u=s.querySelector("#morpho-decrement-btn"),l=s.querySelector("#morpho-quick-25"),f=s.querySelector("#morpho-quick-50"),d=s.querySelector("#morpho-quick-75"),p=s.querySelector("#morpho-quick-max");i&&(i.disabled=!1,i.readOnly=!1,i.style.pointerEvents="auto",console.log(" NEXUS: Morpho input controls ready")),c?.addEventListener("click",()=>{const h=parseFloat(i.value||"0"),b=Math.min(h+.1,e);i.value=b.toFixed(2)}),u?.addEventListener("click",()=>{const h=parseFloat(i.value||"0"),b=Math.max(h-.1,.01);i.value=b.toFixed(2)}),l?.addEventListener("click",()=>{i.value=(e*.25).toFixed(2)}),f?.addEventListener("click",()=>{i.value=(e*.5).toFixed(2)}),d?.addEventListener("click",()=>{i.value=(e*.75).toFixed(2)}),p?.addEventListener("click",()=>{i.value=e.toFixed(2)}),o.addEventListener("click",h=>{h.target===o&&o.remove()}),a.addEventListener("click",async()=>{const h=parseFloat(i.value||"0");if(!h||h<=0){alert("Please enter a valid USDC amount");return}if(h<.01){alert("Minimum amount is $0.01 USDC");return}if(h>e){alert(`Amount exceeds your total USDC balance of $${e.toFixed(2)}`);return}a.disabled=!0,a.innerHTML=" Bridging...";try{if(console.log(` NEXUS: Bridging $${h} USDC to Base for Morpho supply`),window.nexus?.setDestinationChainId&&(window.nexus.setDestinationChainId(8453),console.log(" NEXUS: Set destination chainId to 8453 (Base)")),(await window.nexus.bridge({amount:h.toString(),token:"usdc",chainId:8453})).success){o.remove();const m=document.createElement("div");m.className="nexus-morpho-loading-modal",m.style.cssText=`
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 999999;
          backdrop-filter: blur(5px);
        `;const g=document.createElement("div");g.style.cssText=`
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          border-radius: 16px;
          padding: 32px;
          width: 400px;
          max-width: 90vw;
          box-shadow: 0 20px 60px rgba(102, 126, 234, 0.3);
          border: 1px solid rgba(255, 255, 255, 0.2);
          color: white;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          text-align: center;
        `,g.innerHTML=`
          <div style="margin-bottom: 24px;">
            <div style="font-size: 48px; margin-bottom: 16px;"></div>
            <h2 style="margin: 0 0 8px 0; color: #fff; font-size: 24px; font-weight: 600;">Auto Supplying...</h2>
            <p style="margin: 0; color: rgba(255,255,255,0.8); font-size: 14px;">Bridged $${h} USDC  Now supplying to Morpho</p>
          </div>
          
          <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 16px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.2);">
            <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;"> Supply Amount</div>
            <div style="font-size: 20px; font-weight: bold; color: #A5B4FC;">$${h.toFixed(2)} USDC</div>
          </div>
          
          <div style="display: flex; align-items: center; justify-content: center; gap: 12px; color: rgba(255,255,255,0.8);">
            <div style="width: 20px; height: 20px; border: 2px solid #A5B4FC; border-top: 2px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
            <span>Supplying USDC to Morpho vault...</span>
          </div>
          
          <style>
            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          </style>
        `,m.appendChild(g),document.body.appendChild(m),setTimeout(async()=>{try{console.log(` NEXUS: Auto-supplying $${h} USDC to Morpho vault after successful bridge`);const y=await sb(h.toString(),r);if(m.remove(),y.success){const x=document.createElement("div");x.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 999999;
                backdrop-filter: blur(5px);
              `;const B=document.createElement("div");B.style.cssText=`
                background: linear-gradient(135deg, #059669 0%, #10B981 100%);
                border-radius: 16px;
                padding: 32px;
                width: 400px;
                max-width: 90vw;
                box-shadow: 0 20px 60px rgba(16, 185, 129, 0.3);
                border: 1px solid rgba(16, 185, 129, 0.3);
                color: white;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                text-align: center;
              `,B.innerHTML=`
                <div style="margin-bottom: 24px;">
                  <div style="font-size: 64px; margin-bottom: 16px;"></div>
                  <h2 style="margin: 0 0 8px 0; color: #fff; font-size: 28px; font-weight: 600;">Supply Complete!</h2>
                  <p style="margin: 0; color: rgba(255,255,255,0.9); font-size: 16px;">Fully automated bridge + Morpho supply completed</p>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 20px; margin-bottom: 24px;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span> Bridged to Base:</span>
                    <span style="font-weight: bold;">$${h.toFixed(2)} USDC</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span> Supplied to Morpho:</span>
                    <span style="font-weight: bold;">$${h.toFixed(2)} USDC</span>
                  </div>
                  <div style="display: flex; justify-content: space-between;">
                    <span> Received Vault Shares:</span>
                    <span style="font-weight: bold;">~$${h.toFixed(2)} shares</span>
                  </div>
                </div>
                
                <div style="margin-bottom: 24px; padding: 12px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                  <div style="font-size: 12px; opacity: 0.8; margin-bottom: 4px;">Transaction Hash:</div>
                  <div style="font-size: 10px; font-family: monospace; word-break: break-all;">${y.txHash}</div>
                </div>
                
                <button onclick="this.parentElement.parentElement.remove()" style="
                  width: 100%;
                  padding: 16px;
                  background: rgba(255,255,255,0.2);
                  border: 1px solid rgba(255,255,255,0.3);
                  border-radius: 12px;
                  color: white;
                  font-size: 16px;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s ease;
                ">
                     Close
                </button>
              `,x.appendChild(B),document.body.appendChild(x)}else alert(` Bridge succeeded but auto-supply failed:

${y.error}

You can manually supply your USDC to the Morpho vault.`)}catch(y){m.remove(),console.error(" NEXUS: Error during auto-supply:",y),alert(` Bridge succeeded but auto-supply failed:

${y.message||y}

You can manually supply your USDC to the Morpho vault.`)}},3e3)}else a.disabled=!1,a.innerHTML=' Bridge + Supply to Morpho<div style="font-size: 12px; opacity: 0.9; margin-top: 4px;">Bridge USDC to Base then supply automatically</div>',alert("Bridging was cancelled or failed. Please try again.")}catch(b){console.error(" NEXUS: Error during unified USDC bridging:",b),a.disabled=!1,a.innerHTML=' Bridge + Supply to Morpho<div style="font-size: 12px; opacity: 0.9; margin-top: 4px;">Bridge USDC to Base then supply automatically</div>',alert(`Failed to initiate bridging: ${b?.message||b}`)}}),setTimeout(()=>{i&&(i.focus(),i.click(),console.log(" NEXUS: Morpho input focused and ready for typing"))},200)}function ab(){if(document.getElementById("root")||document.documentElement){const e=new MutationObserver(t=>{t.forEach(async n=>{if(n.type==="childList"&&n.addedNodes.length>0&&n.addedNodes[0]instanceof HTMLElement){if((window.location.hostname.includes("lido.fi")||window.location.hostname.includes("stake.lido"))&&(console.log(" NEXUS: Detected Lido domain, checking for button..."),document.querySelector(".nexus-lido-unified-button")||(console.log(" NEXUS: Button not found, adding it via mutation observer..."),Lt())),n.addedNodes[0]?.matches(eu)){const r=n.addedNodes[0];if(r.innerHTML.includes("Arbitrum"))for(let o=0;o<r.children[0].children[0].children.length;o++){const s=r.children[0].children[0].children[o];s.innerHTML.includes("Arbitrum")||cs(s)}else if(r.innerHTML.includes("USDC"))for(let o=0;o<r.children[0].children[0].children.length;o++){const s=r.children[0].children[0].children[o];s.innerText!=="USDC"&&s.innerText!=="USDT"&&cs(s)}}if(n.addedNodes[0]?.querySelector(fs)){const r=n.addedNodes[0].querySelector(fs);r.innerHTML=r.innerHTML.replace(" from Arbitrum"," from <span style='text-decoration: line-through; text-decoration-thickness: 4px;'>Arbitrum</span> Everywhere")}n.addedNodes[0]?.querySelector(ps)&&n.addedNodes[0].querySelectorAll(ps).forEach(o=>{o.innerHTML.includes("Deposit Chain")&&cs(o)})}})});document.getElementById("root")?e.observe(document.getElementById("root"),{subtree:!0,childList:!0,characterData:!0}):e.observe(document.body,{subtree:!0,childList:!0,characterData:!0})}}async function cb(){if(!(window.location.hostname.includes("app.aave.com")||window.location.hostname==="aave.com")){console.log(" NEXUS: Not on Aave domain, skipping Aave integration");return}if(window.__nexusAaveInitialized)return;window.__nexusAaveInitialized=!0,console.log(" NEXUS: Aave integration active on",window.location.href,"- will show popup when USDC Supply modal opens"),new MutationObserver(async()=>{const n=Array.from(document.querySelectorAll("h1, h2, h3, h4, h5, h6, div, span, p, button")),r=n.find(s=>{const i=s.textContent?.toLowerCase()||"";return i.includes("supply")&&i.includes("usdc")||i==="supply usdc"||i.includes("deposit usdc")||i.includes("supply")&&s.closest('[role="dialog"]')||i.includes("usdc")&&s.closest('[role="modal"]')}),o=Array.from(document.querySelectorAll("input, select")).find(s=>{const i=s.placeholder?.toLowerCase()||"",a=s.value?.toLowerCase()||"",c=s.getAttribute("aria-label")?.toLowerCase()||"";return i.includes("usdc")||a.includes("usdc")||c.includes("usdc")});if((r||o)&&!window.__nexusAaveModalShown){console.log(" NEXUS: Aave Supply USDC modal detected!"),window.__nexusAaveModalShown=!0,await new Promise(u=>setTimeout(u,500));const i=(await yr()).find(u=>u.symbol==="USDC");if(!i){console.log(" NEXUS: No USDC found");return}const a=parseFloat(i.balance||"0"),c=i.breakdown.filter(u=>Number(u.balance)>0);a>0&&(console.log(` NEXUS: Showing unified USDC popup with $${a} across ${c.length} chains`),ib(a,c))}window.__nexusAaveModalShown&&!n.some(i=>{const a=i.textContent?.toLowerCase()||"";return a.includes("supply")&&a.includes("usdc")||a==="supply usdc"||a.includes("deposit usdc")})&&!o&&(console.log(" NEXUS: Aave Supply modal closed"),window.__nexusAaveModalShown=!1)}).observe(document.body,{childList:!0,subtree:!0})}ab();function Lt(){console.log(" NEXUS: Adding Lido unified ETH button...");const e=document.querySelector(".nexus-lido-unified-button");e&&e.remove();const t=document.createElement("button");t.className="nexus-lido-unified-button",t.innerHTML=" Unified ETH",t.style.cssText=`
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 999999;
    padding: 12px 20px;
    background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
    transition: all 0.3s ease;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    border: 1px solid rgba(255, 255, 255, 0.2);
  `,t.addEventListener("mouseenter",()=>{t.style.transform="translateY(-2px)",t.style.boxShadow="0 12px 35px rgba(79, 70, 229, 0.4)"}),t.addEventListener("mouseleave",()=>{t.style.transform="translateY(0)",t.style.boxShadow="0 8px 25px rgba(79, 70, 229, 0.3)"}),t.addEventListener("click",async()=>{try{console.log(" NEXUS: Button clicked, fetching unified balances...");const r=(await yr()).find(o=>o.symbol==="ETH");console.log(" NEXUS: Opening modal with ETH asset:",r),Kc(r||{symbol:"ETH",balance:"0",chains:[]})}catch(n){console.error(" NEXUS: Error fetching balances:",n),Kc({balance:"0"})}}),document.body.appendChild(t),console.log(" NEXUS: Unified ETH button added to Lido successfully!")}(window.location.hostname.includes("lido.fi")||window.location.hostname.includes("stake.lido"))&&(console.log(" NEXUS: On Lido domain, initializing unified ETH integration immediately"),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Lt):Lt(),setTimeout(Lt,500),setTimeout(Lt,2e3),setTimeout(Lt,5e3));function Pn(){if(document.querySelector("#nexus-morpho-unified-btn"))return;console.log(" NEXUS: Adding Morpho unified USDC button");const e=document.createElement("button");e.id="nexus-morpho-unified-btn",e.innerHTML=" Bridge + Supply to Morpho",e.style.cssText=`
    position: fixed;
    top: 80px;
    right: 20px;
    z-index: 999999;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 25px;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    transition: all 0.3s ease;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  `,e.addEventListener("mouseenter",()=>{e.style.transform="translateY(-2px)",e.style.boxShadow="0 6px 20px rgba(102, 126, 234, 0.6)"}),e.addEventListener("mouseleave",()=>{e.style.transform="translateY(0)",e.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"}),e.addEventListener("click",async()=>{console.log(" NEXUS: Morpho unified button clicked!");try{const n=(await yr()).find(r=>r.symbol==="USDC");if(n){const r=parseFloat(n.balance||"0"),o=n.breakdown?.filter(s=>Number(s.balance)>0)||[];us(r,o)}else us(0,[])}catch(t){console.error(" NEXUS: Error fetching balances for Morpho:",t),us(0,[])}}),document.body.appendChild(e),console.log(" NEXUS: Unified USDC button added to Morpho successfully!")}(window.location.hostname.includes("app.morpho.org")||window.location.hostname.includes("morpho.org"))&&(console.log(" NEXUS: On Morpho domain, initializing unified USDC integration immediately"),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Pn):Pn(),setTimeout(Pn,500),setTimeout(Pn,2e3),setTimeout(Pn,5e3)),setTimeout(()=>{cb()},1e3)})();
