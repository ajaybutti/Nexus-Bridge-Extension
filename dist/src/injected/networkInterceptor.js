(function(){"use strict";const Hc="1.0.8";let ye=class io extends Error{constructor(t,n={}){const r=n.cause instanceof io?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof io&&n.cause.docsPath||n.docsPath,o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Hc}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}};function De(e,t){return e.exec(t)?.groups}const co=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,uo=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,fo=/^\(.+?\).*?$/,lo=/^tuple(?<array>(\[(\d*)\])*)$/;function $r(e){let t=e.type;if(lo.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const o=e.components[s];t+=$r(o),s<n-1&&(t+=", ")}const r=De(lo,e.type);return t+=`)${r?.array??""}`,$r({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Jt(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=$r(s),r!==n-1&&(t+=", ")}return t}function Un(e){return e.type==="function"?`function ${e.name}(${Jt(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${Jt(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${Jt(e.inputs)})`:e.type==="error"?`error ${e.name}(${Jt(e.inputs)})`:e.type==="constructor"?`constructor(${Jt(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const po=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Gc(e){return po.test(e)}function Vc(e){return De(po,e)}const ho=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Zc(e){return ho.test(e)}function Wc(e){return De(ho,e)}const mo=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Kc(e){return mo.test(e)}function Yc(e){return De(mo,e)}const bo=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Ir(e){return bo.test(e)}function Xc(e){return De(bo,e)}const yo=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Jc(e){return yo.test(e)}function Qc(e){return De(yo,e)}const go=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function eu(e){return go.test(e)}function tu(e){return De(go,e)}const nu=/^receive\(\) external payable$/;function ru(e){return nu.test(e)}const su=new Set(["indexed"]),Nr=new Set(["calldata","memory","storage"]);class ou extends ye{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class iu extends ye{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class au extends ye{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class cu extends ye{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class uu extends ye{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class fu extends ye{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class lu extends ye{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class du extends ye{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Nt extends ye{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class pu extends ye{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class hu extends ye{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class mu extends ye{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class bu extends ye{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function yu(e,t,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let o="";for(const i of s[1])o+=`[${i.type}${i.name?`:${i.name}`:""}]`;r+=`(${s[0]}{${o}})`}return t?`${t}:${e}${r}`:e}const Tr=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Sr(e,t={}){if(Kc(e))return gu(e,t);if(Zc(e))return wu(e,t);if(Gc(e))return vu(e,t);if(Jc(e))return xu(e,t);if(eu(e))return Eu(e);if(ru(e))return{type:"receive",stateMutability:"payable"};throw new pu({signature:e})}function gu(e,t={}){const n=Yc(e);if(!n)throw new Nt({signature:e,type:"function"});const r=Ae(n.parameters),s=[],o=r.length;for(let a=0;a<o;a++)s.push(ht(r[a],{modifiers:Nr,structs:t,type:"function"}));const i=[];if(n.returns){const a=Ae(n.returns),c=a.length;for(let u=0;u<c;u++)i.push(ht(a[u],{modifiers:Nr,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:i}}function wu(e,t={}){const n=Wc(e);if(!n)throw new Nt({signature:e,type:"event"});const r=Ae(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(ht(r[i],{modifiers:su,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}function vu(e,t={}){const n=Vc(e);if(!n)throw new Nt({signature:e,type:"error"});const r=Ae(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(ht(r[i],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}function xu(e,t={}){const n=Qc(e);if(!n)throw new Nt({signature:e,type:"constructor"});const r=Ae(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(ht(r[i],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Eu(e){const t=tu(e);if(!t)throw new Nt({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}const Au=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Bu=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Pu=/^u?int$/;function ht(e,t){const n=yu(e,t?.type,t?.structs);if(Tr.has(n))return Tr.get(n);const r=fo.test(e),s=De(r?Bu:Au,e);if(!s)throw new cu({param:e});if(s.name&&Iu(s.name))throw new uu({param:e,name:s.name});const o=s.name?{name:s.name}:{},i=s.modifier==="indexed"?{indexed:!0}:{},a=t?.structs??{};let c,u={};if(r){c="tuple";const d=Ae(s.type),f=[],p=d.length;for(let h=0;h<p;h++)f.push(ht(d[h],{structs:a}));u={components:f}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(Pu.test(s.type))c=`${s.type}256`;else if(c=s.type,t?.type!=="struct"&&!wo(c))throw new au({type:c});if(s.modifier){if(!t?.modifiers?.has?.(s.modifier))throw new fu({param:e,type:t?.type,modifier:s.modifier});if(Nr.has(s.modifier)&&!Nu(c,!!s.array))throw new lu({param:e,type:t?.type,modifier:s.modifier})}const l={type:`${c}${s.array??""}`,...o,...i,...u};return Tr.set(n,l),l}function Ae(e,t=[],n="",r=0){const s=e.trim().length;for(let o=0;o<s;o++){const i=e[o],a=e.slice(o+1);switch(i){case",":return r===0?Ae(a,[...t,n.trim()]):Ae(a,t,`${n}${i}`,r);case"(":return Ae(a,t,`${n}${i}`,r+1);case")":return Ae(a,t,`${n}${i}`,r-1);default:return Ae(a,t,`${n}${i}`,r)}}if(n==="")return t;if(r!==0)throw new bu({current:n,depth:r});return t.push(n.trim()),t}function wo(e){return e==="address"||e==="bool"||e==="function"||e==="string"||co.test(e)||uo.test(e)}const $u=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Iu(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||co.test(e)||uo.test(e)||$u.test(e)}function Nu(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function vo(e){const t={},n=e.length;for(let i=0;i<n;i++){const a=e[i];if(!Ir(a))continue;const c=Xc(a);if(!c)throw new Nt({signature:a,type:"struct"});const u=c.properties.split(";"),l=[],d=u.length;for(let f=0;f<d;f++){const h=u[f].trim();if(!h)continue;const m=ht(h,{type:"struct"});l.push(m)}if(!l.length)throw new hu({signature:a});t[c.name]=l}const r={},s=Object.entries(t),o=s.length;for(let i=0;i<o;i++){const[a,c]=s[i];r[a]=xo(c,t)}return r}const Tu=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function xo(e,t,n=new Set){const r=[],s=e.length;for(let o=0;o<s;o++){const i=e[o];if(fo.test(i.type))r.push(i);else{const c=De(Tu,i.type);if(!c?.type)throw new du({abiParameter:i});const{array:u,type:l}=c;if(l in t){if(n.has(l))throw new mu({type:l});r.push({...i,type:`tuple${u??""}`,components:xo(t[l]??[],t,new Set([...n,l]))})}else if(wo(l))r.push(i);else throw new iu({type:l})}}return r}function Eo(e){const t=vo(e),n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s];Ir(o)||n.push(Sr(o,t))}return n}function Ao(e){let t;if(typeof e=="string")t=Sr(e);else{const n=vo(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(!Ir(o)){t=Sr(o,n);break}}}if(!t)throw new ou({signature:e});return t}function q(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:o=>t(e,o)}function Be(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new Du(e.type);return`${e.name}(${zn(e.inputs,{includeName:t})})`}function zn(e,{includeName:t=!1}={}){return e?e.map(n=>Su(n,{includeName:t})).join(t?", ":","):""}function Su(e,{includeName:t}){return e.type.startsWith("tuple")?`(${zn(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function Pe(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function Y(e){return Pe(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Bo="2.34.0";let kr={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${Bo}`},P=class ao extends Error{constructor(t,n={}){const r=n.cause instanceof ao?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof ao&&n.cause.docsPath||n.docsPath,o=kr.getDocsUrl?.({...n,docsPath:s}),i=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...kr.version?[`Version: ${kr.version}`]:[]].join(`
`);super(i,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Bo}walk(t){return Po(this,t)}};function Po(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Po(e.cause,t):t?null:e}class ku extends P{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class $o extends P{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class Io extends P{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${zn(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class Qt extends P{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Cu extends P{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Mu extends P{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${Y(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Ru extends P{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Ou extends P{constructor(t,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${t}", but "${t}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class No extends P{constructor(t,{docsPath:n}={}){super([`Error ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class To extends P{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class Fu extends P{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class So extends P{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class ko extends P{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Tt extends P{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Co extends P{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Lu extends P{constructor(t,{docsPath:n}){super([`Encoded function signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class _u extends P{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${Be(t.abiItem)}\`, and`,`\`${n.type}\` in \`${Be(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Uu=class extends P{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class en extends P{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${zn(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class jn extends P{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Be(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class zu extends P{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class ju extends P{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let Mo=class extends P{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class Du extends P{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class qu extends P{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let Ro=class extends P{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},Oo=class extends P{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class Fo extends P{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${t} ${r} long.`,{name:"InvalidBytesLengthError"})}}function St(e,{dir:t,size:n=32}={}){return typeof e=="string"?nt(e,{dir:t,size:n}):Hu(e,{dir:t,size:n})}function nt(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Oo({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function Hu(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Oo({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const o=t==="right";r[o?s:n-s-1]=e[o?s:e.length-s-1]}return r}let Lo=class extends P{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class Gu extends P{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Vu extends P{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let Zu=class extends P{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}};function mt(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function $e(e,{size:t}){if(Y(e)>t)throw new Zu({givenSize:Y(e),maxSize:t})}function Oe(e,t={}){const{signed:n}=t;t.size&&$e(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Wu(e,t={}){let n=e;if(t.size&&($e(n,{size:t.size}),n=mt(n)),mt(n)==="0x00")return!1;if(mt(n)==="0x01")return!0;throw new Vu(n)}function qe(e,t={}){return Number(Oe(e,t))}const Ku=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function He(e,t={}){return typeof e=="number"||typeof e=="bigint"?j(e,t):typeof e=="string"?tn(e,t):typeof e=="boolean"?_o(e,t):te(e,t)}function _o(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?($e(n,{size:t.size}),St(n,{size:t.size})):n}function te(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=Ku[e[s]];const r=`0x${n}`;return typeof t.size=="number"?($e(r,{size:t.size}),St(r,{dir:"right",size:t.size})):r}function j(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<i){const c=typeof e=="bigint"?"n":"";throw new Lo({max:o?`${o}${c}`:void 0,min:`${i}${c}`,signed:n,size:r,value:`${e}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?St(a,{size:r}):a}const Yu=new TextEncoder;function tn(e,t={}){const n=Yu.encode(e);return te(n,t)}const Xu=new TextEncoder;function kt(e,t={}){return typeof e=="number"||typeof e=="bigint"?Qu(e,t):typeof e=="boolean"?Ju(e,t):Pe(e)?Ie(e,t):bt(e,t)}function Ju(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?($e(n,{size:t.size}),St(n,{size:t.size})):n}const Ge={zero:48,nine:57,A:65,F:70,a:97,f:102};function Uo(e){if(e>=Ge.zero&&e<=Ge.nine)return e-Ge.zero;if(e>=Ge.A&&e<=Ge.F)return e-(Ge.A-10);if(e>=Ge.a&&e<=Ge.f)return e-(Ge.a-10)}function Ie(e,t={}){let n=e;t.size&&($e(n,{size:t.size}),n=St(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,o=new Uint8Array(s);for(let i=0,a=0;i<s;i++){const c=Uo(r.charCodeAt(a++)),u=Uo(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new P(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);o[i]=c*16+u}return o}function Qu(e,t){const n=j(e,t);return Ie(n)}function bt(e,t={}){const n=Xu.encode(e);return typeof t.size=="number"?($e(n,{size:t.size}),St(n,{dir:"right",size:t.size})):n}const Dn=BigInt(2**32-1),zo=BigInt(32);function ef(e,t=!1){return t?{h:Number(e&Dn),l:Number(e>>zo&Dn)}:{h:Number(e>>zo&Dn)|0,l:Number(e&Dn)|0}}function tf(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:i,l:a}=ef(e[o],t);[r[o],s[o]]=[i,a]}return[r,s]}const nf=(e,t,n)=>e<<n|t>>>32-n,rf=(e,t,n)=>t<<n|e>>>32-n,sf=(e,t,n)=>t<<n-32|e>>>64-n,of=(e,t,n)=>e<<n-32|t>>>64-n,Ct=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function nn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Ve(e,...t){if(!qn(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function jo(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");nn(e.outputLen),nn(e.blockLen)}function Mt(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Do(e,t){Ve(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function af(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Rt(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Cr(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Fe(e,t){return e<<32-t|e>>>t}const cf=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function uf(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function ff(e){for(let t=0;t<e.length;t++)e[t]=uf(e[t]);return e}const qo=cf?e=>e:ff,Ho=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",lf=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ot(e){if(Ve(e),Ho)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=lf[e[n]];return t}const Ze={_0:48,_9:57,A:65,F:70,a:97,f:102};function Go(e){if(e>=Ze._0&&e<=Ze._9)return e-Ze._0;if(e>=Ze.A&&e<=Ze.F)return e-(Ze.A-10);if(e>=Ze.a&&e<=Ze.f)return e-(Ze.a-10)}function Hn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Ho)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=Go(e.charCodeAt(o)),a=Go(e.charCodeAt(o+1));if(i===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[s]=i*16+a}return r}function df(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Gn(e){return typeof e=="string"&&(e=df(e)),Ve(e),e}function rt(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Ve(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}class Mr{}function Vo(e){const t=r=>e().update(Gn(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Zo(e=32){if(Ct&&typeof Ct.getRandomValues=="function")return Ct.getRandomValues(new Uint8Array(e));if(Ct&&typeof Ct.randomBytes=="function")return Uint8Array.from(Ct.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const pf=BigInt(0),rn=BigInt(1),hf=BigInt(2),mf=BigInt(7),bf=BigInt(256),yf=BigInt(113),Wo=[],Ko=[],Yo=[];for(let e=0,t=rn,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Wo.push(2*(5*r+n)),Ko.push((e+1)*(e+2)/2%64);let s=pf;for(let o=0;o<7;o++)t=(t<<rn^(t>>mf)*yf)%bf,t&hf&&(s^=rn<<(rn<<BigInt(o))-rn);Yo.push(s)}const Xo=tf(Yo,!0),gf=Xo[0],wf=Xo[1],Jo=(e,t,n)=>n>32?sf(e,t,n):nf(e,t,n),Qo=(e,t,n)=>n>32?of(e,t,n):rf(e,t,n);function vf(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10,c=(i+2)%10,u=n[c],l=n[c+1],d=Jo(u,l,1)^n[a],f=Qo(u,l,1)^n[a+1];for(let p=0;p<50;p+=10)e[i+p]^=d,e[i+p+1]^=f}let s=e[2],o=e[3];for(let i=0;i<24;i++){const a=Ko[i],c=Jo(s,o,a),u=Qo(s,o,a),l=Wo[i];s=e[l],o=e[l+1],e[l]=c,e[l+1]=u}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)n[a]=e[i+a];for(let a=0;a<10;a++)e[i+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=gf[r],e[1]^=wf[r]}Rt(n)}class Rr extends Mr{constructor(t,n,r,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,nn(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=af(this.state)}clone(){return this._cloneInto()}keccak(){qo(this.state32),vf(this.state32,this.rounds),qo(this.state32),this.posOut=0,this.pos=0}update(t){Mt(this),t=Gn(t),Ve(t);const{blockLen:n,state:r}=this,s=t.length;for(let o=0;o<s;){const i=Math.min(n-this.pos,s-o);for(let a=0;a<i;a++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Mt(this,!1),Ve(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=t.length;s<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-s);t.set(n.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return nn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Do(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Rt(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:i}=this;return t||(t=new Rr(n,r,s,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=s,t.enableXOF=i,t.destroyed=this.destroyed,t}}const xf=(e,t,n)=>Vo(()=>new Rr(t,e,n)),ei=xf(1,136,256/8);function oe(e,t){const n=t||"hex",r=ei(Pe(e,{strict:!1})?kt(e):e);return n==="bytes"?r:He(r)}const Ef=e=>oe(kt(e));function Af(e){return Ef(e)}function Bf(e){let t=!0,n="",r=0,s="",o=!1;for(let i=0;i<e.length;i++){const a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&r++,a===")"&&r--,!!t){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){o=!0;break}continue}if(a===" "){e[i-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=a,n+=a}}if(!o)throw new P("Unable to normalize signature.");return s}const Pf=e=>{const t=typeof e=="string"?e:Un(e);return Bf(t)};function ti(e){return Af(Pf(e))}const Vn=ti;let st=class extends P{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Or=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Fr=new Or(8192);function Zn(e,t){if(Fr.has(`${e}.${t}`))return Fr.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=oe(bt(n),"bytes"),s=n.split("");for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&s[i]&&(s[i]=s[i].toUpperCase()),(r[i>>1]&15)>=8&&s[i+1]&&(s[i+1]=s[i+1].toUpperCase());const o=`0x${s.join("")}`;return Fr.set(`${e}.${t}`,o),o}function $f(e,t){if(!we(e,{strict:!1}))throw new st({address:e});return Zn(e,t)}const If=/^0x[a-fA-F0-9]{40}$/,Lr=new Or(8192);function we(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Lr.has(r))return Lr.get(r);const s=If.test(e)?e.toLowerCase()===e?!0:n?Zn(e)===e:!0:!1;return Lr.set(r,s),s}function Ne(e){return typeof e[0]=="string"?Ft(e):Nf(e)}function Nf(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function Ft(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Lt(e,t,n,{strict:r}={}){return Pe(e,{strict:!1})?oi(e,t,n,{strict:r}):si(e,t,n,{strict:r})}function ni(e,t){if(typeof t=="number"&&t>0&&t>Y(e)-1)throw new Ro({offset:t,position:"start",size:Y(e)})}function ri(e,t,n){if(typeof t=="number"&&typeof n=="number"&&Y(e)!==n-t)throw new Ro({offset:n,position:"end",size:Y(e)})}function si(e,t,n,{strict:r}={}){ni(e,t);const s=e.slice(t,n);return r&&ri(s,t,n),s}function oi(e,t,n,{strict:r}={}){ni(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&ri(s,t,n),s}const Tf=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ii=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function We(e,t){if(e.length!==t.length)throw new Ru({expectedLength:e.length,givenLength:t.length});const n=Sf({params:e,values:t}),r=Ur(n);return r.length===0?"0x":r}function Sf({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(_r({param:e[r],value:t[r]}));return n}function _r({param:e,value:t}){const n=zr(e.type);if(n){const[r,s]=n;return Cf(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return Lf(t,{param:e});if(e.type==="address")return kf(t);if(e.type==="bool")return Rf(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,s="256"]=ii.exec(e.type)??[];return Of(t,{signed:r,size:Number(s)})}if(e.type.startsWith("bytes"))return Mf(t,{param:e});if(e.type==="string")return Ff(t);throw new zu(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Ur(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?t+=32:t+=Y(a)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?(n.push(j(t+s,{size:32})),r.push(a),s+=Y(a)):n.push(a)}return Ne([...n,...r])}function kf(e){if(!we(e))throw new st({address:e});return{dynamic:!1,encoded:nt(e.toLowerCase())}}function Cf(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new Mo(e);if(!r&&e.length!==t)throw new Cu({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const o=[];for(let i=0;i<e.length;i++){const a=_r({param:n,value:e[i]});a.dynamic&&(s=!0),o.push(a)}if(r||s){const i=Ur(o);if(r){const a=j(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?Ne([a,i]):a}}if(s)return{dynamic:!0,encoded:i}}return{dynamic:!1,encoded:Ne(o.map(({encoded:i})=>i))}}function Mf(e,{param:t}){const[,n]=t.type.split("bytes"),r=Y(e);if(!n){let s=e;return r%32!==0&&(s=nt(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:Ne([nt(j(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Mu({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:nt(e,{dir:"right"})}}function Rf(e){if(typeof e!="boolean")throw new P(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:nt(_o(e))}}function Of(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new Lo({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:j(e,{size:32,signed:t})}}function Ff(e){const t=tn(e),n=Math.ceil(Y(t)/32),r=[];for(let s=0;s<n;s++)r.push(nt(Lt(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ne([nt(j(Y(t),{size:32})),...r])}}function Lf(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const o=t.components[s],i=Array.isArray(e)?s:o.name,a=_r({param:o,value:e[i]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Ur(r):Ne(r.map(({encoded:s})=>s))}}function zr(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const sn=e=>Lt(ti(e),0,4);function yt(e){const{abi:t,args:n=[],name:r}=e,s=Pe(r,{strict:!1}),o=t.filter(a=>s?a.type==="function"?sn(a)===r:a.type==="event"?Vn(a)===r:!1:"name"in a&&a.name===r);if(o.length===0)return;if(o.length===1)return o[0];let i;for(const a of o){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,l)=>{const d="inputs"in a&&a.inputs[l];return d?jr(u,d):!1})){if(i&&"inputs"in i&&i.inputs){const u=ai(a.inputs,i.inputs,n);if(u)throw new _u({abiItem:a,type:u[0]},{abiItem:i,type:u[1]})}i=a}}return i||o[0]}function jr(e,t){const n=typeof e,r=t.type;switch(r){case"address":return we(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>jr(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>jr(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function ai(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return ai(s.components,o.components,n[r]);const i=[s.type,o.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?we(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?we(n[r],{strict:!1}):!1)return i}}const ci="/docs/contract/encodeEventTopics";function on(e){const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const c=yt({abi:t,name:n});if(!c)throw new ko(n,{docsPath:ci});s=c}if(s.type!=="event")throw new ko(void 0,{docsPath:ci});const o=Be(s),i=Vn(o);let a=[];if(r&&"inputs"in s){const c=s.inputs?.filter(l=>"indexed"in l&&l.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?c?.map(l=>r[l.name])??[]:[];u.length>0&&(a=c?.map((l,d)=>Array.isArray(u[d])?u[d].map((f,p)=>ui({param:l,value:u[d][p]})):typeof u[d]<"u"&&u[d]!==null?ui({param:l,value:u[d]}):null)??[])}return[i,...a]}function ui({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return oe(kt(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new qu(e.type);return We([e],[t])}function Wn(e,{method:t}){const n={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:r,response:s,status:o,transport:i})=>{o==="success"&&t===r&&(n[s]=i.request)}),r=>n[r]||e.request}async function fi(e,t){const{address:n,abi:r,args:s,eventName:o,fromBlock:i,strict:a,toBlock:c}=t,u=Wn(e,{method:"eth_newFilter"}),l=o?on({abi:r,args:s,eventName:o}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof i=="bigint"?j(i):i,toBlock:typeof c=="bigint"?j(c):c,topics:l}]});return{abi:r,args:s,eventName:o,id:d,request:u(d),strict:!!a,type:"event"}}function Te(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const li="/docs/contract/encodeFunctionData";function _f(e){const{abi:t,args:n,functionName:r}=e;let s=t[0];if(r){const o=yt({abi:t,args:n,name:r});if(!o)throw new Tt(r,{docsPath:li});s=o}if(s.type!=="function")throw new Tt(void 0,{docsPath:li});return{abi:[s],functionName:sn(Be(s))}}function Le(e){const{args:t}=e,{abi:n,functionName:r}=e.abi.length===1&&e.functionName?.startsWith("0x")?e:_f(e),s=n[0],o=r,i="inputs"in s&&s.inputs?We(s.inputs,t??[]):void 0;return Ft([o,i??"0x"])}const di={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},pi={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Uf={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class hi extends P{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class mi extends P{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}}class zf extends P{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}const jf={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new zf({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new mi({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new hi({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new hi({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Dr(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(jf);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function Df(e,t={}){typeof t.size<"u"&&$e(e,{size:t.size});const n=te(e,t);return Oe(n,t)}function qf(e,t={}){let n=e;if(typeof t.size<"u"&&($e(n,{size:t.size}),n=mt(n)),n.length>1||n[0]>1)throw new Gu(n);return!!n[0]}function Ke(e,t={}){typeof t.size<"u"&&$e(e,{size:t.size});const n=te(e,t);return qe(n,t)}function Hf(e,t={}){let n=e;return typeof t.size<"u"&&($e(n,{size:t.size}),n=mt(n,{dir:"right"})),new TextDecoder().decode(n)}function an(e,t){const n=typeof t=="string"?Ie(t):t,r=Dr(n);if(Y(n)===0&&e.length>0)throw new Qt;if(Y(t)&&Y(t)<32)throw new Io({data:typeof t=="string"?t:te(t),params:e,size:Y(t)});let s=0;const o=[];for(let i=0;i<e.length;++i){const a=e[i];r.setPosition(s);const[c,u]=_t(r,a,{staticPosition:0});s+=u,o.push(c)}return o}function _t(e,t,{staticPosition:n}){const r=zr(t.type);if(r){const[s,o]=r;return Vf(e,{...t,type:o},{length:s,staticPosition:n})}if(t.type==="tuple")return Yf(e,t,{staticPosition:n});if(t.type==="address")return Gf(e);if(t.type==="bool")return Zf(e);if(t.type.startsWith("bytes"))return Wf(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Kf(e,t);if(t.type==="string")return Xf(e,{staticPosition:n});throw new ju(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const bi=32,qr=32;function Gf(e){const t=e.readBytes(32);return[Zn(te(si(t,-20))),32]}function Vf(e,t,{length:n,staticPosition:r}){if(!n){const i=Ke(e.readBytes(qr)),a=r+i,c=a+bi;e.setPosition(a);const u=Ke(e.readBytes(bi)),l=cn(t);let d=0;const f=[];for(let p=0;p<u;++p){e.setPosition(c+(l?p*32:d));const[h,m]=_t(e,t,{staticPosition:c});d+=m,f.push(h)}return e.setPosition(r+32),[f,32]}if(cn(t)){const i=Ke(e.readBytes(qr)),a=r+i,c=[];for(let u=0;u<n;++u){e.setPosition(a+u*32);const[l]=_t(e,t,{staticPosition:a});c.push(l)}return e.setPosition(r+32),[c,32]}let s=0;const o=[];for(let i=0;i<n;++i){const[a,c]=_t(e,t,{staticPosition:r+s});s+=c,o.push(a)}return[o,s]}function Zf(e){return[qf(e.readBytes(32),{size:32}),32]}function Wf(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const i=Ke(e.readBytes(32));e.setPosition(n+i);const a=Ke(e.readBytes(32));if(a===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(a);return e.setPosition(n+32),[te(c),32]}return[te(e.readBytes(Number.parseInt(s),32)),32]}function Kf(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256"),s=e.readBytes(32);return[r>48?Df(s,{signed:n}):Ke(s,{signed:n}),32]}function Yf(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:i})=>!i),s=r?[]:{};let o=0;if(cn(t)){const i=Ke(e.readBytes(qr)),a=n+i;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(a+o);const[l,d]=_t(e,u,{staticPosition:a});o+=d,s[r?c:u?.name]=l}return e.setPosition(n+32),[s,32]}for(let i=0;i<t.components.length;++i){const a=t.components[i],[c,u]=_t(e,a,{staticPosition:n});s[r?i:a?.name]=c,o+=u}return[s,o]}function Xf(e,{staticPosition:t}){const n=Ke(e.readBytes(32)),r=t+n;e.setPosition(r);const s=Ke(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),i=Hf(mt(o));return e.setPosition(t+32),[i,32]}function cn(e){const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(cn);const n=zr(e.type);return!!(n&&cn({...e,type:n[1]}))}function yi(e){const{abi:t,data:n}=e,r=Lt(n,0,4);if(r==="0x")throw new Qt;const o=[...t||[],pi,Uf].find(i=>i.type==="error"&&r===sn(Be(i)));if(!o)throw new To(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?an(o.inputs,Lt(n,4)):void 0,errorName:o.name}}const ne=(e,t,n)=>JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s,n);function gi({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,o)=>`${r&&s.name?`${s.name}: `:""}${typeof t[o]=="object"?ne(t[o]):t[o]}`).join(", ")})`}const Jf={gwei:9,wei:18},Qf={ether:-9,wei:9};function wi(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,o]=[n.slice(0,n.length-t),n.slice(n.length-t)];return o=o.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${o?`.${o}`:""}`}function vi(e,t="wei"){return wi(e,Jf[t])}function Se(e,t="wei"){return wi(e,Qf[t])}class el extends P{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class tl extends P{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function xi(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function nl(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=xi(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=xi(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Kn(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class rl extends P{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class sl extends P{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Kn(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Ei extends P{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){let i="Transaction";r&&o!==void 0&&(i=`Transaction at block time "${r}" at index "${o}"`),t&&o!==void 0&&(i=`Transaction at block hash "${t}" at index "${o}"`),n&&o!==void 0&&(i=`Transaction at block number "${n}" at index "${o}"`),s&&(i=`Transaction with hash "${s}"`),super(`${i} could not be found.`,{name:"TransactionNotFoundError"})}}class Ai extends P{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class ol extends P{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const il=e=>e,un=e=>e;class Bi extends P{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f,stateOverride:p}){const h=n?Te(n):void 0;let m=Kn({from:h?.address,to:d,value:typeof f<"u"&&`${vi(f)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${Se(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Se(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Se(u)} gwei`,nonce:l});p&&(m+=`
${nl(p)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class al extends P{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:o,functionName:i,sender:a}){const c=yt({abi:n,args:r,name:i}),u=c?gi({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?Be(c,{includeName:!0}):void 0,d=Kn({address:s&&il(s),function:l,args:u&&u!=="()"&&`${[...Array(i?.length??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(t.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=i,this.sender=a}}class Hr extends P{constructor({abi:t,data:n,functionName:r,message:s}){let o,i,a,c;if(n&&n!=="0x")try{i=yi({abi:t,data:n});const{abiItem:l,errorName:d,args:f}=i;if(d==="Error")c=f[0];else if(d==="Panic"){const[p]=f;c=di[p]}else{const p=l?Be(l,{includeName:!0}):void 0,h=l&&f?gi({abiItem:l,args:f,includeFunctionName:!1,includeName:!1}):void 0;a=[p?`Error: ${p}`:"",h&&h!=="()"?`       ${[...Array(d?.length??0).keys()].map(()=>" ").join("")}${h}`:""]}}catch(l){o=l}else s&&(c=s);let u;o instanceof To&&(u=o.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=i,this.raw=n,this.reason=c,this.signature=u}}class cl extends P{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class ul extends P{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Yn extends P{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}class gt extends P{constructor({body:t,cause:n,details:r,headers:s,status:o,url:i}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[o&&`Status: ${o}`,`URL: ${un(i)}`,t&&`Request body: ${ne(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=s,this.status=o,this.url=i}}class Gr extends P{constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${un(r)}`,`Request body: ${ne(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Pi extends P{constructor({body:t,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${un(n)}`,`Request body: ${ne(t)}`],name:"TimeoutError"})}}const fl=-1;class de extends P{constructor(t,{code:n,docsPath:r,metaMessages:s,name:o,shortMessage:i}){super(i,{cause:t,docsPath:r,metaMessages:s||t?.metaMessages,name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||t.name,this.code=t instanceof Gr?t.code:n??fl}}class ge extends de{constructor(t,n){super(t,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class fn extends de{constructor(t){super(t,{code:fn.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(fn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class ln extends de{constructor(t){super(t,{code:ln.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class dn extends de{constructor(t,{method:n}={}){super(t,{code:dn.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(dn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class pn extends de{constructor(t){super(t,{code:pn.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class wt extends de{constructor(t){super(t,{code:wt.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(wt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class vt extends de{constructor(t){super(t,{code:vt.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(vt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class hn extends de{constructor(t){super(t,{code:hn.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class mn extends de{constructor(t){super(t,{code:mn.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class bn extends de{constructor(t){super(t,{code:bn.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class xt extends de{constructor(t,{method:n}={}){super(t,{code:xt.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(xt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Ut extends de{constructor(t){super(t,{code:Ut.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Ut,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class yn extends de{constructor(t){super(t,{code:yn.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class zt extends ge{constructor(t){super(t,{code:zt.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(zt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class gn extends ge{constructor(t){super(t,{code:gn.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class wn extends ge{constructor(t,{method:n}={}){super(t,{code:wn.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class vn extends ge{constructor(t){super(t,{code:vn.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class xn extends ge{constructor(t){super(t,{code:xn.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(xn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class En extends ge{constructor(t){super(t,{code:En.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(En,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class An extends ge{constructor(t){super(t,{code:An.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(An,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Bn extends ge{constructor(t){super(t,{code:Bn.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Pn extends ge{constructor(t){super(t,{code:Pn.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class $n extends ge{constructor(t){super(t,{code:$n.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty($n,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class In extends ge{constructor(t){super(t,{code:In.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(In,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Nn extends ge{constructor(t){super(t,{code:Nn.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Nn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Tn extends ge{constructor(t){super(t,{code:Tn.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Tn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class ll extends de{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const dl=3;function jt(e,{abi:t,address:n,args:r,docsPath:s,functionName:o,sender:i}){const a=e instanceof Yn?e:e instanceof P?e.walk(h=>"data"in h)||e.walk():{},{code:c,data:u,details:l,message:d,shortMessage:f}=a,p=e instanceof Qt?new cl({functionName:o}):[dl,wt.code].includes(c)&&(u||l||d||f)?new Hr({abi:t,data:typeof u=="object"?u.data:u,functionName:o,message:a instanceof Gr?l:f??d}):e;return new al(p,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:o,sender:i})}function pl(e){const t=oe(`0x${e.substring(4)}`).substring(26);return Zn(`0x${t}`)}async function hl({hash:e,signature:t}){const n=Pe(e)?e:He(e),{secp256k1:r}=await Promise.resolve().then(()=>nh);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:l,v:d,yParity:f}=t,p=Number(f??d),h=$i(p);return new r.Signature(Oe(u),Oe(l)).addRecoveryBit(h)}const i=Pe(t)?t:He(t);if(Y(i)!==65)throw new Error("invalid signature length");const a=qe(`0x${i.slice(130)}`),c=$i(a);return r.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function $i(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function Ii({hash:e,signature:t}){return pl(await hl({hash:e,signature:t}))}function ml(e,t="hex"){const n=Ni(e),r=Dr(new Uint8Array(n.length));return n.encode(r),t==="hex"?te(r.bytes):r.bytes}function Ni(e){return Array.isArray(e)?bl(e.map(t=>Ni(t))):yl(e)}function bl(e){const t=e.reduce((s,o)=>s+o.length,0),n=Ti(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:o}of e)o(s)}}}function yl(e){const t=typeof e=="string"?Ie(e):e,n=Ti(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function Ti(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new P("Length is too large.")}function gl(e){const{chainId:t,nonce:n,to:r}=e,s=e.contractAddress??e.address,o=oe(Ft(["0x05",ml([t?j(t):"0x",s,n?j(n):"0x"])]));return r==="bytes"?Ie(o):o}async function wl(e){const{authorization:t,signature:n}=e;return Ii({hash:gl(t),signature:n??t})}class vl extends P{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f}){const p=Kn({from:n?.address,to:d,value:typeof f<"u"&&`${vi(f)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${Se(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Se(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Se(u)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",p].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Dt extends P{constructor({cause:t,message:n}={}){const r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}}Object.defineProperty(Dt,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(Dt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Xn extends P{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Se(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}}Object.defineProperty(Xn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Vr extends P{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Se(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}}Object.defineProperty(Vr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Zr extends P{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}}Object.defineProperty(Zr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Wr extends P{constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}}Object.defineProperty(Wr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Kr extends P{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}}Object.defineProperty(Kr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Yr extends P{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Yr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Xr extends P{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Xr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Jr extends P{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Jr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Qr extends P{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Qr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Jn extends P{constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Se(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Se(r)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}}Object.defineProperty(Jn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Qn extends P{constructor({cause:t}){super(`An error occurred while executing: ${t?.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}function es(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof P?e.walk(s=>s?.code===Dt.code):e;return r instanceof P?new Dt({cause:e,message:r.details}):Dt.nodeMessage.test(n)?new Dt({cause:e,message:e.details}):Xn.nodeMessage.test(n)?new Xn({cause:e,maxFeePerGas:t?.maxFeePerGas}):Vr.nodeMessage.test(n)?new Vr({cause:e,maxFeePerGas:t?.maxFeePerGas}):Zr.nodeMessage.test(n)?new Zr({cause:e,nonce:t?.nonce}):Wr.nodeMessage.test(n)?new Wr({cause:e,nonce:t?.nonce}):Kr.nodeMessage.test(n)?new Kr({cause:e,nonce:t?.nonce}):Yr.nodeMessage.test(n)?new Yr({cause:e}):Xr.nodeMessage.test(n)?new Xr({cause:e,gas:t?.gas}):Jr.nodeMessage.test(n)?new Jr({cause:e,gas:t?.gas}):Qr.nodeMessage.test(n)?new Qr({cause:e}):Jn.nodeMessage.test(n)?new Jn({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new Qn({cause:e})}function xl(e,{docsPath:t,...n}){const r=(()=>{const s=es(e,n);return s instanceof Qn?e:s})();return new vl(r,{docsPath:t,...n})}function ts(e,{format:t}){if(!t)return{};const n={};function r(o){const i=Object.keys(o);for(const a of i)a in e&&(n[a]=e[a]),o[a]&&typeof o[a]=="object"&&!Array.isArray(o[a])&&r(o[a])}const s=t(e||{});return r(s),n}const El={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function er(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=Al(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>te(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=j(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=j(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=j(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=j(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=j(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=j(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=El[e.type]),typeof e.value<"u"&&(t.value=j(e.value)),t}function Al(e){return e.map(t=>({address:t.address,r:t.r?j(BigInt(t.r)):t.r,s:t.s?j(BigInt(t.s)):t.s,chainId:j(t.chainId),nonce:j(t.nonce),...typeof t.yParity<"u"?{yParity:j(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:j(t.v)}:{}}))}function Si(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new Fo({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Fo({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function Bl(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:o}=e,i={};if(o!==void 0&&(i.code=o),t!==void 0&&(i.balance=j(t)),n!==void 0&&(i.nonce=j(n)),r!==void 0&&(i.state=Si(r)),s!==void 0){if(i.state)throw new tl;i.stateDiff=Si(s)}return i}function ns(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!we(n,{strict:!1}))throw new st({address:n});if(t[n])throw new el({address:n});t[n]=Bl(r)}return t}const Pl=2n**256n-1n;function Sn(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:o}=e,i=t?Te(t):void 0;if(i&&!we(i.address))throw new st({address:i.address});if(o&&!we(o))throw new st({address:o});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new rl;if(r&&r>Pl)throw new Xn({maxFeePerGas:r});if(s&&r&&s>r)throw new Jn({maxFeePerGas:r,maxPriorityFeePerGas:s})}class $l extends P{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class rs extends P{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Il extends P{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Se(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class ki extends P{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Ci={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Mi(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?qe(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?qe(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?Ci[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=Nl(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}function Nl(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function Ri(e){const t=(e.transactions??[]).map(n=>typeof n=="string"?n:Mi(n));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function _e(e,{blockHash:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",includeTransactions:s}={}){const o=s??!1,i=n!==void 0?j(n):void 0;let a=null;if(t?a=await e.request({method:"eth_getBlockByHash",params:[t,o]},{dedupe:!0}):a=await e.request({method:"eth_getBlockByNumber",params:[i||r,o]},{dedupe:!!i}),!a)throw new ki({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||Ri)(a)}async function ss(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function Tl(e,t){return Oi(e,t)}async function Oi(e,t){const{block:n,chain:r=e.chain,request:s}=t||{};try{const o=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof o=="function"){const a=n||await q(e,_e,"getBlock")({}),c=await o({block:a,client:e,request:s});if(c===null)throw new Error;return c}if(typeof o<"u")return o;const i=await e.request({method:"eth_maxPriorityFeePerGas"});return Oe(i)}catch{const[o,i]=await Promise.all([n?Promise.resolve(n):q(e,_e,"getBlock")({}),q(e,ss,"getGasPrice")({})]);if(typeof o.baseFeePerGas!="bigint")throw new rs;const a=i-o.baseFeePerGas;return a<0n?0n:a}}async function Sl(e,t){return os(e,t)}async function os(e,t){const{block:n,chain:r=e.chain,request:s,type:o="eip1559"}=t||{},i=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new $l;const c=10**(i.toString().split(".")[1]?.length??0),u=f=>f*BigInt(Math.ceil(i*c))/BigInt(c),l=n||await q(e,_e,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const f=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:s,type:o});if(f!==null)return f}if(o==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new rs;const f=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await Oi(e,{block:l,chain:r,request:s}),p=u(l.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??p+f,maxPriorityFeePerGas:f}}return{gasPrice:s?.gasPrice??u(await q(e,ss,"getGasPrice")({}))}}async function Fi(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,typeof r=="bigint"?j(r):n]},{dedupe:!!r});return qe(s)}function Li(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>Ie(o)):e.blobs,s=[];for(const o of r)s.push(Uint8Array.from(t.blobToKzgCommitment(o)));return n==="bytes"?s:s.map(o=>te(o))}function _i(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(i=>Ie(i)):e.blobs,s=typeof e.commitments[0]=="string"?e.commitments.map(i=>Ie(i)):e.commitments,o=[];for(let i=0;i<r.length;i++){const a=r[i],c=s[i];o.push(Uint8Array.from(t.computeBlobKzgProof(a,c)))}return n==="bytes"?o:o.map(i=>te(i))}function kl(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),a=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+u,a,r)}function Cl(e,t,n){return e&t^~e&n}function Ml(e,t,n){return e&t^e&n^t&n}class Rl extends Mr{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Cr(this.buffer)}update(t){Mt(this),t=Gn(t),Ve(t);const{view:n,buffer:r,blockLen:s}=this,o=t.length;for(let i=0;i<o;){const a=Math.min(s-this.pos,o-i);if(a===s){const c=Cr(t);for(;s<=o-i;i+=s)this.process(c,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Mt(this),Do(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,Rt(this.buffer.subarray(i)),this.padOffset>s-i&&(this.process(r,0),i=0);for(let d=i;d<s;d++)n[d]=0;kl(r,s-8,BigInt(this.length*8),o),this.process(r,0);const a=Cr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:a}=this;return t.destroyed=i,t.finished=o,t.length=s,t.pos=a,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const ot=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ol=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),it=new Uint32Array(64);class Fl extends Rl{constructor(t=32){super(64,t,8,!1),this.A=ot[0]|0,this.B=ot[1]|0,this.C=ot[2]|0,this.D=ot[3]|0,this.E=ot[4]|0,this.F=ot[5]|0,this.G=ot[6]|0,this.H=ot[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:i,G:a,H:c}=this;return[t,n,r,s,o,i,a,c]}set(t,n,r,s,o,i,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)it[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const f=it[d-15],p=it[d-2],h=Fe(f,7)^Fe(f,18)^f>>>3,m=Fe(p,17)^Fe(p,19)^p>>>10;it[d]=m+it[d-7]+h+it[d-16]|0}let{A:r,B:s,C:o,D:i,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Fe(a,6)^Fe(a,11)^Fe(a,25),p=l+f+Cl(a,c,u)+Ol[d]+it[d]|0,m=(Fe(r,2)^Fe(r,13)^Fe(r,22))+Ml(r,s,o)|0;l=u,u=c,c=a,a=i+p|0,i=o,o=s,s=r,r=p+m|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,o,i,a,c,u,l)}roundClean(){Rt(it)}destroy(){this.set(0,0,0,0,0,0,0,0),Rt(this.buffer)}}const Ui=Vo(()=>new Fl),Ll=Ui;function _l(e,t){return Ll(Pe(e,{strict:!1})?kt(e):e)}function Ul(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),s=_l(t);return s.set([n],0),r==="bytes"?s:te(s)}function zl(e){const{commitments:t,version:n}=e,r=e.to,s=[];for(const o of t)s.push(Ul({commitment:o,to:r,version:n}));return s}const zi=6,ji=32,is=4096,Di=ji*is,qi=Di*zi-1-1*is*zi;class jl extends P{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Dl extends P{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function ql(e){const t=typeof e.data=="string"?Ie(e.data):e.data,n=Y(t);if(!n)throw new Dl;if(n>qi)throw new jl({maxSize:qi,size:n});const r=[];let s=!0,o=0;for(;s;){const i=Dr(new Uint8Array(Di));let a=0;for(;a<is;){const c=t.slice(o,o+(ji-1));if(i.pushByte(0),i.pushBytes(c),c.length<31){i.pushByte(128),s=!1;break}a++,o+=31}r.push(i)}return r.map(i=>te(i.bytes))}function Hl(e){const{data:t,kzg:n,to:r}=e,s=e.blobs??ql({data:t}),o=e.commitments??Li({blobs:s,kzg:n,to:r}),i=e.proofs??_i({blobs:s,commitments:o,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:o[c],proof:i[c]});return a}function Gl(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new sl({transaction:e})}async function Hi(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return qe(t)}const Vl=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Gi=new Map;async function Vi(e,t){const{account:n=e.account,blobs:r,chain:s,gas:o,kzg:i,nonce:a,nonceManager:c,parameters:u=Vl,type:l}=t,d=n&&Te(n),f={...t,...d?{from:d?.address}:{}};let p;async function h(){return p||(p=await q(e,_e,"getBlock")({blockTag:"latest"}),p)}let m;async function b(){return m||(s?s.id:typeof t.chainId<"u"?t.chainId:(m=await q(e,Hi,"getChainId")({}),m))}if(u.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await b();f.nonce=await c.consume({address:d.address,chainId:y,client:e})}else f.nonce=await q(e,Fi,"getTransactionCount")({address:d.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&i){const y=Li({blobs:r,kzg:i});if(u.includes("blobVersionedHashes")){const x=zl({commitments:y,to:"hex"});f.blobVersionedHashes=x}if(u.includes("sidecars")){const x=_i({blobs:r,commitments:y,kzg:i}),w=Hl({blobs:r,commitments:y,proofs:x,to:"hex"});f.sidecars=w}}if(u.includes("chainId")&&(f.chainId=await b()),(u.includes("fees")||u.includes("type"))&&typeof l>"u")try{f.type=Gl(f)}catch{let y=Gi.get(e.uid);typeof y>"u"&&(y=typeof(await h())?.baseFeePerGas=="bigint",Gi.set(e.uid,y)),f.type=y?"eip1559":"legacy"}if(u.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){const y=await h(),{maxFeePerGas:x,maxPriorityFeePerGas:w}=await os(e,{block:y,chain:s,request:f});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<w)throw new Il({maxPriorityFeePerGas:w});f.maxPriorityFeePerGas=w,f.maxFeePerGas=x}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new rs;if(typeof t.gasPrice>"u"){const y=await h(),{gasPrice:x}=await os(e,{block:y,chain:s,request:f,type:"legacy"});f.gasPrice=x}}return u.includes("gas")&&typeof o>"u"&&(f.gas=await q(e,as,"estimateGas")({...f,account:d&&{address:d.address,type:"json-rpc"}})),Sn(f),delete f.parameters,f}async function Zi(e,{address:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?j(n):void 0,o=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(o)}async function as(e,t){const{account:n=e.account}=t,r=n?Te(n):void 0;try{let L=function(E){const{block:v,request:g,rpcStateOverride:A}=E;return e.request({method:"eth_estimateGas",params:A?[g,v??e.experimental_blockTag??"latest",A]:v?[g,v]:[g]})};const{accessList:s,authorizationList:o,blobs:i,blobVersionedHashes:a,blockNumber:c,blockTag:u,data:l,gas:d,gasPrice:f,maxFeePerBlobGas:p,maxFeePerGas:h,maxPriorityFeePerGas:m,nonce:b,value:y,stateOverride:x,...w}=await Vi(e,{...t,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),C=(typeof c=="bigint"?j(c):void 0)||u,T=ns(x),k=await(async()=>{if(w.to)return w.to;if(o&&o.length>0)return await wl({authorization:o[0]}).catch(()=>{throw new P("`to` is required. Could not infer from `authorizationList`")})})();Sn(t);const _=e.chain?.formatters?.transactionRequest?.format,G=(_||er)({...ts(w,{format:_}),from:r?.address,accessList:s,authorizationList:o,blobs:i,blobVersionedHashes:a,data:l,gas:d,gasPrice:f,maxFeePerBlobGas:p,maxFeePerGas:h,maxPriorityFeePerGas:m,nonce:b,to:k,value:y});let R=BigInt(await L({block:C,request:G,rpcStateOverride:T}));if(o){const E=await Zi(e,{address:G.from}),v=await Promise.all(o.map(async g=>{const{address:A}=g,M=await L({block:C,request:{authorizationList:void 0,data:l,from:r?.address,to:A,value:j(E)},rpcStateOverride:T}).catch(()=>100000n);return 2n*BigInt(M)}));R+=v.reduce((g,A)=>g+A,0n)}return R}catch(s){throw xl(s,{...t,account:r,chain:e.chain})}}async function Zl(e,t){const{abi:n,address:r,args:s,functionName:o,dataSuffix:i,...a}=t,c=Le({abi:n,args:s,functionName:o});try{return await q(e,as,"estimateGas")({data:`${c}${i?i.replace("0x",""):""}`,to:r,...a})}catch(u){const l=a.account?Te(a.account):void 0;throw jt(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:l?.address})}}function tr(e,t){if(!we(e,{strict:!1}))throw new st({address:e});if(!we(t,{strict:!1}))throw new st({address:t});return e.toLowerCase()===t.toLowerCase()}const Wi="/docs/contract/decodeEventLog";function cs(e){const{abi:t,data:n,strict:r,topics:s}=e,o=r??!0,[i,...a]=s;if(!i)throw new Fu({docsPath:Wi});const c=t.find(m=>m.type==="event"&&i===Vn(Be(m)));if(!(c&&"name"in c)||c.type!=="event")throw new So(i,{docsPath:Wi});const{name:u,inputs:l}=c,d=l?.some(m=>!("name"in m&&m.name)),f=d?[]:{},p=l.map((m,b)=>[m,b]).filter(([m])=>"indexed"in m&&m.indexed);for(let m=0;m<p.length;m++){const[b,y]=p[m],x=a[m];if(!x)throw new jn({abiItem:c,param:b});f[d?y:b.name||y]=Wl({param:b,value:x})}const h=l.filter(m=>!("indexed"in m&&m.indexed));if(h.length>0){if(n&&n!=="0x")try{const m=an(h,n);if(m)if(d)for(let b=0;b<l.length;b++)f[b]=f[b]??m.shift();else for(let b=0;b<h.length;b++)f[h[b].name]=m[b]}catch(m){if(o)throw m instanceof Io||m instanceof mi?new en({abiItem:c,data:n,params:h,size:Y(n)}):m}else if(o)throw new en({abiItem:c,data:"0x",params:h,size:0})}return{eventName:u,args:Object.values(f).length>0?f:void 0}}function Wl({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(an([e],t)||[])[0]}function us(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,o=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(i=>{try{const a=t.find(u=>u.type==="event"&&i.topics[0]===Vn(u));if(!a)return null;const c=cs({...i,abi:[a],strict:s});return o&&!o.includes(c.eventName)||!Kl({args:c.args,inputs:a.inputs,matchArgs:n})?null:{...c,...i}}catch(a){let c,u;if(a instanceof So)return null;if(a instanceof en||a instanceof jn){if(s)return null;c=a.abiItem.name,u=a.abiItem.inputs?.some(l=>!("name"in l&&l.name))}return{...i,args:u?[]:{},eventName:c}}}).filter(Boolean)}function Kl(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(o,i,a){try{return o.type==="address"?tr(i,a):o.type==="string"||o.type==="bytes"?oe(kt(i))===a:i===a}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((o,i)=>{if(o==null)return!0;const a=n[i];return a?(Array.isArray(o)?o:[o]).some(u=>s(a,u,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([o,i])=>{if(i==null)return!0;const a=n.find(u=>u.name===o);return a?(Array.isArray(i)?i:[i]).some(u=>s(a,u,t[o])):!1}):!1}function Ye(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function fs(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:o,events:i,args:a,strict:c}={}){const u=c??!1,l=i??(o?[o]:void 0);let d=[];l&&(d=[l.flatMap(m=>on({abi:[m],eventName:m.name,args:i?void 0:a}))],o&&(d=d[0]));let f;n?f=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):f=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:typeof r=="bigint"?j(r):r,toBlock:typeof s=="bigint"?j(s):s}]});const p=f.map(h=>Ye(h));return l?us({abi:l,args:a,logs:p,strict:u}):p}async function Ki(e,t){const{abi:n,address:r,args:s,blockHash:o,eventName:i,fromBlock:a,toBlock:c,strict:u}=t,l=i?yt({abi:n,name:i}):void 0,d=l?void 0:n.filter(f=>f.type==="event");return q(e,fs,"getLogs")({address:r,args:s,blockHash:o,event:l,events:d,fromBlock:a,toBlock:c,strict:u})}const ls="/docs/contract/decodeFunctionResult";function ke(e){const{abi:t,args:n,functionName:r,data:s}=e;let o=t[0];if(r){const a=yt({abi:t,args:n,name:r});if(!a)throw new Tt(r,{docsPath:ls});o=a}if(o.type!=="function")throw new Tt(void 0,{docsPath:ls});if(!o.outputs)throw new Co(o.name,{docsPath:ls});const i=an(o.outputs,s);if(i&&i.length>1)return i;if(i&&i.length===1)return i[0]}const Yl="0.1.1";function Xl(){return Yl}class K extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof K){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),s=n.cause instanceof K&&n.cause.docsPath||n.docsPath,i=`https://oxlib.sh${s??""}`,a=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${i}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Xl()}`}),this.cause=n.cause,this.details=r,this.docs=i,this.docsPath=s,this.shortMessage=t}walk(t){return Yi(this,t)}}function Yi(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Yi(e.cause,t):t?null:e}const Jl="#__bigint";function Ql(e,t,n){return JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString()+Jl:s,n)}function ed(e,t){if(Qi(e)>t)throw new fd({givenSize:Qi(e),maxSize:t})}const Xe={zero:48,nine:57,A:65,F:70,a:97,f:102};function Xi(e){if(e>=Xe.zero&&e<=Xe.nine)return e-Xe.zero;if(e>=Xe.A&&e<=Xe.F)return e-(Xe.A-10);if(e>=Xe.a&&e<=Xe.f)return e-(Xe.a-10)}function td(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new ld({size:e.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let o=0;o<r;o++){const i=n==="right";s[i?o:r-o-1]=e[i?o:e.length-o-1]}return s}function ds(e,t){if(ve(e)>t)throw new bd({givenSize:ve(e),maxSize:t})}function nd(e,t){if(typeof t=="number"&&t>0&&t>ve(e)-1)throw new oa({offset:t,position:"start",size:ve(e)})}function rd(e,t,n){if(typeof t=="number"&&typeof n=="number"&&ve(e)!==n-t)throw new oa({offset:n,position:"end",size:ve(e)})}function Ji(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const s=e.replace("0x","");if(s.length>r*2)throw new yd({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const sd=new TextEncoder;function od(e){return e instanceof Uint8Array?e:typeof e=="string"?ad(e):id(e)}function id(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function ad(e,t={}){const{size:n}=t;let r=e;n&&(ds(e,n),r=At(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const o=s.length/2,i=new Uint8Array(o);for(let a=0,c=0;a<o;a++){const u=Xi(s.charCodeAt(c++)),l=Xi(s.charCodeAt(c++));if(u===void 0||l===void 0)throw new K(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);i[a]=u*16+l}return i}function cd(e,t={}){const{size:n}=t,r=sd.encode(e);return typeof n=="number"?(ed(r,n),ud(r,n)):r}function ud(e,t){return td(e,{dir:"right",size:t})}function Qi(e){return e.length}let fd=class extends K{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},ld=class extends K{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const dd=new TextEncoder,pd=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function hd(e,t={}){const{strict:n=!1}=t;if(!e)throw new ra(e);if(typeof e!="string")throw new ra(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new sa(e);if(!e.startsWith("0x"))throw new sa(e)}function Ue(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function ea(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(ds(n,t.size),Et(n,t.size)):n}function ta(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=pd[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(ds(r,t.size),At(r,t.size)):r}function fe(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<i){const u=typeof e=="bigint"?"n":"";throw new na({max:o?`${o}${u}`:void 0,min:`${i}${u}`,signed:n,size:r,value:`${e}${u}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Et(c,r):c}function ps(e,t={}){return ta(dd.encode(e),t)}function Et(e,t){return Ji(e,{dir:"left",size:t})}function At(e,t){return Ji(e,{dir:"right",size:t})}function hs(e,t,n,r={}){const{strict:s}=r;nd(e,t);const o=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return s&&rd(o,t,n),o}function ve(e){return Math.ceil((e.length-2)/2)}function md(e,t={}){const{strict:n=!1}=t;try{return hd(e,{strict:n}),!0}catch{return!1}}class na extends K{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number \`${o}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class ra extends K{constructor(t){super(`Value \`${typeof t=="object"?Ql(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class sa extends K{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class bd extends K{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class oa extends K{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class yd extends K{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function gd(e){return{address:e.address,amount:fe(e.amount),index:fe(e.index),validatorIndex:fe(e.validatorIndex)}}function ia(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:fe(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:fe(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:fe(e.gasLimit)},...typeof e.number=="bigint"&&{number:fe(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:fe(e.prevRandao)},...typeof e.time=="bigint"&&{time:fe(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(gd)}}}const ms=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],bs=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],aa=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],ca=[...aa,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],wd=[...aa,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],ua=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],fa=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],la=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],vd="0x82ad56cb",da="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",xd="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Ed="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class ys extends P{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class pa extends P{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const gs="/docs/contract/encodeDeployData";function ws(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(i=>"type"in i&&i.type==="constructor");if(!s)throw new ku({docsPath:gs});if(!("inputs"in s))throw new $o({docsPath:gs});if(!s.inputs||s.inputs.length===0)throw new $o({docsPath:gs});const o=We(s.inputs,n);return Ft([r,o])}function qt({blockNumber:e,chain:t,contract:n}){const r=t?.contracts?.[n];if(!r)throw new ys({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new ys({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function ha(e,{docsPath:t,...n}){const r=(()=>{const s=es(e,n);return s instanceof Qn?e:s})();return new Bi(r,{docsPath:t,...n})}function ma(){let e=()=>{},t=()=>{};return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}const vs=new Map;function ba({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:s}){const o=async()=>{const l=c();i();const d=l.map(({args:f})=>f);d.length!==0&&e(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let p=0;p<l.length;p++){const{resolve:h}=l[p];h?.([f[p],f])}}).catch(f=>{for(let p=0;p<l.length;p++){const{reject:h}=l[p];h?.(f)}})},i=()=>vs.delete(t),a=()=>c().map(({args:l})=>l),c=()=>vs.get(t)||[],u=l=>vs.set(t,[...c(),l]);return{flush:i,async schedule(l){const{promise:d,resolve:f,reject:p}=ma();return n?.([...a(),l])&&o(),c().length>0?(u({args:l,resolve:f,reject:p}),d):(u({args:l,resolve:f,reject:p}),setTimeout(o,r),d)}}}async function kn(e,t){const{account:n=e.account,authorizationList:r,batch:s=!!e.batch?.multicall,blockNumber:o,blockTag:i=e.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:u,code:l,data:d,factory:f,factoryData:p,gas:h,gasPrice:m,maxFeePerBlobGas:b,maxFeePerGas:y,maxPriorityFeePerGas:x,nonce:w,to:$,value:C,stateOverride:T,...k}=t,_=n?Te(n):void 0;if(l&&(f||p))throw new P("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&$)throw new P("Cannot provide both `code` & `to` as parameters.");const N=l&&d,G=f&&p&&$&&d,L=N||G,R=N?Pd({code:l,data:d}):G?$d({data:d,factory:f,factoryData:p,to:$}):d;try{Sn(t);const v=(typeof o=="bigint"?j(o):void 0)||i,g=u?ia(u):void 0,A=ns(T),M=e.chain?.formatters?.transactionRequest?.format,S=(M||er)({...ts(k,{format:M}),from:_?.address,accessList:a,authorizationList:r,blobs:c,data:R,gas:h,gasPrice:m,maxFeePerBlobGas:b,maxFeePerGas:y,maxPriorityFeePerGas:x,nonce:w,to:L?void 0:$,value:C});if(s&&Ad({request:S})&&!A&&!g)try{return await Bd(e,{...S,blockNumber:o,blockTag:i})}catch(D){if(!(D instanceof pa)&&!(D instanceof ys))throw D}const O=(()=>{const D=[S,v];return A&&g?[...D,A,g]:A?[...D,A]:g?[...D,{},g]:D})(),U=await e.request({method:"eth_call",params:O});return U==="0x"?{data:void 0}:{data:U}}catch(E){const v=Id(E),{offchainLookup:g,offchainLookupSignature:A}=await Promise.resolve().then(()=>N0);if(e.ccipRead!==!1&&v?.slice(0,10)===A&&$)return{data:await g(e,{data:v,to:$})};throw L&&v?.slice(0,10)==="0x101bb98d"?new ul({factory:f}):ha(E,{...t,account:_,chain:e.chain})}}function Ad({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(vd)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Bd(e,t){const{batchSize:n=1024,wait:r=0}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},{blockNumber:s,blockTag:o=e.experimental_blockTag??"latest",data:i,multicallAddress:a,to:c}=t;let u=a;if(!u){if(!e.chain)throw new pa;u=qt({blockNumber:s,chain:e.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?j(s):void 0)||o,{schedule:f}=ba({id:`${e.uid}.${d}`,wait:r,shouldSplitBatch(m){return m.reduce((y,{data:x})=>y+(x.length-2),0)>n*2},fn:async m=>{const b=m.map(w=>({allowFailure:!0,callData:w.data,target:w.to})),y=Le({abi:ms,args:[b],functionName:"aggregate3"}),x=await e.request({method:"eth_call",params:[{data:y,to:u},d]});return ke({abi:ms,args:[b],functionName:"aggregate3",data:x||"0x"})}}),[{returnData:p,success:h}]=await f({data:i,to:c});if(!h)throw new Yn({data:p});return p==="0x"?{data:void 0}:{data:p}}function Pd(e){const{code:t,data:n}=e;return ws({abi:Eo(["constructor(bytes, bytes)"]),bytecode:da,args:[t,n]})}function $d(e){const{data:t,factory:n,factoryData:r,to:s}=e;return ws({abi:Eo(["constructor(address, bytes, address, bytes)"]),bytecode:xd,args:[s,t,n,r]})}function Id(e){if(!(e instanceof P))return;const t=e.walk();return typeof t?.data=="object"?t.data?.data:t.data}async function Je(e,t){const{abi:n,address:r,args:s,functionName:o,...i}=t,a=Le({abi:n,args:s,functionName:o});try{const{data:c}=await q(e,kn,"call")({...i,data:a,to:r});return ke({abi:n,args:s,functionName:o,data:c||"0x"})}catch(c){throw jt(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}async function Nd(e,t){const{abi:n,address:r,args:s,dataSuffix:o,functionName:i,...a}=t,c=a.account?Te(a.account):e.account,u=Le({abi:n,args:s,functionName:i});try{const{data:l}=await q(e,kn,"call")({batch:!1,data:`${u}${o?o.replace("0x",""):""}`,to:r,...a,account:c}),d=ke({abi:n,args:s,functionName:i,data:l||"0x"}),f=n.filter(p=>"name"in p&&p.name===t.functionName);return{result:d,request:{abi:f,address:r,args:s,dataSuffix:o,functionName:i,...a,account:c}}}catch(l){throw jt(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:i,sender:c?.address})}}const xs=new Map,ya=new Map;let Td=0;function at(e,t,n){const r=++Td,s=()=>xs.get(e)||[],o=()=>{const l=s();xs.set(e,l.filter(d=>d.id!==r))},i=()=>{const l=s();if(!l.some(f=>f.id===r))return;const d=ya.get(e);if(l.length===1&&d){const f=d();f instanceof Promise&&f.catch(()=>{})}o()},a=s();if(xs.set(e,[...a,{id:r,fns:t}]),a&&a.length>0)return i;const c={};for(const l in t)c[l]=(...d)=>{const f=s();if(f.length!==0)for(const p of f)p.fns[l]?.(...d)};const u=n(c);return typeof u=="function"&&ya.set(e,u),i}async function Es(e){return new Promise(t=>setTimeout(t,e))}function Cn(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const o=()=>s=!1;return(async()=>{let a;t&&(a=await e({unpoll:o}));const c=await n?.(a)??r;await Es(c);const u=async()=>{s&&(await e({unpoll:o}),await Es(r),u())};u()})(),o}const Sd=new Map,kd=new Map;function Cd(e){const t=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:i=>o.set(s,i)}),n=t(e,Sd),r=t(e,kd);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Md(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Cd(t),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let o=r.promise.get();o||(o=e(),r.promise.set(o));try{const i=await o;return r.response.set({created:new Date,data:i}),i}finally{r.promise.clear()}}const Rd=e=>`blockNumber.${e}`;async function Mn(e,{cacheTime:t=e.cacheTime}={}){const n=await Md(()=>e.request({method:"eth_blockNumber"}),{cacheKey:Rd(e.uid),cacheTime:t});return BigInt(n)}async function nr(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(o=>Ye(o));return!("abi"in t)||!t.abi?s:us({abi:t.abi,logs:s,strict:n})}async function rr(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function Od(e,t){const{abi:n,address:r,args:s,batch:o=!0,eventName:i,fromBlock:a,onError:c,onLogs:u,poll:l,pollingInterval:d=e.pollingInterval,strict:f}=t;return(typeof l<"u"?l:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{const b=f??!1,y=ne(["watchContractEvent",r,s,o,e.uid,i,d,b,a]);return at(y,{onLogs:u,onError:c},x=>{let w;a!==void 0&&(w=a-1n);let $,C=!1;const T=Cn(async()=>{if(!C){try{$=await q(e,fi,"createContractEventFilter")({abi:n,address:r,args:s,eventName:i,strict:b,fromBlock:a})}catch{}C=!0;return}try{let k;if($)k=await q(e,nr,"getFilterChanges")({filter:$});else{const _=await q(e,Mn,"getBlockNumber")({});w&&w<_?k=await q(e,Ki,"getContractEvents")({abi:n,address:r,args:s,eventName:i,fromBlock:w+1n,toBlock:_,strict:b}):k=[],w=_}if(k.length===0)return;if(o)x.onLogs(k);else for(const _ of k)x.onLogs([_])}catch(k){$&&k instanceof vt&&(C=!1),x.onError?.(k)}},{emitOnBegin:!0,interval:d});return async()=>{$&&await q(e,rr,"uninstallFilter")({filter:$}),T()}})})():(()=>{const b=f??!1,y=ne(["watchContractEvent",r,s,o,e.uid,i,d,b]);let x=!0,w=()=>x=!1;return at(y,{onLogs:u,onError:c},$=>((async()=>{try{const C=(()=>{if(e.transport.type==="fallback"){const _=e.transport.transports.find(N=>N.config.type==="webSocket"||N.config.type==="ipc");return _?_.value:e.transport}return e.transport})(),T=i?on({abi:n,eventName:i,args:s}):[],{unsubscribe:k}=await C.subscribe({params:["logs",{address:r,topics:T}],onData(_){if(!x)return;const N=_.result;try{const{eventName:G,args:L}=cs({abi:n,data:N.data,topics:N.topics,strict:f}),R=Ye(N,{args:L,eventName:G});$.onLogs([R])}catch(G){let L,R;if(G instanceof en||G instanceof jn){if(f)return;L=G.abiItem.name,R=G.abiItem.inputs?.some(v=>!("name"in v&&v.name))}const E=Ye(N,{args:R?[]:{},eventName:L});$.onLogs([E])}},onError(_){$.onError?.(_)}});w=k,x||w()}catch(C){c?.(C)}})(),()=>w()))})()}async function Fd(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}function As(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,o)=>{const i=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof t=="function"?t({count:a,error:u}):t;l&&await Es(l),i({count:a+1})};try{const u=await e();s(u)}catch(u){if(a<n&&await r({count:a,error:u}))return c({error:u});o(u)}};i()})}const Ld={"0x0":"reverted","0x1":"success"};function _d(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(n=>Ye(n)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?qe(e.transactionIndex):null,status:e.status?Ld[e.status]:null,type:e.type?Ci[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}const Bs=256;let sr=Bs,or;function ga(e=11){if(!or||sr+e>Bs*2){or="",sr=0;for(let t=0;t<Bs;t++)or+=(256+Math.random()*256|0).toString(16).substring(1)}return or.substring(sr,sr+++e)}function Ud(e){const{batch:t,chain:n,ccipRead:r,key:s="base",name:o="Base Client",type:i="base"}=e,a=e.experimental_blockTag??(typeof n?.experimental_preconfirmationTime=="number"?"pending":void 0),c=n?.blockTime??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),l=e.pollingInterval??u,d=e.cacheTime??l,f=e.account?Te(e.account):void 0,{config:p,request:h,value:m}=e.transport({chain:n,pollingInterval:l}),b={...p,...m},y={account:f,batch:t,cacheTime:d,ccipRead:r,chain:n,key:s,name:o,pollingInterval:l,request:h,transport:b,type:i,uid:ga(),...a?{experimental_blockTag:a}:{}};function x(w){return $=>{const C=$(w);for(const k in y)delete C[k];const T={...w,...C};return Object.assign(T,{extend:x(T)})}}return Object.assign(y,{extend:x(y)})}const ir=new Or(8192);function zd(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(ir.get(n))return ir.get(n);const r=e().finally(()=>ir.delete(n));return ir.set(n,r),r}function jd(e,t={}){return async(n,r={})=>{const{dedupe:s=!1,methods:o,retryDelay:i=150,retryCount:a=3,uid:c}={...t,...r},{method:u}=n;if(o?.exclude?.includes(u))throw new xt(new Error("method not supported"),{method:u});if(o?.include&&!o.include.includes(u))throw new xt(new Error("method not supported"),{method:u});const l=s?tn(`${c}.${ne(n)}`):void 0;return zd(()=>As(async()=>{try{return await e(n)}catch(d){const f=d;switch(f.code){case fn.code:throw new fn(f);case ln.code:throw new ln(f);case dn.code:throw new dn(f,{method:n.method});case pn.code:throw new pn(f);case wt.code:throw new wt(f);case vt.code:throw new vt(f);case hn.code:throw new hn(f);case mn.code:throw new mn(f);case bn.code:throw new bn(f);case xt.code:throw new xt(f,{method:n.method});case Ut.code:throw new Ut(f);case yn.code:throw new yn(f);case zt.code:throw new zt(f);case gn.code:throw new gn(f);case wn.code:throw new wn(f);case vn.code:throw new vn(f);case xn.code:throw new xn(f);case En.code:throw new En(f);case An.code:throw new An(f);case Bn.code:throw new Bn(f);case Pn.code:throw new Pn(f);case $n.code:throw new $n(f);case In.code:throw new In(f);case Nn.code:throw new Nn(f);case Tn.code:throw new Tn(f);case 5e3:throw new zt(f);default:throw d instanceof P?d:new ll(f)}}},{delay:({count:d,error:f})=>{if(f&&f instanceof gt){const p=f?.headers?.get("Retry-After");if(p?.match(/\d/))return Number.parseInt(p)*1e3}return~~(1<<d)*i},retryCount:a,shouldRetry:({error:d})=>Dd(d)}),{enabled:s,id:l})}}function Dd(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===Ut.code||e.code===wt.code:e instanceof gt&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function qd({key:e,methods:t,name:n,request:r,retryCount:s=3,retryDelay:o=150,timeout:i,type:a},c){const u=ga();return{config:{key:e,methods:t,name:n,request:r,retryCount:s,retryDelay:o,timeout:i,type:a},request:jd(r,{methods:t,retryCount:s,retryDelay:o,uid:u}),value:c}}class Hd extends P{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Gd(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,o)=>{(async()=>{let i;try{const a=new AbortController;n>0&&(i=setTimeout(()=>{r&&a.abort()},n)),s(await e({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&o(t),o(a)}finally{clearTimeout(i)}})()})}function Vd(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const wa=Vd();function Zd(e,t={}){return{async request(n){const{body:r,onRequest:s=t.onRequest,onResponse:o=t.onResponse,timeout:i=t.timeout??1e4}=n,a={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:u,signal:l}=a;try{const d=await Gd(async({signal:p})=>{const h={...a,body:Array.isArray(r)?ne(r.map(x=>({jsonrpc:"2.0",id:x.id??wa.take(),...x}))):ne({jsonrpc:"2.0",id:r.id??wa.take(),...r}),headers:{"Content-Type":"application/json",...c},method:u||"POST",signal:l||(i>0?p:null)},m=new Request(e,h),b=await s?.(m,h)??{...h,url:e};return await fetch(b.url??e,b)},{errorInstance:new Pi({body:r,url:e}),timeout:i,signal:!0});o&&await o(d);let f;if(d.headers.get("Content-Type")?.startsWith("application/json"))f=await d.json();else{f=await d.text();try{f=JSON.parse(f||"{}")}catch(p){if(d.ok)throw p;f={error:f}}}if(!d.ok)throw new gt({body:r,details:ne(f.error)||d.statusText,headers:d.headers,status:d.status,url:e});return f}catch(d){throw d instanceof gt||d instanceof Pi?d:new gt({body:r,cause:d,url:e})}}}}function Wd(e,t={}){const{batch:n,fetchOptions:r,key:s="http",methods:o,name:i="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:u,raw:l}=t;return({chain:d,retryCount:f,timeout:p})=>{const{batchSize:h=1e3,wait:m=0}=typeof n=="object"?n:{},b=t.retryCount??f,y=p??t.timeout??1e4,x=d?.rpcUrls.default.http[0];if(!x)throw new Hd;const w=Zd(x,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return qd({key:s,methods:o,name:i,async request({method:$,params:C}){const T={method:$,params:C},{schedule:k}=ba({id:x,wait:m,shouldSplitBatch(L){return L.length>h},fn:L=>w.request({body:L}),sort:(L,R)=>L.id-R.id}),_=async L=>n?k(L):[await w.request({body:L})],[{error:N,result:G}]=await _(T);if(l)return{error:N,result:G};if(N)throw new Gr({body:T,error:N,url:x});return G},retryCount:b,retryDelay:u,timeout:y,type:"http"},{fetchOptions:r,url:x})}}function Ps(e,t){if(!(e instanceof P))return!1;const n=e.walk(r=>r instanceof Hr);return n instanceof Hr?!!(n.data?.errorName==="ResolverNotFound"||n.data?.errorName==="ResolverWildcardNotSupported"||n.data?.errorName==="ResolverNotContract"||n.data?.errorName==="ResolverError"||n.data?.errorName==="HttpError"||n.reason?.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&n.reason===di[50]):!1}function Bt(e){const{abi:t,data:n}=e,r=Lt(n,0,4),s=t.find(o=>o.type==="function"&&r===sn(Be(o)));if(!s)throw new Lu(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?an(s.inputs,Lt(n,4)):void 0}}const $s="/docs/contract/encodeErrorResult";function va(e){const{abi:t,errorName:n,args:r}=e;let s=t[0];if(n){const c=yt({abi:t,args:r,name:n});if(!c)throw new No(n,{docsPath:$s});s=c}if(s.type!=="error")throw new No(void 0,{docsPath:$s});const o=Be(s),i=sn(o);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Ou(s.name,{docsPath:$s});a=We(s.inputs,r)}return Ft([i,a])}const Is="/docs/contract/encodeFunctionResult";function ct(e){const{abi:t,functionName:n,result:r}=e;let s=t[0];if(n){const i=yt({abi:t,name:n});if(!i)throw new Tt(n,{docsPath:Is});s=i}if(s.type!=="function")throw new Tt(void 0,{docsPath:Is});if(!s.outputs)throw new Co(s.name,{docsPath:Is});const o=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new Mo(r)})();return We(s.outputs,o)}const ar="x-batch-gateway:true";async function xa(e){const{data:t,ccipRequest:n}=e,{args:[r]}=Bt({abi:bs,data:t}),s=[],o=[];return await Promise.all(r.map(async(i,a)=>{try{o[a]=i.urls.includes(ar)?await xa({data:i.data,ccipRequest:n}):await n(i),s[a]=!1}catch(c){s[a]=!0,o[a]=Kd(c)}})),ct({abi:bs,functionName:"query",result:[s,o]})}function Kd(e){return e.name==="HttpRequestError"&&e.status?va({abi:bs,errorName:"HttpError",args:[e.status,e.shortMessage]}):va({abi:[pi],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}function Ea(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return Pe(t)?t:null}function cr(e){let t=new Uint8Array(32).fill(0);if(!e)return te(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=Ea(n[r]),o=s?kt(s):oe(bt(n[r]),"bytes");t=oe(Ne([t,o]),"bytes")}return te(t)}function Yd(e){return`[${e.slice(2)}]`}function Xd(e){const t=new Uint8Array(32).fill(0);return e?Ea(e)||oe(bt(e)):te(t)}function ur(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(bt(t).byteLength+2);let r=0;const s=t.split(".");for(let o=0;o<s.length;o++){let i=bt(s[o]);i.byteLength>255&&(i=bt(Yd(Xd(s[o])))),n[r]=i.length,n.set(i,r+1),r+=i.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function Jd(e,t){const{blockNumber:n,blockTag:r,coinType:s,name:o,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return qt({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c?.ensTlds;if(l&&!l.some(d=>o.endsWith(d)))return null;try{const d=Le({abi:fa,functionName:"addr",...s!=null?{args:[cr(o),BigInt(s)]}:{args:[cr(o)]}}),f={address:u,abi:ca,functionName:"resolve",args:[He(ur(o)),d,i??[ar]],blockNumber:n,blockTag:r},h=await q(e,Je,"readContract")(f);if(h[0]==="0x")return null;const m=ke({abi:fa,args:s!=null?[cr(o),BigInt(s)]:void 0,functionName:"addr",data:h[0]});return m==="0x"||mt(m)==="0x00"?null:m}catch(d){if(a)throw d;if(Ps(d,"resolve"))return null;throw d}}class Qd extends P{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class Rn extends P{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class Ns extends P{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class e0 extends P{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const t0=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,n0=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,r0=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,s0=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function o0(e){try{const t=await fetch(e,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function Aa(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Ba({uri:e,gatewayUrls:t}){const n=r0.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=Aa(t?.ipfs,"https://ipfs.io"),s=Aa(t?.arweave,"https://arweave.net"),o=e.match(t0),{protocol:i,subpath:a,target:c,subtarget:u=""}=o?.groups||{},l=i==="ipns:/"||a==="ipns/",d=i==="ipfs:/"||a==="ipfs/"||n0.test(e);if(e.startsWith("http")&&!l&&!d){let p=e;return t?.arweave&&(p=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:p,isOnChain:!1,isEncoded:!1}}if((l||d)&&c)return{uri:`${r}/${l?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let f=e.replace(s0,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new Ns({uri:e})}function Pa(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new Qd({data:e});return e.image||e.image_url||e.image_data}async function i0({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await Ts({gatewayUrls:e,uri:Pa(n)})}catch{throw new Ns({uri:t})}}async function Ts({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=Ba({uri:t,gatewayUrls:e});if(r||await o0(n))return n;throw new Ns({uri:t})}function a0(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[o,i]=n.split(":"),[a,c]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new Rn({reason:"Only EIP-155 supported"});if(!i)throw new Rn({reason:"Chain ID not found"});if(!c)throw new Rn({reason:"Contract address not found"});if(!s)throw new Rn({reason:"Token ID not found"});if(!a)throw new Rn({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function c0(e,{nft:t}){if(t.namespace==="erc721")return Je(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return Je(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new e0({namespace:t.namespace})}async function u0(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?f0(e,{gatewayUrls:t,record:n}):Ts({uri:n,gatewayUrls:t})}async function f0(e,{gatewayUrls:t,record:n}){const r=a0(n),s=await c0(e,{nft:r}),{uri:o,isOnChain:i,isEncoded:a}=Ba({uri:s,gatewayUrls:t});if(i&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const u=a?atob(o.replace("data:application/json;base64,","")):o,l=JSON.parse(u);return Ts({uri:Pa(l),gatewayUrls:t})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),i0({gatewayUrls:t,uri:o.replace(/(?:0x)?{id}/,c)})}async function $a(e,t){const{blockNumber:n,blockTag:r,key:s,name:o,gatewayUrls:i,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return qt({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c?.ensTlds;if(l&&!l.some(d=>o.endsWith(d)))return null;try{const d={address:u,abi:ca,functionName:"resolve",args:[He(ur(o)),Le({abi:ua,functionName:"text",args:[cr(o),s]}),i??[ar]],blockNumber:n,blockTag:r},p=await q(e,Je,"readContract")(d);if(p[0]==="0x")return null;const h=ke({abi:ua,functionName:"text",data:p[0]});return h===""?null:h}catch(d){if(a)throw d;if(Ps(d,"resolve"))return null;throw d}}async function l0(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:o,strict:i,universalResolverAddress:a}){const c=await q(e,$a,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:o,strict:i});if(!c)return null;try{return await u0(e,{record:c,gatewayUrls:r})}catch{return null}}async function d0(e,{address:t,blockNumber:n,blockTag:r,gatewayUrls:s,strict:o,universalResolverAddress:i}){let a=i;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=qt({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const c=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const u={address:a,abi:wd,functionName:"reverse",args:[He(ur(c))],blockNumber:n,blockTag:r},l=q(e,Je,"readContract"),[d,f]=s?await l({...u,args:[...u.args,s]}):await l(u);return t.toLowerCase()!==f.toLowerCase()?null:d}catch(u){if(o)throw u;if(Ps(u,"reverse"))return null;throw u}}async function p0(e,t){const{blockNumber:n,blockTag:r,name:s}=t,{chain:o}=e,i=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!o)throw new Error("client chain not configured. universalResolverAddress is required.");return qt({blockNumber:n,chain:o,contract:"ensUniversalResolver"})})(),a=o?.ensTlds;if(a&&!a.some(u=>s.endsWith(u)))throw new Error(`${s} is not a valid ENS TLD (${a?.join(", ")}) for chain "${o.name}" (id: ${o.id}).`);const[c]=await q(e,Je,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[He(ur(s))],blockNumber:n,blockTag:r});return c}async function Ia(e,t){const{account:n=e.account,blockNumber:r,blockTag:s="latest",blobs:o,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:d,to:f,value:p,...h}=t,m=n?Te(n):void 0;try{Sn(t);const y=(typeof r=="bigint"?j(r):void 0)||s,x=e.chain?.formatters?.transactionRequest?.format,$=(x||er)({...ts(h,{format:x}),from:m?.address,blobs:o,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:d,to:f,value:p}),C=await e.request({method:"eth_createAccessList",params:[$,y]});return{accessList:C.accessList,gasUsed:BigInt(C.gasUsed)}}catch(b){throw ha(b,{...t,account:m,chain:e.chain})}}async function h0(e){const t=Wn(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function Na(e,{address:t,args:n,event:r,events:s,fromBlock:o,strict:i,toBlock:a}={}){const c=s??(r?[r]:void 0),u=Wn(e,{method:"eth_newFilter"});let l=[];c&&(l=[c.flatMap(p=>on({abi:[p],eventName:p.name,args:n}))],r&&(l=l[0]));const d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof o=="bigint"?j(o):o,toBlock:typeof a=="bigint"?j(a):a,...l.length?{topics:l}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:o,id:d,request:u(d),strict:!!i,toBlock:a,type:"event"}}async function Ta(e){const t=Wn(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function m0(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function b0(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?j(n):void 0;let o;return t?o=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):o=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),qe(o)}async function Sa(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?j(n):void 0,o=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(o!=="0x")return o}class y0 extends P{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function g0(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[o,i,a,c,u,l,d]=await q(e,Je,"readContract")({abi:w0,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:i,version:a,chainId:Number(c),verifyingContract:u,salt:l},extensions:d,fields:o}}catch(o){const i=o;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new y0({address:n}):i}}const w0=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function v0(e){return{baseFeePerGas:e.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(t=>t.map(n=>BigInt(n)))}}async function x0(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const o=typeof n=="bigint"?j(n):void 0,i=await e.request({method:"eth_feeHistory",params:[j(t),o||r,s]},{dedupe:!!o});return v0(i)}async function E0(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(o=>Ye(o));return t.abi?us({abi:t.abi,logs:s,strict:n}):s}class A0 extends P{constructor({callbackSelector:t,cause:n,data:r,extraData:s,sender:o,urls:i}){super(n.shortMessage||"An error occurred while fetching for an offchain result.",{cause:n,metaMessages:[...n.metaMessages||[],n.metaMessages?.length?"":[],"Offchain Gateway Call:",i&&["  Gateway URL(s):",...i.map(a=>`    ${un(a)}`)],`  Sender: ${o}`,`  Data: ${r}`,`  Callback selector: ${t}`,`  Extra data: ${s}`].flat(),name:"OffchainLookupError"})}}class B0 extends P{constructor({result:t,url:n}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${un(n)}`,`Response: ${ne(t)}`],name:"OffchainLookupResponseMalformedError"})}}class P0 extends P{constructor({sender:t,to:n}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${n}`,`OffchainLookup sender address: ${t}`],name:"OffchainLookupSenderMismatchError"})}}const $0="0x556f1830",ka={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function I0(e,{blockNumber:t,blockTag:n,data:r,to:s}){const{args:o}=yi({data:r,abi:[ka]}),[i,a,c,u,l]=o,{ccipRead:d}=e,f=d&&typeof d?.request=="function"?d.request:Ca;try{if(!tr(s,i))throw new P0({sender:i,to:s});const p=a.includes(ar)?await xa({data:c,ccipRequest:f}):await f({data:c,sender:i,urls:a}),{data:h}=await kn(e,{blockNumber:t,blockTag:n,data:Ne([u,We([{type:"bytes"},{type:"bytes"}],[p,l])]),to:s});return h}catch(p){throw new A0({callbackSelector:u,cause:p,data:r,extraData:l,sender:i,urls:a})}}async function Ca({data:e,sender:t,urls:n}){let r=new Error("An unknown error occurred.");for(let s=0;s<n.length;s++){const o=n[s],i=o.includes("{data}")?"GET":"POST",a=i==="POST"?{data:e,sender:t}:void 0,c=i==="POST"?{"Content-Type":"application/json"}:{};try{const u=await fetch(o.replace("{sender}",t.toLowerCase()).replace("{data}",e),{body:JSON.stringify(a),headers:c,method:i});let l;if(u.headers.get("Content-Type")?.startsWith("application/json")?l=(await u.json()).data:l=await u.text(),!u.ok){r=new gt({body:a,details:l?.error?ne(l.error):u.statusText,headers:u.headers,status:u.status,url:o});continue}if(!Pe(l)){r=new B0({result:l,url:o});continue}return l}catch(u){r=new gt({body:a,details:u.message,url:o})}}throw r}const N0=Object.freeze(Object.defineProperty({__proto__:null,ccipRequest:Ca,offchainLookup:I0,offchainLookupAbiItem:ka,offchainLookupSignature:$0},Symbol.toStringTag,{value:"Module"}));function T0(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}class S0 extends P{constructor({domain:t}){super(`Invalid domain "${ne(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class k0 extends P{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class C0 extends P{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function M0(e){const{domain:t={},message:n,primaryType:r}=e,s={EIP712Domain:_0({domain:t}),...e.types};L0({domain:t,message:n,primaryType:r,types:s});const o=["0x1901"];return t&&o.push(R0({domain:t,types:s})),r!=="EIP712Domain"&&o.push(Ma({data:n,primaryType:r,types:s})),oe(Ne(o))}function R0({domain:e,types:t}){return Ma({data:e,primaryType:"EIP712Domain",types:t})}function Ma({data:e,primaryType:t,types:n}){const r=Ra({data:e,primaryType:t,types:n});return oe(r)}function Ra({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[O0({primaryType:t,types:n})];for(const o of n[t]){const[i,a]=Fa({types:n,name:o.name,type:o.type,value:e[o.name]});r.push(i),s.push(a)}return We(r,s)}function O0({primaryType:e,types:t}){const n=He(F0({primaryType:e,types:t}));return oe(n)}function F0({primaryType:e,types:t}){let n="";const r=Oa({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const o of s)n+=`${o}(${t[o].map(({name:i,type:a})=>`${a} ${i}`).join(",")})`;return n}function Oa({primaryType:e,types:t},n=new Set){const s=e.match(/^\w*/u)?.[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const o of t[s])Oa({primaryType:o.type,types:t},n);return n}function Fa({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},oe(Ra({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},oe(r)];if(n==="string")return[{type:"bytes32"},oe(He(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),o=r.map(i=>Fa({name:t,type:s,types:e,value:i}));return[{type:"bytes32"},oe(We(o.map(([i])=>i),o.map(([,i])=>i)))]}return[{type:n},r]}function L0(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(i,a)=>{for(const c of i){const{name:u,type:l}=c,d=a[u],f=l.match(ii);if(f&&(typeof d=="number"||typeof d=="bigint")){const[m,b,y]=f;j(d,{signed:b==="int",size:Number.parseInt(y)/8})}if(l==="address"&&typeof d=="string"&&!we(d))throw new st({address:d});const p=l.match(Tf);if(p){const[m,b]=p;if(b&&Y(d)!==Number.parseInt(b))throw new Uu({expectedSize:Number.parseInt(b),givenSize:Y(d)})}const h=s[l];h&&(U0(l),o(h,d))}};if(s.EIP712Domain&&t){if(typeof t!="object")throw new S0({domain:t});o(s.EIP712Domain,t)}if(r!=="EIP712Domain")if(s[r])o(s[r],n);else throw new k0({primaryType:r,types:s})}function _0({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},(typeof e?.chainId=="number"||typeof e?.chainId=="bigint")&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function U0(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new C0({type:e})}const z0=`Ethereum Signed Message:
`;function j0(e){const t=typeof e=="string"?tn(e):typeof e.raw=="string"?e.raw:te(e.raw),n=tn(`${z0}${Y(t)}`);return Ne([n,t])}function La(e,t){return oe(j0(e),t)}const _a="0x6492649264926492649264926492649264926492649264926492649264926492";function D0(e){return oi(e,-32)===_a}function q0(e){const{address:t,data:n,signature:r,to:s="hex"}=e,o=Ft([We([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),_a]);return s==="hex"?o:Ie(o)}function H0(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function G0(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?qe(e.nonce):void 0,storageProof:e.storageProof?H0(e.storageProof):void 0}}async function V0(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const o=r??"latest",i=n!==void 0?j(n):void 0,a=await e.request({method:"eth_getProof",params:[t,s,i||o]});return G0(a)}async function Z0(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const o=n!==void 0?j(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,o||r]})}async function Ss(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){const i=r||"latest",a=n!==void 0?j(n):void 0;let c=null;if(s?c=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,j(o)]},{dedupe:!0}):c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||i,j(o)]},{dedupe:!!a}),!c)throw new Ei({blockHash:t,blockNumber:n,blockTag:i,hash:s,index:o});return(e.chain?.formatters?.transaction?.format||Mi)(c)}async function W0(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([q(e,Mn,"getBlockNumber")({}),t?q(e,Ss,"getTransaction")({hash:t}):void 0]),o=n?.blockNumber||s?.blockNumber;return o?r-o+1n:0n}async function fr(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new Ai({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||_d)(n)}async function K0(e,t){const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:o,blockTag:i,multicallAddress:a,stateOverride:c}=t,u=t.contracts,l=s??(typeof e.batch?.multicall=="object"&&e.batch.multicall.batchSize||1024);let d=a;if(!d){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");d=qt({blockNumber:o,chain:e.chain,contract:"multicall3"})}const f=[[]];let p=0,h=0;for(let y=0;y<u.length;y++){const{abi:x,address:w,args:$,functionName:C}=u[y];try{const T=Le({abi:x,args:$,functionName:C});h+=(T.length-2)/2,l>0&&h>l&&f[p].length>0&&(p++,h=(T.length-2)/2,f[p]=[]),f[p]=[...f[p],{allowFailure:!0,callData:T,target:w}]}catch(T){const k=jt(T,{abi:x,address:w,args:$,docsPath:"/docs/contract/multicall",functionName:C,sender:n});if(!r)throw k;f[p]=[...f[p],{allowFailure:!0,callData:"0x",target:w}]}}const m=await Promise.allSettled(f.map(y=>q(e,Je,"readContract")({abi:ms,account:n,address:d,args:[y],blockNumber:o,blockTag:i,functionName:"aggregate3",stateOverride:c}))),b=[];for(let y=0;y<m.length;y++){const x=m[y];if(x.status==="rejected"){if(!r)throw x.reason;for(let $=0;$<f[y].length;$++)b.push({status:"failure",error:x.reason,result:void 0});continue}const w=x.value;for(let $=0;$<w.length;$++){const{returnData:C,success:T}=w[$],{callData:k}=f[y][$],{abi:_,address:N,functionName:G,args:L}=u[b.length];try{if(k==="0x")throw new Qt;if(!T)throw new Yn({data:C});const R=ke({abi:_,args:L,data:C,functionName:G});b.push(r?{result:R,status:"success"}:R)}catch(R){const E=jt(R,{abi:_,address:N,args:L,docsPath:"/docs/contract/multicall",functionName:G});if(!r)throw E;b.push({error:E,result:void 0,status:"failure"})}}}if(b.length!==u.length)throw new P("multicall results mismatch");return b}async function ks(e,t){const{blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",blocks:s,returnFullTransactions:o,traceTransfers:i,validation:a}=t;try{const c=[];for(const f of s){const p=f.blockOverrides?ia(f.blockOverrides):void 0,h=f.calls.map(b=>{const y=b,x=y.account?Te(y.account):void 0,w=y.abi?Le(y):y.data,$={...y,data:y.dataSuffix?Ne([w||"0x",y.dataSuffix]):w,from:y.from??x?.address};return Sn($),er($)}),m=f.stateOverrides?ns(f.stateOverrides):void 0;c.push({blockOverrides:p,calls:h,stateOverrides:m})}const l=(typeof n=="bigint"?j(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:o,traceTransfers:i,validation:a},l]})).map((f,p)=>({...Ri(f),calls:f.calls.map((h,m)=>{const{abi:b,args:y,functionName:x,to:w}=s[p].calls[m],$=h.error?.data??h.returnData,C=BigInt(h.gasUsed),T=h.logs?.map(G=>Ye(G)),k=h.status==="0x1"?"success":"failure",_=b&&k==="success"&&$!=="0x"?ke({abi:b,data:$,functionName:x}):null,N=(()=>{if(k==="success")return;let G;if(h.error?.data==="0x"?G=new Qt:h.error&&(G=new Yn(h.error)),!!G)return jt(G,{abi:b??[],address:w??"0x",args:y,functionName:x??"<unknown>"})})();return{data:$,gasUsed:C,logs:T,status:k,...k==="success"?{result:_}:{error:N}}})}))}catch(c){const u=c,l=es(u,{});throw l instanceof Qn?u:l}}function Ua(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=ei(od(e));return n==="Bytes"?r:ta(r)}class Y0 extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Cs={checksum:new Y0(8192)}.checksum,X0=/^0x[a-fA-F0-9]{40}$/;function lr(e,t={}){const{strict:n=!0}=t;if(!X0.test(e))throw new za({address:e,cause:new Q0});if(n){if(e.toLowerCase()===e)return;if(J0(e)!==e)throw new za({address:e,cause:new ep})}}function J0(e){if(Cs.has(e))return Cs.get(e);lr(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=Ua(cd(t),{as:"Bytes"}),r=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const s=`0x${r.join("")}`;return Cs.set(e,s),s}function Ms(e,t={}){const{strict:n=!0}=t??{};try{return lr(e,{strict:n}),!0}catch{return!1}}class za extends K{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Q0 extends K{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class ep extends K{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function Rs(e){let t=!0,n="",r=0,s="",o=!1;for(let i=0;i<e.length;i++){const a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&r++,a===")"&&r--,!!t){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){o=!0;break}continue}if(a===" "){e[i-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=a,n+=a}}if(!o)throw new K("Unable to normalize signature.");return s}function Os(e,t){const n=typeof e,r=t.type;switch(r){case"address":return Ms(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>Os(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>Os(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function ja(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return ja(s.components,o.components,n[r]);const i=[s.type,o.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?Ms(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?Ms(n[r],{strict:!1}):!1)return i}}function Da(e,t={}){const{prepare:n=!0}=t,r=Array.isArray(e)||typeof e=="string"?Ao(e):e;return{...r,...n?{hash:Ht(r)}:{}}}function tp(e,t,n){const{args:r=[],prepare:s=!0}=n??{},o=md(t,{strict:!1}),i=e.filter(u=>o?u.type==="function"||u.type==="error"?qa(u)===hs(t,0,4):u.type==="event"?Ht(u)===t:!1:"name"in u&&u.name===t);if(i.length===0)throw new Fs({name:t});if(i.length===1)return{...i[0],...s?{hash:Ht(i[0])}:{}};let a;for(const u of i){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...s?{hash:Ht(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((d,f)=>{const p="inputs"in u&&u.inputs[f];return p?Os(d,p):!1})){if(a&&"inputs"in a&&a.inputs){const d=ja(u.inputs,a.inputs,r);if(d)throw new rp({abiItem:u,type:d[0]},{abiItem:a,type:d[1]})}a=u}}const c=(()=>{if(a)return a;const[u,...l]=i;return{...u,overloads:l}})();if(!c)throw new Fs({name:t});return{...c,...s?{hash:Ht(c)}:{}}}function qa(e){return hs(Ht(e),0,4)}function np(e){const t=typeof e=="string"?e:Un(e);return Rs(t)}function Ht(e){return typeof e!="string"&&"hash"in e&&e.hash?e.hash:Ua(ps(np(e)))}class rp extends K{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${Rs(Un(t.abiItem))}\`, and`,`\`${n.type}\` in \`${Rs(Un(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Fs extends K{constructor({name:t,data:n,type:r="item"}){const s=t?` with name "${t}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const sp=/^(.*)\[([0-9]*)\]$/,op=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ha=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function ip({checksumAddress:e,parameters:t,values:n}){const r=[];for(let s=0;s<t.length;s++)r.push(Ls({checksumAddress:e,parameter:t[s],value:n[s]}));return r}function Ls({checksumAddress:e=!1,parameter:t,value:n}){const r=t,s=hp(r.type);if(s){const[o,i]=s;return cp(n,{checksumAddress:e,length:o,parameter:{...r,type:i}})}if(r.type==="tuple")return pp(n,{checksumAddress:e,parameter:r});if(r.type==="address")return ap(n,{checksum:e});if(r.type==="bool")return fp(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const o=r.type.startsWith("int"),[,,i="256"]=Ha.exec(r.type)??[];return lp(n,{signed:o,size:Number(i)})}if(r.type.startsWith("bytes"))return up(n,{type:r.type});if(r.type==="string")return dp(n);throw new Wa(r.type)}function _s(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?t+=32:t+=ve(a)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?(n.push(fe(t+s,{size:32})),r.push(a),s+=ve(a)):n.push(a)}return Ue(...n,...r)}function ap(e,t){const{checksum:n=!1}=t;return lr(e,{strict:n}),{dynamic:!1,encoded:Et(e.toLowerCase())}}function cp(e,t){const{checksumAddress:n,length:r,parameter:s}=t,o=r===null;if(!Array.isArray(e))throw new bp(e);if(!o&&e.length!==r)throw new mp({expectedLength:r,givenLength:e.length,type:`${s.type}[${r}]`});let i=!1;const a=[];for(let c=0;c<e.length;c++){const u=Ls({checksumAddress:n,parameter:s,value:e[c]});u.dynamic&&(i=!0),a.push(u)}if(o||i){const c=_s(a);if(o){const u=fe(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Ue(u,c):u}}if(i)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Ue(...a.map(({encoded:c})=>c))}}function up(e,{type:t}){const[,n]=t.split("bytes"),r=ve(e);if(!n){let s=e;return r%32!==0&&(s=At(s,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:Ue(Et(fe(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new Va({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:At(e)}}function fp(e){if(typeof e!="boolean")throw new K(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Et(ea(e))}}function lp(e,{signed:t,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new na({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:fe(e,{size:32,signed:t})}}function dp(e){const t=ps(e),n=Math.ceil(ve(t)/32),r=[];for(let s=0;s<n;s++)r.push(At(hs(t,s*32,(s+1)*32)));return{dynamic:!0,encoded:Ue(At(fe(ve(t),{size:32})),...r)}}function pp(e,t){const{checksumAddress:n,parameter:r}=t;let s=!1;const o=[];for(let i=0;i<r.components.length;i++){const a=r.components[i],c=Array.isArray(e)?i:a.name,u=Ls({checksumAddress:n,parameter:a,value:e[c]});o.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?_s(o):Ue(...o.map(({encoded:i})=>i))}}function hp(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function Ga(e,t,n){const{checksumAddress:r=!1}={};if(e.length!==t.length)throw new Za({expectedLength:e.length,givenLength:t.length});const s=ip({checksumAddress:r,parameters:e,values:t}),o=_s(s);return o.length===0?"0x":o}function Us(e,t){if(e.length!==t.length)throw new Za({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],o=t[r];n.push(Us.encode(s,o))}return Ue(...n)}(function(e){function t(n,r,s=!1){if(n==="address"){const c=r;return lr(c),Et(c.toLowerCase(),s?32:0)}if(n==="string")return ps(r);if(n==="bytes")return r;if(n==="bool")return Et(ea(r),s?32:1);const o=n.match(Ha);if(o){const[c,u,l="256"]=o,d=Number.parseInt(l)/8;return fe(r,{size:s?32:d,signed:u==="int"})}const i=n.match(op);if(i){const[c,u]=i;if(Number.parseInt(u)!==(r.length-2)/2)throw new Va({expectedSize:Number.parseInt(u),value:r});return At(r,s?32:0)}const a=n.match(sp);if(a&&Array.isArray(r)){const[c,u]=a,l=[];for(let d=0;d<r.length;d++)l.push(t(u,r[d],!0));return l.length===0?"0x":Ue(...l)}throw new Wa(n)}e.encode=t})(Us||(Us={}));class mp extends K{constructor({expectedLength:t,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class Va extends K{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${ve(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Za extends K{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class bp extends K{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class Wa extends K{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function yp(e,t){const{bytecode:n,args:r}=t;return Ue(n,e.inputs?.length&&r?.length?Ga(e.inputs,r):"0x")}function gp(e){return Da(e)}function wp(e,...t){const{overloads:n}=e,r=n?vp([e,...n],e.name,{args:t[0]}):e,s=xp(r),o=t.length>0?Ga(r.inputs,t[0]):void 0;return o?Ue(s,o):s}function Gt(e,t={}){return Da(e,t)}function vp(e,t,n){const r=tp(e,t,n);if(r.type!=="function")throw new Fs({name:t,type:"function"});return r}function xp(e){return qa(e)}const Ep="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",xe="0x0000000000000000000000000000000000000000",Ap="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Bp(e,t){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:o,traceAssetChanges:i,traceTransfers:a,validation:c}=t,u=t.account?Te(t.account):void 0;if(i&&!u)throw new P("`account` is required when `traceAssetChanges` is true");const l=u?yp(gp("constructor(bytes, bytes)"),{bytecode:da,args:[Ap,wp(Gt("function getBalance(address)"),[u.address])]}):void 0,d=i?await Promise.all(t.calls.map(async I=>{if(!I.data&&!I.abi)return;const{accessList:S}=await Ia(e,{account:u.address,...I,data:I.abi?Le(I):I.data});return S.map(({address:O,storageKeys:U})=>U.length>0?O:null)})).then(I=>I.flat().filter(Boolean)):[],f=await ks(e,{blockNumber:n,blockTag:r,blocks:[...i?[{calls:[{data:l}],stateOverrides:o},{calls:d.map((I,S)=>({abi:[Gt("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:I,from:xe,nonce:S})),stateOverrides:[{address:xe,nonce:0}]}]:[],{calls:[...s,{}].map(I=>({...I,from:u?.address})),stateOverrides:o},...i?[{calls:[{data:l}]},{calls:d.map((I,S)=>({abi:[Gt("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:I,from:xe,nonce:S})),stateOverrides:[{address:xe,nonce:0}]},{calls:d.map((I,S)=>({to:I,abi:[Gt("function decimals() returns (uint256)")],functionName:"decimals",from:xe,nonce:S})),stateOverrides:[{address:xe,nonce:0}]},{calls:d.map((I,S)=>({to:I,abi:[Gt("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:xe,nonce:S})),stateOverrides:[{address:xe,nonce:0}]},{calls:d.map((I,S)=>({to:I,abi:[Gt("function symbol() returns (string)")],functionName:"symbol",from:xe,nonce:S})),stateOverrides:[{address:xe,nonce:0}]}]:[]],traceTransfers:a,validation:c}),p=i?f[2]:f[0],[h,m,,b,y,x,w,$]=i?f:[],{calls:C,...T}=p,k=C.slice(0,-1)??[],_=h?.calls??[],N=m?.calls??[],G=[..._,...N].map(I=>I.status==="success"?Oe(I.data):null),L=b?.calls??[],R=y?.calls??[],E=[...L,...R].map(I=>I.status==="success"?Oe(I.data):null),v=(x?.calls??[]).map(I=>I.status==="success"?I.result:null),g=($?.calls??[]).map(I=>I.status==="success"?I.result:null),A=(w?.calls??[]).map(I=>I.status==="success"?I.result:null),M=[];for(const[I,S]of E.entries()){const O=G[I];if(typeof S!="bigint"||typeof O!="bigint")continue;const U=v[I-1],D=g[I-1],Q=A[I-1],Z=I===0?{address:Ep,decimals:18,symbol:"ETH"}:{address:d[I-1],decimals:Q||U?Number(U??1):void 0,symbol:D??void 0};M.some(V=>V.token.address===Z.address)||M.push({token:Z,value:{pre:O,post:S,diff:S-O}})}return{assetChanges:M,block:T,results:k}}class Ka extends Mr{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,jo(t);const r=Gn(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?t.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),Rt(o)}update(t){return Mt(this),this.iHash.update(t),this}digestInto(t){Mt(this),Ve(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ya=(e,t,n)=>new Ka(e,t).update(n).digest();Ya.create=(e,t)=>new Ka(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zs=BigInt(0),js=BigInt(1);function dr(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function Pt(e,t,n=""){const r=qn(e),s=e?.length,o=t!==void 0;if(!r||o&&s!==t){const i=n&&`"${n}" `,a=o?` of length ${t}`:"",c=r?`length=${s}`:`type=${typeof e}`;throw new Error(i+"expected Uint8Array"+a+", got "+c)}return e}function pr(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Xa(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?zs:BigInt("0x"+e)}function hr(e){return Xa(Ot(e))}function Ja(e){return Ve(e),Xa(Ot(Uint8Array.from(e).reverse()))}function Ds(e,t){return Hn(e.toString(16).padStart(t*2,"0"))}function Qa(e,t){return Ds(e,t).reverse()}function pe(e,t,n){let r;if(typeof t=="string")try{r=Hn(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(qn(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");return r.length,r}const qs=e=>typeof e=="bigint"&&zs<=e;function Pp(e,t,n){return qs(e)&&qs(t)&&qs(n)&&t<=e&&e<n}function $p(e,t,n,r){if(!Pp(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function ec(e){let t;for(t=0;e>zs;e>>=js,t+=1);return t}const On=e=>(js<<BigInt(e))-js;function Ip(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=p=>new Uint8Array(p),s=p=>Uint8Array.of(p);let o=r(e),i=r(e),a=0;const c=()=>{o.fill(1),i.fill(0),a=0},u=(...p)=>n(i,o,...p),l=(p=r(0))=>{i=u(s(0),p),o=u(),p.length!==0&&(i=u(s(1),p),o=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const h=[];for(;p<t;){o=u();const m=o.slice();h.push(m),p+=o.length}return rt(...h)};return(p,h)=>{c(),l(p);let m;for(;!(m=h(d()));)l();return c(),m}}function Hs(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(s,o,i){const a=e[s];if(i&&a===void 0)return;const c=typeof a;if(c!==o||a===null)throw new Error(`param "${s}" is invalid: expected ${o}, got ${c}`)}Object.entries(t).forEach(([s,o])=>r(s,o,!1)),Object.entries(n).forEach(([s,o])=>r(s,o,!0))}function tc(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const o=e(n,...r);return t.set(n,o),o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const he=BigInt(0),le=BigInt(1),$t=BigInt(2),nc=BigInt(3),rc=BigInt(4),sc=BigInt(5),Np=BigInt(7),oc=BigInt(8),Tp=BigInt(9),ic=BigInt(16);function Ce(e,t){const n=e%t;return n>=he?n:t+n}function Ee(e,t,n){let r=e;for(;t-- >he;)r*=r,r%=n;return r}function ac(e,t){if(e===he)throw new Error("invert: expected non-zero number");if(t<=he)throw new Error("invert: expected positive modulus, got "+t);let n=Ce(e,t),r=t,s=he,o=le;for(;n!==he;){const a=r/n,c=r%n,u=s-o*a;r=n,n=c,s=o,o=u}if(r!==le)throw new Error("invert: does not exist");return Ce(s,t)}function Gs(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function cc(e,t){const n=(e.ORDER+le)/rc,r=e.pow(t,n);return Gs(e,r,t),r}function Sp(e,t){const n=(e.ORDER-sc)/oc,r=e.mul(t,$t),s=e.pow(r,n),o=e.mul(t,s),i=e.mul(e.mul(o,$t),s),a=e.mul(o,e.sub(i,e.ONE));return Gs(e,a,t),a}function kp(e){const t=Fn(e),n=uc(e),r=n(t,t.neg(t.ONE)),s=n(t,r),o=n(t,t.neg(r)),i=(e+Np)/ic;return(a,c)=>{let u=a.pow(c,i),l=a.mul(u,r);const d=a.mul(u,s),f=a.mul(u,o),p=a.eql(a.sqr(l),c),h=a.eql(a.sqr(d),c);u=a.cmov(u,l,p),l=a.cmov(f,d,h);const m=a.eql(a.sqr(l),c),b=a.cmov(u,l,m);return Gs(a,b,c),b}}function uc(e){if(e<nc)throw new Error("sqrt is not defined for small field");let t=e-le,n=0;for(;t%$t===he;)t/=$t,n++;let r=$t;const s=Fn(e);for(;lc(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return cc;let o=s.pow(r,t);const i=(t+le)/$t;return function(c,u){if(c.is0(u))return u;if(lc(c,u)!==1)throw new Error("Cannot find square root");let l=n,d=c.mul(c.ONE,o),f=c.pow(u,t),p=c.pow(u,i);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let h=1,m=c.sqr(f);for(;!c.eql(m,c.ONE);)if(h++,m=c.sqr(m),h===l)throw new Error("Cannot find square root");const b=le<<BigInt(l-h-1),y=c.pow(d,b);l=h,d=c.sqr(y),f=c.mul(f,d),p=c.mul(p,y)}return p}}function Cp(e){return e%rc===nc?cc:e%oc===sc?Sp:e%ic===Tp?kp(e):uc(e)}const Mp=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Rp(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Mp.reduce((r,s)=>(r[s]="function",r),t);return Hs(e,n),e}function Op(e,t,n){if(n<he)throw new Error("invalid exponent, negatives unsupported");if(n===he)return e.ONE;if(n===le)return t;let r=e.ONE,s=t;for(;n>he;)n&le&&(r=e.mul(r,s)),s=e.sqr(s),n>>=le;return r}function fc(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((i,a,c)=>e.is0(a)?i:(r[c]=i,e.mul(i,a)),e.ONE),o=e.inv(s);return t.reduceRight((i,a,c)=>e.is0(a)?i:(r[c]=e.mul(i,r[c]),e.mul(i,a)),o),r}function lc(e,t){const n=(e.ORDER-le)/$t,r=e.pow(t,n),s=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),i=e.eql(r,e.neg(e.ONE));if(!s&&!o&&!i)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function dc(e,t){t!==void 0&&nn(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Fn(e,t,n=!1,r={}){if(e<=he)throw new Error("invalid field: expected ORDER > 0, got "+e);let s,o,i=!1,a;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const f=t;f.BITS&&(s=f.BITS),f.sqrt&&(o=f.sqrt),typeof f.isLE=="boolean"&&(n=f.isLE),typeof f.modFromBytes=="boolean"&&(i=f.modFromBytes),a=f.allowedLengths}else typeof t=="number"&&(s=t),r.sqrt&&(o=r.sqrt);const{nBitLength:c,nByteLength:u}=dc(e,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:e,isLE:n,BITS:c,BYTES:u,MASK:On(c),ZERO:he,ONE:le,allowedLengths:a,create:f=>Ce(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return he<=f&&f<e},is0:f=>f===he,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&le)===le,neg:f=>Ce(-f,e),eql:(f,p)=>f===p,sqr:f=>Ce(f*f,e),add:(f,p)=>Ce(f+p,e),sub:(f,p)=>Ce(f-p,e),mul:(f,p)=>Ce(f*p,e),pow:(f,p)=>Op(d,f,p),div:(f,p)=>Ce(f*ac(p,e),e),sqrN:f=>f*f,addN:(f,p)=>f+p,subN:(f,p)=>f-p,mulN:(f,p)=>f*p,inv:f=>ac(f,e),sqrt:o||(f=>(l||(l=Cp(e)),l(d,f))),toBytes:f=>n?Qa(f,u):Ds(f,u),fromBytes:(f,p=!0)=>{if(a){if(!a.includes(f.length)||f.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const m=new Uint8Array(u);m.set(f,n?0:m.length-f.length),f=m}if(f.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+f.length);let h=n?Ja(f):hr(f);if(i&&(h=Ce(h,e)),!p&&!d.isValid(h))throw new Error("invalid field element: outside of range 0..ORDER");return h},invertBatch:f=>fc(d,f),cmov:(f,p,h)=>h?p:f});return Object.freeze(d)}function pc(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function hc(e){const t=pc(e);return t+Math.ceil(t/2)}function Fp(e,t,n=!1){const r=e.length,s=pc(t),o=hc(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const i=n?Ja(e):hr(e),a=Ce(i,t-le)+le;return n?Qa(a,s):Ds(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vt=BigInt(0),It=BigInt(1);function mr(e,t){const n=t.negate();return e?n:t}function Vs(e,t){const n=fc(e.Fp,t.map(r=>r.Z));return t.map((r,s)=>e.fromAffine(r.toAffine(n[s])))}function mc(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Zs(e,t){mc(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,o=On(e),i=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:s,shiftBy:i}}function bc(e,t,n){const{windowSize:r,mask:s,maxNumber:o,shiftBy:i}=n;let a=Number(e&s),c=e>>i;a>r&&(a-=o,c+=It);const u=t*r,l=u+Math.abs(a)-1,d=a===0,f=a<0,p=t%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:p,offsetF:u}}function Lp(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function _p(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Ws=new WeakMap,yc=new WeakMap;function Ks(e){return yc.get(e)||1}function gc(e){if(e!==Vt)throw new Error("invalid wNAF")}class Up{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,r=this.ZERO){let s=t;for(;n>Vt;)n&It&&(r=r.add(s)),s=s.double(),n>>=It;return r}precomputeWindow(t,n){const{windows:r,windowSize:s}=Zs(n,this.bits),o=[];let i=t,a=i;for(let c=0;c<r;c++){a=i,o.push(a);for(let u=1;u<s;u++)a=a.add(i),o.push(a);i=a.double()}return o}wNAF(t,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,o=this.BASE;const i=Zs(t,this.bits);for(let a=0;a<i.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:d,isNegF:f,offsetF:p}=bc(r,a,i);r=c,l?o=o.add(mr(f,n[p])):s=s.add(mr(d,n[u]))}return gc(r),{p:s,f:o}}wNAFUnsafe(t,n,r,s=this.ZERO){const o=Zs(t,this.bits);for(let i=0;i<o.windows&&r!==Vt;i++){const{nextN:a,offset:c,isZero:u,isNeg:l}=bc(r,i,o);if(r=a,!u){const d=n[c];s=s.add(l?d.negate():d)}}return gc(r),s}getPrecomputes(t,n,r){let s=Ws.get(n);return s||(s=this.precomputeWindow(n,t),t!==1&&(typeof r=="function"&&(s=r(s)),Ws.set(n,s))),s}cached(t,n,r){const s=Ks(t);return this.wNAF(s,this.getPrecomputes(s,t,r),n)}unsafe(t,n,r,s){const o=Ks(t);return o===1?this._unsafeLadder(t,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,r),n,s)}createCache(t,n){mc(n,this.bits),yc.set(t,n),Ws.delete(t)}hasCache(t){return Ks(t)!==1}}function zp(e,t,n,r){let s=t,o=e.ZERO,i=e.ZERO;for(;n>Vt||r>Vt;)n&It&&(o=o.add(s)),r&It&&(i=i.add(s)),s=s.double(),n>>=It,r>>=It;return{p1:o,p2:i}}function jp(e,t,n,r){Lp(n,e),_p(r,t);const s=n.length,o=r.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,a=ec(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=On(c),l=new Array(Number(u)+1).fill(i),d=Math.floor((t.BITS-1)/c)*c;let f=i;for(let p=d;p>=0;p-=c){l.fill(i);for(let m=0;m<o;m++){const b=r[m],y=Number(b>>BigInt(p)&u);l[y]=l[y].add(n[m])}let h=i;for(let m=l.length-1,b=i;m>0;m--)b=b.add(l[m]),h=h.add(b);if(f=f.add(h),p!==0)for(let m=0;m<c;m++)f=f.double()}return f}function wc(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Rp(t),t}else return Fn(e,{isLE:n})}function Dp(e,t,n={},r){if(r===void 0&&(r=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const c of["p","n","h"]){const u=t[c];if(!(typeof u=="bigint"&&u>Vt))throw new Error(`CURVE.${c} must be positive bigint`)}const s=wc(t.p,n.Fp,r),o=wc(t.n,n.Fn,r),a=["Gx","Gy","a","b"];for(const c of a)if(!s.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vc=(e,t)=>(e+(e>=0?t:-t)/xc)/t;function qp(e,t,n){const[[r,s],[o,i]]=t,a=vc(i*e,n),c=vc(-s*e,n);let u=e-a*r-c*o,l=-a*s-c*i;const d=u<et,f=l<et;d&&(u=-u),f&&(l=-l);const p=On(Math.ceil(ec(n)/2))+Zt;if(u<et||u>=p||l<et||l>=p)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:d,k1:u,k2neg:f,k2:l}}function Ys(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function Xs(e,t){const n={};for(let r of Object.keys(t))n[r]=e[r]===void 0?t[r]:e[r];return dr(n.lowS,"lowS"),dr(n.prehash,"prehash"),n.format!==void 0&&Ys(n.format),n}class Hp extends Error{constructor(t=""){super(t)}}const Qe={Err:Hp,_tlv:{encode:(e,t)=>{const{Err:n}=Qe;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=pr(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?pr(s.length/2|128):"";return pr(e)+o+s+t},decode(e,t){const{Err:n}=Qe;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],o=!!(s&128);let i=0;if(!o)i=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)i=i<<8|l;if(r+=c,i<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+i);if(a.length!==i)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=Qe;if(e<et)throw new t("integer: negative integers are not allowed");let n=pr(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=Qe;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return hr(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Qe,s=pe("signature",e),{v:o,l:i}=r.decode(48,s);if(i.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,o),{v:u,l}=r.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=Qe,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),o=r+s;return t.encode(48,o)}},et=BigInt(0),Zt=BigInt(1),xc=BigInt(2),br=BigInt(3),Gp=BigInt(4);function Wt(e,t){const{BYTES:n}=e;let r;if(typeof t=="bigint")r=t;else{let s=pe("private key",t);try{r=e.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Vp(e,t={}){const n=Dp("weierstrass",e,t),{Fp:r,Fn:s}=n;let o=n.CURVE;const{h:i,n:a}=o;Hs(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!r.is0(o.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=Ac(r,s);function l(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(R,E,v){const{x:g,y:A}=E.toAffine(),M=r.toBytes(g);if(dr(v,"isCompressed"),v){l();const I=!r.isOdd(A);return rt(Ec(I),M)}else return rt(Uint8Array.of(4),M,r.toBytes(A))}function f(R){Pt(R,void 0,"Point");const{publicKey:E,publicKeyUncompressed:v}=u,g=R.length,A=R[0],M=R.subarray(1);if(g===E&&(A===2||A===3)){const I=r.fromBytes(M);if(!r.isValid(I))throw new Error("bad point: is not on curve, wrong x");const S=m(I);let O;try{O=r.sqrt(S)}catch(Q){const Z=Q instanceof Error?": "+Q.message:"";throw new Error("bad point: is not on curve, sqrt error"+Z)}l();const U=r.isOdd(O);return(A&1)===1!==U&&(O=r.neg(O)),{x:I,y:O}}else if(g===v&&A===4){const I=r.BYTES,S=r.fromBytes(M.subarray(0,I)),O=r.fromBytes(M.subarray(I,I*2));if(!b(S,O))throw new Error("bad point: is not on curve");return{x:S,y:O}}else throw new Error(`bad point: got length ${g}, expected compressed=${E} or uncompressed=${v}`)}const p=t.toBytes||d,h=t.fromBytes||f;function m(R){const E=r.sqr(R),v=r.mul(E,R);return r.add(r.add(v,r.mul(R,o.a)),o.b)}function b(R,E){const v=r.sqr(E),g=m(R);return r.eql(v,g)}if(!b(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const y=r.mul(r.pow(o.a,br),Gp),x=r.mul(r.sqr(o.b),BigInt(27));if(r.is0(r.add(y,x)))throw new Error("bad curve params: a or b");function w(R,E,v=!1){if(!r.isValid(E)||v&&r.is0(E))throw new Error(`bad point coordinate ${R}`);return E}function $(R){if(!(R instanceof N))throw new Error("ProjectivePoint expected")}function C(R){if(!c||!c.basises)throw new Error("no endo");return qp(R,c.basises,s.ORDER)}const T=tc((R,E)=>{const{X:v,Y:g,Z:A}=R;if(r.eql(A,r.ONE))return{x:v,y:g};const M=R.is0();E==null&&(E=M?r.ONE:r.inv(A));const I=r.mul(v,E),S=r.mul(g,E),O=r.mul(A,E);if(M)return{x:r.ZERO,y:r.ZERO};if(!r.eql(O,r.ONE))throw new Error("invZ was invalid");return{x:I,y:S}}),k=tc(R=>{if(R.is0()){if(t.allowInfinityPoint&&!r.is0(R.Y))return;throw new Error("bad point: ZERO")}const{x:E,y:v}=R.toAffine();if(!r.isValid(E)||!r.isValid(v))throw new Error("bad point: x or y not field elements");if(!b(E,v))throw new Error("bad point: equation left != right");if(!R.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(R,E,v,g,A){return v=new N(r.mul(v.X,R),v.Y,v.Z),E=mr(g,E),v=mr(A,v),E.add(v)}class N{constructor(E,v,g){this.X=w("x",E),this.Y=w("y",v,!0),this.Z=w("z",g),Object.freeze(this)}static CURVE(){return o}static fromAffine(E){const{x:v,y:g}=E||{};if(!E||!r.isValid(v)||!r.isValid(g))throw new Error("invalid affine point");if(E instanceof N)throw new Error("projective point not allowed");return r.is0(v)&&r.is0(g)?N.ZERO:new N(v,g,r.ONE)}static fromBytes(E){const v=N.fromAffine(h(Pt(E,void 0,"point")));return v.assertValidity(),v}static fromHex(E){return N.fromBytes(pe("pointHex",E))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(E=8,v=!0){return L.createCache(this,E),v||this.multiply(br),this}assertValidity(){k(this)}hasEvenY(){const{y:E}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(E)}equals(E){$(E);const{X:v,Y:g,Z:A}=this,{X:M,Y:I,Z:S}=E,O=r.eql(r.mul(v,S),r.mul(M,A)),U=r.eql(r.mul(g,S),r.mul(I,A));return O&&U}negate(){return new N(this.X,r.neg(this.Y),this.Z)}double(){const{a:E,b:v}=o,g=r.mul(v,br),{X:A,Y:M,Z:I}=this;let S=r.ZERO,O=r.ZERO,U=r.ZERO,D=r.mul(A,A),Q=r.mul(M,M),Z=r.mul(I,I),V=r.mul(A,M);return V=r.add(V,V),U=r.mul(A,I),U=r.add(U,U),S=r.mul(E,U),O=r.mul(g,Z),O=r.add(S,O),S=r.sub(Q,O),O=r.add(Q,O),O=r.mul(S,O),S=r.mul(V,S),U=r.mul(g,U),Z=r.mul(E,Z),V=r.sub(D,Z),V=r.mul(E,V),V=r.add(V,U),U=r.add(D,D),D=r.add(U,D),D=r.add(D,Z),D=r.mul(D,V),O=r.add(O,D),Z=r.mul(M,I),Z=r.add(Z,Z),D=r.mul(Z,V),S=r.sub(S,D),U=r.mul(Z,Q),U=r.add(U,U),U=r.add(U,U),new N(S,O,U)}add(E){$(E);const{X:v,Y:g,Z:A}=this,{X:M,Y:I,Z:S}=E;let O=r.ZERO,U=r.ZERO,D=r.ZERO;const Q=o.a,Z=r.mul(o.b,br);let V=r.mul(v,M),X=r.mul(g,I),se=r.mul(A,S),be=r.add(v,g),J=r.add(M,I);be=r.mul(be,J),J=r.add(V,X),be=r.sub(be,J),J=r.add(v,A);let ue=r.add(M,S);return J=r.mul(J,ue),ue=r.add(V,se),J=r.sub(J,ue),ue=r.add(g,A),O=r.add(I,S),ue=r.mul(ue,O),O=r.add(X,se),ue=r.sub(ue,O),D=r.mul(Q,J),O=r.mul(Z,se),D=r.add(O,D),O=r.sub(X,D),D=r.add(X,D),U=r.mul(O,D),X=r.add(V,V),X=r.add(X,V),se=r.mul(Q,se),J=r.mul(Z,J),X=r.add(X,se),se=r.sub(V,se),se=r.mul(Q,se),J=r.add(J,se),V=r.mul(X,J),U=r.add(U,V),V=r.mul(ue,J),O=r.mul(be,O),O=r.sub(O,V),V=r.mul(be,X),D=r.mul(ue,D),D=r.add(D,V),new N(O,U,D)}subtract(E){return this.add(E.negate())}is0(){return this.equals(N.ZERO)}multiply(E){const{endo:v}=t;if(!s.isValidNot0(E))throw new Error("invalid scalar: out of range");let g,A;const M=I=>L.cached(this,I,S=>Vs(N,S));if(v){const{k1neg:I,k1:S,k2neg:O,k2:U}=C(E),{p:D,f:Q}=M(S),{p:Z,f:V}=M(U);A=Q.add(V),g=_(v.beta,D,Z,I,O)}else{const{p:I,f:S}=M(E);g=I,A=S}return Vs(N,[g,A])[0]}multiplyUnsafe(E){const{endo:v}=t,g=this;if(!s.isValid(E))throw new Error("invalid scalar: out of range");if(E===et||g.is0())return N.ZERO;if(E===Zt)return g;if(L.hasCache(this))return this.multiply(E);if(v){const{k1neg:A,k1:M,k2neg:I,k2:S}=C(E),{p1:O,p2:U}=zp(N,g,M,S);return _(v.beta,O,U,A,I)}else return L.unsafe(g,E)}multiplyAndAddUnsafe(E,v,g){const A=this.multiplyUnsafe(v).add(E.multiplyUnsafe(g));return A.is0()?void 0:A}toAffine(E){return T(this,E)}isTorsionFree(){const{isTorsionFree:E}=t;return i===Zt?!0:E?E(N,this):L.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:E}=t;return i===Zt?this:E?E(N,this):this.multiplyUnsafe(i)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}toBytes(E=!0){return dr(E,"isCompressed"),this.assertValidity(),p(N,this,E)}toHex(E=!0){return Ot(this.toBytes(E))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(E=!0){return this.toBytes(E)}_setWindowSize(E){this.precompute(E)}static normalizeZ(E){return Vs(N,E)}static msm(E,v){return jp(N,s,E,v)}static fromPrivateKey(E){return N.BASE.multiply(Wt(s,E))}}N.BASE=new N(o.Gx,o.Gy,r.ONE),N.ZERO=new N(r.ZERO,r.ONE,r.ZERO),N.Fp=r,N.Fn=s;const G=s.BITS,L=new Up(N,t.endo?Math.ceil(G/2):G);return N.BASE.precompute(8),N}function Ec(e){return Uint8Array.of(e?2:3)}function Ac(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function Zp(e,t={}){const{Fn:n}=e,r=t.randomBytes||Zo,s=Object.assign(Ac(e.Fp,n),{seed:hc(n.ORDER)});function o(p){try{return!!Wt(n,p)}catch{return!1}}function i(p,h){const{publicKey:m,publicKeyUncompressed:b}=s;try{const y=p.length;return h===!0&&y!==m||h===!1&&y!==b?!1:!!e.fromBytes(p)}catch{return!1}}function a(p=r(s.seed)){return Fp(Pt(p,s.seed,"seed"),n.ORDER)}function c(p,h=!0){return e.BASE.multiply(Wt(n,p)).toBytes(h)}function u(p){const h=a(p);return{secretKey:h,publicKey:c(h)}}function l(p){if(typeof p=="bigint")return!1;if(p instanceof e)return!0;const{secretKey:h,publicKey:m,publicKeyUncompressed:b}=s;if(n.allowedLengths||h===m)return;const y=pe("key",p).length;return y===m||y===b}function d(p,h,m=!0){if(l(p)===!0)throw new Error("first arg must be private key");if(l(h)===!1)throw new Error("second arg must be public key");const b=Wt(n,p);return e.fromHex(h).multiply(b).toBytes(m)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:u,Point:e,utils:{isValidSecretKey:o,isValidPublicKey:i,randomSecretKey:a,isValidPrivateKey:o,randomPrivateKey:a,normPrivateKeyToScalar:p=>Wt(n,p),precompute(p=8,h=e.BASE){return h.precompute(p,!1)}},lengths:s})}function Wp(e,t,n={}){jo(t),Hs(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||Zo,s=n.hmac||((v,...g)=>Ya(t,v,rt(...g))),{Fp:o,Fn:i}=e,{ORDER:a,BITS:c}=i,{keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:p}=Zp(e,n),h={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},m="compact";function b(v){const g=a>>Zt;return v>g}function y(v,g){if(!i.isValidNot0(g))throw new Error(`invalid signature ${v}: out of range 1..Point.Fn.ORDER`);return g}function x(v,g){Ys(g);const A=p.signature,M=g==="compact"?A:g==="recovered"?A+1:void 0;return Pt(v,M,`${g} signature`)}class w{constructor(g,A,M){this.r=y("r",g),this.s=y("s",A),M!=null&&(this.recovery=M),Object.freeze(this)}static fromBytes(g,A=m){x(g,A);let M;if(A==="der"){const{r:U,s:D}=Qe.toSig(Pt(g));return new w(U,D)}A==="recovered"&&(M=g[0],A="compact",g=g.subarray(1));const I=i.BYTES,S=g.subarray(0,I),O=g.subarray(I,I*2);return new w(i.fromBytes(S),i.fromBytes(O),M)}static fromHex(g,A){return this.fromBytes(Hn(g),A)}addRecoveryBit(g){return new w(this.r,this.s,g)}recoverPublicKey(g){const A=o.ORDER,{r:M,s:I,recovery:S}=this;if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");if(a*xc<A&&S>1)throw new Error("recovery id is ambiguous for h>1 curve");const U=S===2||S===3?M+a:M;if(!o.isValid(U))throw new Error("recovery id 2 or 3 invalid");const D=o.toBytes(U),Q=e.fromBytes(rt(Ec((S&1)===0),D)),Z=i.inv(U),V=C(pe("msgHash",g)),X=i.create(-V*Z),se=i.create(I*Z),be=e.BASE.multiplyUnsafe(X).add(Q.multiplyUnsafe(se));if(be.is0())throw new Error("point at infinify");return be.assertValidity(),be}hasHighS(){return b(this.s)}toBytes(g=m){if(Ys(g),g==="der")return Hn(Qe.hexFromSig(this));const A=i.toBytes(this.r),M=i.toBytes(this.s);if(g==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return rt(Uint8Array.of(this.recovery),A,M)}return rt(A,M)}toHex(g){return Ot(this.toBytes(g))}assertValidity(){}static fromCompact(g){return w.fromBytes(pe("sig",g),"compact")}static fromDER(g){return w.fromBytes(pe("sig",g),"der")}normalizeS(){return this.hasHighS()?new w(this.r,i.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ot(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ot(this.toBytes("compact"))}}const $=n.bits2int||function(g){if(g.length>8192)throw new Error("input is too large");const A=hr(g),M=g.length*8-c;return M>0?A>>BigInt(M):A},C=n.bits2int_modN||function(g){return i.create($(g))},T=On(c);function k(v){return $p("num < 2^"+c,v,et,T),i.toBytes(v)}function _(v,g){return Pt(v,void 0,"message"),g?Pt(t(v),void 0,"prehashed message"):v}function N(v,g,A){if(["recovered","canonical"].some(X=>X in A))throw new Error("sign() legacy options not supported");const{lowS:M,prehash:I,extraEntropy:S}=Xs(A,h);v=_(v,I);const O=C(v),U=Wt(i,g),D=[k(U),k(O)];if(S!=null&&S!==!1){const X=S===!0?r(p.secretKey):S;D.push(pe("extraEntropy",X))}const Q=rt(...D),Z=O;function V(X){const se=$(X);if(!i.isValidNot0(se))return;const be=i.inv(se),J=e.BASE.multiply(se).toAffine(),ue=i.create(J.x);if(ue===et)return;const Pr=i.create(be*i.create(Z+ue*U));if(Pr===et)return;let Dc=(J.x===ue?0:2)|Number(J.y&Zt),qc=Pr;return M&&b(Pr)&&(qc=i.neg(Pr),Dc^=1),new w(ue,qc,Dc)}return{seed:Q,k2sig:V}}function G(v,g,A={}){v=pe("message",v);const{seed:M,k2sig:I}=N(v,g,A);return Ip(t.outputLen,i.BYTES,s)(M,I)}function L(v){let g;const A=typeof v=="string"||qn(v),M=!A&&v!==null&&typeof v=="object"&&typeof v.r=="bigint"&&typeof v.s=="bigint";if(!A&&!M)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(M)g=new w(v.r,v.s);else if(A){try{g=w.fromBytes(pe("sig",v),"der")}catch(I){if(!(I instanceof Qe.Err))throw I}if(!g)try{g=w.fromBytes(pe("sig",v),"compact")}catch{return!1}}return g||!1}function R(v,g,A,M={}){const{lowS:I,prehash:S,format:O}=Xs(M,h);if(A=pe("publicKey",A),g=_(pe("message",g),S),"strict"in M)throw new Error("options.strict was renamed to lowS");const U=O===void 0?L(v):w.fromBytes(pe("sig",v),O);if(U===!1)return!1;try{const D=e.fromBytes(A);if(I&&U.hasHighS())return!1;const{r:Q,s:Z}=U,V=C(g),X=i.inv(Z),se=i.create(V*X),be=i.create(Q*X),J=e.BASE.multiplyUnsafe(se).add(D.multiplyUnsafe(be));return J.is0()?!1:i.create(J.x)===Q}catch{return!1}}function E(v,g,A={}){const{prehash:M}=Xs(A,h);return g=_(g,M),w.fromBytes(v,"recovered").recoverPublicKey(g).toBytes()}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:p,Point:e,sign:G,verify:R,recoverPublicKey:E,Signature:w,hash:t})}function Kp(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(i=>Math.ceil(i/2)))):void 0;const s=Fn(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),o={Fp:n,Fn:s,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:o}}function Yp(e){const{CURVE:t,curveOpts:n}=Kp(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}function Xp(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,dc(n.Fn.ORDER,n.Fn.BITS))})}function Jp(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:s}=Yp(e),o=Vp(t,n),i=Wp(o,r,s);return Xp(e,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Qp(e,t){const n=r=>Jp({...e,hash:r});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Js={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},eh={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Bc=BigInt(2);function th(e){const t=Js.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,d=Ee(l,n,t)*l%t,f=Ee(d,n,t)*l%t,p=Ee(f,Bc,t)*u%t,h=Ee(p,s,t)*p%t,m=Ee(h,o,t)*h%t,b=Ee(m,a,t)*m%t,y=Ee(b,c,t)*b%t,x=Ee(y,a,t)*m%t,w=Ee(x,n,t)*l%t,$=Ee(w,i,t)*h%t,C=Ee($,r,t)*u%t,T=Ee(C,Bc,t);if(!Qs.eql(Qs.sqr(T),e))throw new Error("Cannot find square root");return T}const Qs=Fn(Js.p,{sqrt:th}),Pc=Qp({...Js,Fp:Qs,lowS:!0,endo:eh},Ui),nh=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Pc},Symbol.toStringTag,{value:"Module"}));function rh({r:e,s:t,to:n="hex",v:r,yParity:s}){const o=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new Pc.Signature(Oe(e),Oe(t)).toCompactHex()}${o===0?"1b":"1c"}`;return n==="hex"?i:Ie(i)}async function eo(e,t){const{address:n,factory:r,factoryData:s,hash:o,signature:i,universalSignatureVerifierAddress:a=e.chain?.contracts?.universalSignatureVerifier?.address,...c}=t,u=Pe(i)?i:typeof i=="object"&&"r"in i&&"s"in i?rh(i):te(i),l=await(async()=>!r&&!s||D0(u)?u:q0({address:r,data:s,signature:u}))();try{const d=a?{to:a,data:Le({abi:la,functionName:"isValidSig",args:[n,o,l]}),...c}:{data:ws({abi:la,args:[n,o,l],bytecode:Ed}),...c},{data:f}=await q(e,kn,"call")(d);return Wu(f??"0x0")}catch(d){try{if(tr($f(n),await Ii({hash:o,signature:i})))return!0}catch{}if(d instanceof Bi)return!1;throw d}}async function sh(e,{address:t,message:n,factory:r,factoryData:s,signature:o,...i}){const a=La(n);return eo(e,{address:t,factory:r,factoryData:s,hash:a,signature:o,...i})}async function oh(e,t){const{address:n,factory:r,factoryData:s,signature:o,message:i,primaryType:a,types:c,domain:u,...l}=t,d=M0({message:i,primaryType:a,types:c,domain:u});return eo(e,{address:n,factory:r,factoryData:s,hash:d,signature:o,...l})}function $c(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:o,pollingInterval:i=e.pollingInterval}){const a=typeof o<"u"?o:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=ne(["watchBlockNumber",e.uid,t,n,i]);return at(d,{onBlockNumber:r,onError:s},f=>Cn(async()=>{try{const p=await q(e,Mn,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let h=c+1n;h<p;h++)f.onBlockNumber(h,c),c=h}(!c||p>c)&&(f.onBlockNumber(p,c),c=p)}catch(p){f.onError?.(p)}},{emitOnBegin:t,interval:i}))})():(()=>{const d=ne(["watchBlockNumber",e.uid,t,n]);return at(d,{onBlockNumber:r,onError:s},f=>{let p=!0,h=()=>p=!1;return(async()=>{try{const m=(()=>{if(e.transport.type==="fallback"){const y=e.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return y?y.value:e.transport}return e.transport})(),{unsubscribe:b}=await m.subscribe({params:["newHeads"],onData(y){if(!p)return;const x=Oe(y.result?.number);f.onBlockNumber(x,c),c=x},onError(y){f.onError?.(y)}});h=b,p||h()}catch(m){s?.(m)}})(),()=>h()})})()}async function ih(e,t){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:o,retryCount:i=6,retryDelay:a=({count:C})=>~~(1<<C)*200,timeout:c=18e4}=t,u=ne(["waitForTransactionReceipt",e.uid,s]),l=t.pollingInterval?t.pollingInterval:e.chain?.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval;let d,f,p,h=!1,m,b;const{promise:y,resolve:x,reject:w}=ma(),$=c?setTimeout(()=>{b(),m(),w(new ol({hash:s}))},c):void 0;return m=at(u,{onReplaced:o,resolve:x,reject:w},async C=>{if(p=await q(e,fr,"getTransactionReceipt")({hash:s}).catch(()=>{}),p&&r<=1){clearTimeout($),C.resolve(p),m();return}b=q(e,$c,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:l,async onBlockNumber(T){const k=N=>{clearTimeout($),b(),N(),m()};let _=T;if(!h)try{if(p){if(r>1&&(!p.blockNumber||_-p.blockNumber+1n<r))return;k(()=>C.resolve(p));return}if(n&&!d&&(h=!0,await As(async()=>{d=await q(e,Ss,"getTransaction")({hash:s}),d.blockNumber&&(_=d.blockNumber)},{delay:a,retryCount:i}),h=!1),p=await q(e,fr,"getTransactionReceipt")({hash:s}),r>1&&(!p.blockNumber||_-p.blockNumber+1n<r))return;k(()=>C.resolve(p))}catch(N){if(N instanceof Ei||N instanceof Ai){if(!d){h=!1;return}try{f=d,h=!0;const G=await As(()=>q(e,_e,"getBlock")({blockNumber:_,includeTransactions:!0}),{delay:a,retryCount:i,shouldRetry:({error:E})=>E instanceof ki});h=!1;const L=G.transactions.find(({from:E,nonce:v})=>E===f.from&&v===f.nonce);if(!L||(p=await q(e,fr,"getTransactionReceipt")({hash:L.hash}),r>1&&(!p.blockNumber||_-p.blockNumber+1n<r)))return;let R="replaced";L.to===f.to&&L.value===f.value&&L.input===f.input?R="repriced":L.from===L.to&&L.value===0n&&(R="cancelled"),k(()=>{C.onReplaced?.({reason:R,replacedTransaction:f,transaction:L,transactionReceipt:p}),C.resolve(p)})}catch(G){k(()=>C.reject(G))}}else k(()=>C.reject(N))}}})}),y}function ah(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:o,includeTransactions:i,poll:a,pollingInterval:c=e.pollingInterval}){const u=typeof a<"u"?a:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),l=i??!1;let d;return u?(()=>{const h=ne(["watchBlocks",e.uid,t,n,r,l,c]);return at(h,{onBlock:s,onError:o},m=>Cn(async()=>{try{const b=await q(e,_e,"getBlock")({blockTag:t,includeTransactions:l});if(b.number!==null&&d?.number!=null){if(b.number===d.number)return;if(b.number-d.number>1&&n)for(let y=d?.number+1n;y<b.number;y++){const x=await q(e,_e,"getBlock")({blockNumber:y,includeTransactions:l});m.onBlock(x,d),d=x}}(d?.number==null||t==="pending"&&b?.number==null||b.number!==null&&b.number>d.number)&&(m.onBlock(b,d),d=b)}catch(b){m.onError?.(b)}},{emitOnBegin:r,interval:c}))})():(()=>{let h=!0,m=!0,b=()=>h=!1;return(async()=>{try{r&&q(e,_e,"getBlock")({blockTag:t,includeTransactions:l}).then(w=>{h&&m&&(s(w,void 0),m=!1)}).catch(o);const y=(()=>{if(e.transport.type==="fallback"){const w=e.transport.transports.find($=>$.config.type==="webSocket"||$.config.type==="ipc");return w?w.value:e.transport}return e.transport})(),{unsubscribe:x}=await y.subscribe({params:["newHeads"],async onData(w){if(!h)return;const $=await q(e,_e,"getBlock")({blockNumber:w.result?.number,includeTransactions:l}).catch(()=>{});h&&(s($,d),m=!1,d=$)},onError(w){o?.(w)}});b=x,h||b()}catch(y){o?.(y)}})(),()=>b()})()}function ch(e,{address:t,args:n,batch:r=!0,event:s,events:o,fromBlock:i,onError:a,onLogs:c,poll:u,pollingInterval:l=e.pollingInterval,strict:d}){const f=typeof u<"u"?u:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),p=d??!1;return f?(()=>{const b=ne(["watchEvent",t,n,r,e.uid,s,l,i]);return at(b,{onLogs:c,onError:a},y=>{let x;i!==void 0&&(x=i-1n);let w,$=!1;const C=Cn(async()=>{if(!$){try{w=await q(e,Na,"createEventFilter")({address:t,args:n,event:s,events:o,strict:p,fromBlock:i})}catch{}$=!0;return}try{let T;if(w)T=await q(e,nr,"getFilterChanges")({filter:w});else{const k=await q(e,Mn,"getBlockNumber")({});x&&x!==k?T=await q(e,fs,"getLogs")({address:t,args:n,event:s,events:o,fromBlock:x+1n,toBlock:k}):T=[],x=k}if(T.length===0)return;if(r)y.onLogs(T);else for(const k of T)y.onLogs([k])}catch(T){w&&T instanceof vt&&($=!1),y.onError?.(T)}},{emitOnBegin:!0,interval:l});return async()=>{w&&await q(e,rr,"uninstallFilter")({filter:w}),C()}})})():(()=>{let b=!0,y=()=>b=!1;return(async()=>{try{const x=(()=>{if(e.transport.type==="fallback"){const T=e.transport.transports.find(k=>k.config.type==="webSocket"||k.config.type==="ipc");return T?T.value:e.transport}return e.transport})(),w=o??(s?[s]:void 0);let $=[];w&&($=[w.flatMap(k=>on({abi:[k],eventName:k.name,args:n}))],s&&($=$[0]));const{unsubscribe:C}=await x.subscribe({params:["logs",{address:t,topics:$}],onData(T){if(!b)return;const k=T.result;try{const{eventName:_,args:N}=cs({abi:w??[],data:k.data,topics:k.topics,strict:p}),G=Ye(k,{args:N,eventName:_});c([G])}catch(_){let N,G;if(_ instanceof en||_ instanceof jn){if(d)return;N=_.abiItem.name,G=_.abiItem.inputs?.some(R=>!("name"in R&&R.name))}const L=Ye(k,{args:G?[]:{},eventName:N});c([L])}},onError(T){a?.(T)}});y=C,b||y()}catch(x){a?.(x)}})(),()=>y()})()}function uh(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:o=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{const u=ne(["watchPendingTransactions",e.uid,t,o]);return at(u,{onTransactions:r,onError:n},l=>{let d;const f=Cn(async()=>{try{if(!d)try{d=await q(e,Ta,"createPendingTransactionFilter")({});return}catch(h){throw f(),h}const p=await q(e,nr,"getFilterChanges")({filter:d});if(p.length===0)return;if(t)l.onTransactions(p);else for(const h of p)l.onTransactions([h])}catch(p){l.onError?.(p)}},{emitOnBegin:!0,interval:o});return async()=>{d&&await q(e,rr,"uninstallFilter")({filter:d}),f()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await e.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!u)return;const p=f.result;r([p])},onError(f){n?.(f)}});l=d,u||l()}catch(d){n?.(d)}})(),()=>l()})()}function fh(e){const{scheme:t,statement:n,...r}=e.match(lh)?.groups??{},{chainId:s,expirationTime:o,issuedAt:i,notBefore:a,requestId:c,...u}=e.match(dh)?.groups??{},l=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...i?{issuedAt:new Date(i)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...l?{resources:l}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const lh=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,dh=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function ph(e){const{address:t,domain:n,message:r,nonce:s,scheme:o,time:i=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||o&&r.scheme!==o||r.expirationTime&&i>=r.expirationTime||r.notBefore&&i<r.notBefore)return!1;try{if(!r.address||!we(r.address,{strict:!1})||t&&!tr(r.address,t))return!1}catch{return!1}return!0}async function hh(e,t){const{address:n,domain:r,message:s,nonce:o,scheme:i,signature:a,time:c=new Date,...u}=t,l=fh(s);if(!l.address||!ph({address:n,domain:r,message:l,nonce:o,scheme:i,time:c}))return!1;const f=La(s);return eo(e,{address:l.address,hash:f,signature:a,...u})}function mh(e){return{call:t=>kn(e,t),createAccessList:t=>Ia(e,t),createBlockFilter:()=>h0(e),createContractEventFilter:t=>fi(e,t),createEventFilter:t=>Na(e,t),createPendingTransactionFilter:()=>Ta(e),estimateContractGas:t=>Zl(e,t),estimateGas:t=>as(e,t),getBalance:t=>Zi(e,t),getBlobBaseFee:()=>m0(e),getBlock:t=>_e(e,t),getBlockNumber:t=>Mn(e,t),getBlockTransactionCount:t=>b0(e,t),getBytecode:t=>Sa(e,t),getChainId:()=>Hi(e),getCode:t=>Sa(e,t),getContractEvents:t=>Ki(e,t),getEip712Domain:t=>g0(e,t),getEnsAddress:t=>Jd(e,t),getEnsAvatar:t=>l0(e,t),getEnsName:t=>d0(e,t),getEnsResolver:t=>p0(e,t),getEnsText:t=>$a(e,t),getFeeHistory:t=>x0(e,t),estimateFeesPerGas:t=>Sl(e,t),getFilterChanges:t=>nr(e,t),getFilterLogs:t=>E0(e,t),getGasPrice:()=>ss(e),getLogs:t=>fs(e,t),getProof:t=>V0(e,t),estimateMaxPriorityFeePerGas:t=>Tl(e,t),getStorageAt:t=>Z0(e,t),getTransaction:t=>Ss(e,t),getTransactionConfirmations:t=>W0(e,t),getTransactionCount:t=>Fi(e,t),getTransactionReceipt:t=>fr(e,t),multicall:t=>K0(e,t),prepareTransactionRequest:t=>Vi(e,t),readContract:t=>Je(e,t),sendRawTransaction:t=>Fd(e,t),simulate:t=>ks(e,t),simulateBlocks:t=>ks(e,t),simulateCalls:t=>Bp(e,t),simulateContract:t=>Nd(e,t),verifyMessage:t=>sh(e,t),verifySiweMessage:t=>hh(e,t),verifyTypedData:t=>oh(e,t),uninstallFilter:t=>rr(e,t),waitForTransactionReceipt:t=>ih(e,t),watchBlocks:t=>ah(e,t),watchBlockNumber:t=>$c(e,t),watchContractEvent:t=>Od(e,t),watchEvent:t=>ch(e,t),watchPendingTransactions:t=>uh(e,t)}}function bh(e){const{key:t="public",name:n="Public Client"}=e;return Ud({...e,key:t,name:n,type:"publicClient"}).extend(mh)}const Ic="0xca11bde05977b3631167028862be2a173976ca11",yh="0xfc5126377f0efc0041c0969ef9ba903ce67d151e",ie=[{inputs:[{components:[{internalType:"address",name:"target",type:"address"},{internalType:"bytes",name:"callData",type:"bytes"}],internalType:"struct Multicall3.Call[]",name:"calls",type:"tuple[]"}],name:"aggregate",outputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"},{internalType:"bytes[]",name:"returnData",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"target",type:"address"},{internalType:"bool",name:"allowFailure",type:"bool"},{internalType:"bytes",name:"callData",type:"bytes"}],internalType:"struct Multicall3.Call3[]",name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{internalType:"bool",name:"success",type:"bool"},{internalType:"bytes",name:"returnData",type:"bytes"}],internalType:"struct Multicall3.Result[]",name:"returnData",type:"tuple[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"target",type:"address"},{internalType:"bool",name:"allowFailure",type:"bool"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"callData",type:"bytes"}],internalType:"struct Multicall3.Call3Value[]",name:"calls",type:"tuple[]"}],name:"aggregate3Value",outputs:[{components:[{internalType:"bool",name:"success",type:"bool"},{internalType:"bytes",name:"returnData",type:"bytes"}],internalType:"struct Multicall3.Result[]",name:"returnData",type:"tuple[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"target",type:"address"},{internalType:"bytes",name:"callData",type:"bytes"}],internalType:"struct Multicall3.Call[]",name:"calls",type:"tuple[]"}],name:"blockAndAggregate",outputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"},{internalType:"bytes32",name:"blockHash",type:"bytes32"},{components:[{internalType:"bool",name:"success",type:"bool"},{internalType:"bytes",name:"returnData",type:"bytes"}],internalType:"struct Multicall3.Result[]",name:"returnData",type:"tuple[]"}],stateMutability:"payable",type:"function"},{inputs:[],name:"getBasefee",outputs:[{internalType:"uint256",name:"basefee",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getBlockHash",outputs:[{internalType:"bytes32",name:"blockHash",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBlockNumber",outputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"chainid",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockCoinbase",outputs:[{internalType:"address",name:"coinbase",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockDifficulty",outputs:[{internalType:"uint256",name:"difficulty",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockGasLimit",outputs:[{internalType:"uint256",name:"gaslimit",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"getEthBalance",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLastBlockHash",outputs:[{internalType:"bytes32",name:"blockHash",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bool",name:"requireSuccess",type:"bool"},{components:[{internalType:"address",name:"target",type:"address"},{internalType:"bytes",name:"callData",type:"bytes"}],internalType:"struct Multicall3.Call[]",name:"calls",type:"tuple[]"}],name:"tryAggregate",outputs:[{components:[{internalType:"bool",name:"success",type:"bool"},{internalType:"bytes",name:"returnData",type:"bytes"}],internalType:"struct Multicall3.Result[]",name:"returnData",type:"tuple[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bool",name:"requireSuccess",type:"bool"},{components:[{internalType:"address",name:"target",type:"address"},{internalType:"bytes",name:"callData",type:"bytes"}],internalType:"struct Multicall3.Call[]",name:"calls",type:"tuple[]"}],name:"tryBlockAndAggregate",outputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"},{internalType:"bytes32",name:"blockHash",type:"bytes32"},{components:[{internalType:"bool",name:"success",type:"bool"},{internalType:"bytes",name:"returnData",type:"bytes"}],internalType:"struct Multicall3.Result[]",name:"returnData",type:"tuple[]"}],stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"provider",type:"address"},{internalType:"address",name:"user",type:"address"}],name:"getUserWalletBalances",outputs:[{internalType:"address[]",name:"",type:"address[]"},{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"assets",type:"uint256"},{internalType:"address",name:"receiver",type:"address"}],name:"deposit",outputs:[{internalType:"uint256",name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"asset",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_srcTokenIn",type:"address"},{internalType:"uint256",name:"_srcAmountIn",type:"uint256"},{internalType:"bytes",name:"_srcTokenInPermitEnvelope",type:"bytes"},{internalType:"address",name:"_srcSwapRouter",type:"address"},{internalType:"bytes",name:"_srcSwapCalldata",type:"bytes"},{internalType:"address",name:"_srcTokenOut",type:"address"},{internalType:"uint256",name:"_srcTokenExpectedAmountOut",type:"uint256"},{internalType:"address",name:"_srcTokenRefundRecipient",type:"address"},{internalType:"address",name:"_target",type:"address"},{internalType:"bytes",name:"_targetData",type:"bytes"}],name:"strictlySwapAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"currency",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"broker",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"}];/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Kt=9e15,ut=1e9,to="0123456789abcdef",yr="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",gr="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",no={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Kt,maxE:Kt,crypto:!1},Nc,tt,H=!0,wr="[DecimalError] ",ft=wr+"Invalid argument: ",Tc=wr+"Precision limit exceeded",Sc=wr+"crypto unavailable",kc="[object Decimal]",ce=Math.floor,re=Math.pow,gh=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,wh=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,vh=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Cc=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Me=1e7,z=7,xh=9007199254740991,Eh=yr.length-1,ro=gr.length-1,B={toStringTag:kc};B.absoluteValue=B.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),F(e)},B.ceil=function(){return F(new this.constructor(this),this.e+1,2)},B.clampedTo=B.clamp=function(e,t){var n,r=this,s=r.constructor;if(e=new s(e),t=new s(t),!e.s||!t.s)return new s(NaN);if(e.gt(t))throw Error(ft+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new s(r)},B.comparedTo=B.cmp=function(e){var t,n,r,s,o=this,i=o.d,a=(e=new o.constructor(e)).d,c=o.s,u=e.s;if(!i||!a)return!c||!u?NaN:c!==u?c:i===a?0:!i^c<0?1:-1;if(!i[0]||!a[0])return i[0]?c:a[0]?-u:0;if(c!==u)return c;if(o.e!==e.e)return o.e>e.e^c<0?1:-1;for(r=i.length,s=a.length,t=0,n=r<s?r:s;t<n;++t)if(i[t]!==a[t])return i[t]>a[t]^c<0?1:-1;return r===s?0:r>s^c<0?1:-1},B.cosine=B.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+z,r.rounding=1,n=Ah(r,_c(r,n)),r.precision=e,r.rounding=t,F(tt==2||tt==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)},B.cubeRoot=B.cbrt=function(){var e,t,n,r,s,o,i,a,c,u,l=this,d=l.constructor;if(!l.isFinite()||l.isZero())return new d(l);for(H=!1,o=l.s*re(l.s*l,1/3),!o||Math.abs(o)==1/0?(n=ae(l.d),e=l.e,(o=(e-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=re(n,1/3),e=ce((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?n="5e"+e:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new d(n),r.s=l.s):r=new d(o.toString()),i=(e=d.precision)+3;;)if(a=r,c=a.times(a).times(a),u=c.plus(l),r=W(u.plus(l).times(a),u.plus(c),i+2,1),ae(a.d).slice(0,i)===(n=ae(r.d)).slice(0,i))if(n=n.slice(i-3,i+1),n=="9999"||!s&&n=="4999"){if(!s&&(F(a,e+1,0),a.times(a).times(a).eq(l))){r=a;break}i+=4,s=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(F(r,e+1,1),t=!r.times(r).times(r).eq(l));break}return H=!0,F(r,e,d.rounding,t)},B.decimalPlaces=B.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-ce(this.e/z))*z,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},B.dividedBy=B.div=function(e){return W(this,new this.constructor(e))},B.dividedToIntegerBy=B.divToInt=function(e){var t=this,n=t.constructor;return F(W(t,new n(e),0,1,1),n.precision,n.rounding)},B.equals=B.eq=function(e){return this.cmp(e)===0},B.floor=function(){return F(new this.constructor(this),this.e+1,3)},B.greaterThan=B.gt=function(e){return this.cmp(e)>0},B.greaterThanOrEqualTo=B.gte=function(e){var t=this.cmp(e);return t==1||t===0},B.hyperbolicCosine=B.cosh=function(){var e,t,n,r,s,o=this,i=o.constructor,a=new i(1);if(!o.isFinite())return new i(o.s?1/0:NaN);if(o.isZero())return a;n=i.precision,r=i.rounding,i.precision=n+Math.max(o.e,o.sd())+4,i.rounding=1,s=o.d.length,s<32?(e=Math.ceil(s/3),t=(1/Br(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),o=Yt(i,1,o.times(t),new i(1),!0);for(var c,u=e,l=new i(8);u--;)c=o.times(o),o=a.minus(c.times(l.minus(c.times(l))));return F(o,i.precision=n,i.rounding=r,!0)},B.hyperbolicSine=B.sinh=function(){var e,t,n,r,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(s.e,s.sd())+4,o.rounding=1,r=s.d.length,r<3)s=Yt(o,2,s,s,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,s=s.times(1/Br(5,e)),s=Yt(o,2,s,s,!0);for(var i,a=new o(5),c=new o(16),u=new o(20);e--;)i=s.times(s),s=s.times(a.plus(i.times(c.times(i).plus(u))))}return o.precision=t,o.rounding=n,F(s,t,n,!0)},B.hyperbolicTangent=B.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,W(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},B.inverseCosine=B.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),r=t.precision,s=t.rounding;return n!==-1?n===0?e.isNeg()?je(t,r,s):new t(0):new t(NaN):e.isZero()?je(t,r+4,s).times(.5):(t.precision=r+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=r,t.rounding=s,e.times(2))},B.inverseHyperbolicCosine=B.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,H=!1,n=n.times(n).minus(1).sqrt().plus(n),H=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},B.inverseHyperbolicSine=B.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,H=!1,n=n.times(n).plus(1).sqrt().plus(n),H=!0,r.precision=e,r.rounding=t,n.ln())},B.inverseHyperbolicTangent=B.atanh=function(){var e,t,n,r,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(e=o.precision,t=o.rounding,r=s.sd(),Math.max(r,e)<2*-s.e-1?F(new o(s),e,t,!0):(o.precision=n=r-s.e,s=W(s.plus(1),new o(1).minus(s),n+e,1),o.precision=e+4,o.rounding=1,s=s.ln(),o.precision=e,o.rounding=t,s.times(.5))):new o(NaN)},B.inverseSine=B.asin=function(){var e,t,n,r,s=this,o=s.constructor;return s.isZero()?new o(s):(t=s.abs().cmp(1),n=o.precision,r=o.rounding,t!==-1?t===0?(e=je(o,n+4,r).times(.5),e.s=s.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,s.times(2)))},B.inverseTangent=B.atan=function(){var e,t,n,r,s,o,i,a,c,u=this,l=u.constructor,d=l.precision,f=l.rounding;if(u.isFinite()){if(u.isZero())return new l(u);if(u.abs().eq(1)&&d+4<=ro)return i=je(l,d+4,f).times(.25),i.s=u.s,i}else{if(!u.s)return new l(NaN);if(d+4<=ro)return i=je(l,d+4,f).times(.5),i.s=u.s,i}for(l.precision=a=d+10,l.rounding=1,n=Math.min(28,a/z+2|0),e=n;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(H=!1,t=Math.ceil(a/z),r=1,c=u.times(u),i=new l(u),s=u;e!==-1;)if(s=s.times(c),o=i.minus(s.div(r+=2)),s=s.times(c),i=o.plus(s.div(r+=2)),i.d[t]!==void 0)for(e=t;i.d[e]===o.d[e]&&e--;);return n&&(i=i.times(2<<n-1)),H=!0,F(i,l.precision=d,l.rounding=f,!0)},B.isFinite=function(){return!!this.d},B.isInteger=B.isInt=function(){return!!this.d&&ce(this.e/z)>this.d.length-2},B.isNaN=function(){return!this.s},B.isNegative=B.isNeg=function(){return this.s<0},B.isPositive=B.isPos=function(){return this.s>0},B.isZero=function(){return!!this.d&&this.d[0]===0},B.lessThan=B.lt=function(e){return this.cmp(e)<0},B.lessThanOrEqualTo=B.lte=function(e){return this.cmp(e)<1},B.logarithm=B.log=function(e){var t,n,r,s,o,i,a,c,u=this,l=u.constructor,d=l.precision,f=l.rounding,p=5;if(e==null)e=new l(10),t=!0;else{if(e=new l(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new l(NaN);t=e.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new l(n&&!n[0]?-1/0:u.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(s=n[0];s%10===0;)s/=10;o=s!==1}if(H=!1,a=d+p,i=dt(u,a),r=t?Er(l,a+10):dt(e,a),c=W(i,r,a,1),Ln(c.d,s=d,f))do if(a+=10,i=dt(u,a),r=t?Er(l,a+10):dt(e,a),c=W(i,r,a,1),!o){+ae(c.d).slice(s+1,s+15)+1==1e14&&(c=F(c,d+1,0));break}while(Ln(c.d,s+=10,f));return H=!0,F(c,d,f)},B.minus=B.sub=function(e){var t,n,r,s,o,i,a,c,u,l,d,f,p=this,h=p.constructor;if(e=new h(e),!p.d||!e.d)return!p.s||!e.s?e=new h(NaN):p.d?e.s=-e.s:e=new h(e.d||p.s!==e.s?p:NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(u=p.d,f=e.d,a=h.precision,c=h.rounding,!u[0]||!f[0]){if(f[0])e.s=-e.s;else if(u[0])e=new h(p);else return new h(c===3?-0:0);return H?F(e,a,c):e}if(n=ce(e.e/z),l=ce(p.e/z),u=u.slice(),o=l-n,o){for(d=o<0,d?(t=u,o=-o,i=f.length):(t=f,n=l,i=u.length),r=Math.max(Math.ceil(a/z),i)+2,o>r&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for(r=u.length,i=f.length,d=r<i,d&&(i=r),r=0;r<i;r++)if(u[r]!=f[r]){d=u[r]<f[r];break}o=0}for(d&&(t=u,u=f,f=t,e.s=-e.s),i=u.length,r=f.length-i;r>0;--r)u[i++]=0;for(r=f.length;r>o;){if(u[--r]<f[r]){for(s=r;s&&u[--s]===0;)u[s]=Me-1;--u[s],u[r]+=Me}u[r]-=f[r]}for(;u[--i]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(e.d=u,e.e=xr(u,n),H?F(e,a,c):e):new h(c===3?-0:0)},B.modulo=B.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?F(new r(n),r.precision,r.rounding):(H=!1,r.modulo==9?(t=W(n,e.abs(),0,3,1),t.s*=e.s):t=W(n,e,0,r.modulo,1),t=t.times(e),H=!0,n.minus(t))},B.naturalExponential=B.exp=function(){return so(this)},B.naturalLogarithm=B.ln=function(){return dt(this)},B.negated=B.neg=function(){var e=new this.constructor(this);return e.s=-e.s,F(e)},B.plus=B.add=function(e){var t,n,r,s,o,i,a,c,u,l,d=this,f=d.constructor;if(e=new f(e),!d.d||!e.d)return!d.s||!e.s?e=new f(NaN):d.d||(e=new f(e.d||d.s===e.s?d:NaN)),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(u=d.d,l=e.d,a=f.precision,c=f.rounding,!u[0]||!l[0])return l[0]||(e=new f(d)),H?F(e,a,c):e;if(o=ce(d.e/z),r=ce(e.e/z),u=u.slice(),s=o-r,s){for(s<0?(n=u,s=-s,i=l.length):(n=l,r=o,i=u.length),o=Math.ceil(a/z),i=o>i?o+1:i+1,s>i&&(s=i,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(i=u.length,s=l.length,i-s<0&&(s=i,n=l,l=u,u=n),t=0;s;)t=(u[--s]=u[s]+l[s]+t)/Me|0,u[s]%=Me;for(t&&(u.unshift(t),++r),i=u.length;u[--i]==0;)u.pop();return e.d=u,e.e=xr(u,r),H?F(e,a,c):e},B.precision=B.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ft+e);return n.d?(t=Mc(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},B.round=function(){var e=this,t=e.constructor;return F(new t(e),e.e+1,t.rounding)},B.sine=B.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+z,r.rounding=1,n=Ph(r,_c(r,n)),r.precision=e,r.rounding=t,F(tt>2?n.neg():n,e,t,!0)):new r(NaN)},B.squareRoot=B.sqrt=function(){var e,t,n,r,s,o,i=this,a=i.d,c=i.e,u=i.s,l=i.constructor;if(u!==1||!a||!a[0])return new l(!u||u<0&&(!a||a[0])?NaN:a?i:1/0);for(H=!1,u=Math.sqrt(+i),u==0||u==1/0?(t=ae(a),(t.length+c)%2==0&&(t+="0"),u=Math.sqrt(t),c=ce((c+1)/2)-(c<0||c%2),u==1/0?t="5e"+c:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),r=new l(t)):r=new l(u.toString()),n=(c=l.precision)+3;;)if(o=r,r=o.plus(W(i,o,n+2,1)).times(.5),ae(o.d).slice(0,n)===(t=ae(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!s&&t=="4999"){if(!s&&(F(o,c+1,0),o.times(o).eq(i))){r=o;break}n+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(F(r,c+1,1),e=!r.times(r).eq(i));break}return H=!0,F(r,c,l.rounding,e)},B.tangent=B.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=W(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,F(tt==2||tt==4?n.neg():n,e,t,!0)):new r(NaN)},B.times=B.mul=function(e){var t,n,r,s,o,i,a,c,u,l=this,d=l.constructor,f=l.d,p=(e=new d(e)).d;if(e.s*=l.s,!f||!f[0]||!p||!p[0])return new d(!e.s||f&&!f[0]&&!p||p&&!p[0]&&!f?NaN:!f||!p?e.s/0:e.s*0);for(n=ce(l.e/z)+ce(e.e/z),c=f.length,u=p.length,c<u&&(o=f,f=p,p=o,i=c,c=u,u=i),o=[],i=c+u,r=i;r--;)o.push(0);for(r=u;--r>=0;){for(t=0,s=c+r;s>r;)a=o[s]+p[r]*f[s-r-1]+t,o[s--]=a%Me|0,t=a/Me|0;o[s]=(o[s]+t)%Me|0}for(;!o[--i];)o.pop();return t?++n:o.shift(),e.d=o,e.e=xr(o,n),H?F(e,d.precision,d.rounding):e},B.toBinary=function(e,t){return oo(this,2,e,t)},B.toDecimalPlaces=B.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(me(e,0,ut),t===void 0?t=r.rounding:me(t,0,8),F(n,e+n.e+1,t))},B.toExponential=function(e,t){var n,r=this,s=r.constructor;return e===void 0?n=ze(r,!0):(me(e,0,ut),t===void 0?t=s.rounding:me(t,0,8),r=F(new s(r),e+1,t),n=ze(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},B.toFixed=function(e,t){var n,r,s=this,o=s.constructor;return e===void 0?n=ze(s):(me(e,0,ut),t===void 0?t=o.rounding:me(t,0,8),r=F(new o(s),e+s.e+1,t),n=ze(r,!1,e+r.e+1)),s.isNeg()&&!s.isZero()?"-"+n:n},B.toFraction=function(e){var t,n,r,s,o,i,a,c,u,l,d,f,p=this,h=p.d,m=p.constructor;if(!h)return new m(p);if(u=n=new m(1),r=c=new m(0),t=new m(r),o=t.e=Mc(h)-p.e-1,i=o%z,t.d[0]=re(10,i<0?z+i:i),e==null)e=o>0?t:u;else{if(a=new m(e),!a.isInt()||a.lt(u))throw Error(ft+a);e=a.gt(t)?o>0?t:u:a}for(H=!1,a=new m(ae(h)),l=m.precision,m.precision=o=h.length*z*2;d=W(a,t,0,1,1),s=n.plus(d.times(r)),s.cmp(e)!=1;)n=r,r=s,s=u,u=c.plus(d.times(s)),c=s,s=t,t=a.minus(d.times(s)),a=s;return s=W(e.minus(n),r,0,1,1),c=c.plus(s.times(u)),n=n.plus(s.times(r)),c.s=u.s=p.s,f=W(u,r,o,1).minus(p).abs().cmp(W(c,n,o,1).minus(p).abs())<1?[u,r]:[c,n],m.precision=l,H=!0,f},B.toHexadecimal=B.toHex=function(e,t){return oo(this,16,e,t)},B.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:me(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(H=!1,n=W(n,e,0,t,1).times(e),H=!0,F(n)):(e.s=n.s,n=e),n},B.toNumber=function(){return+this},B.toOctal=function(e,t){return oo(this,8,e,t)},B.toPower=B.pow=function(e){var t,n,r,s,o,i,a=this,c=a.constructor,u=+(e=new c(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new c(re(+a,u));if(a=new c(a),a.eq(1))return a;if(r=c.precision,o=c.rounding,e.eq(1))return F(a,r,o);if(t=ce(e.e/z),t>=e.d.length-1&&(n=u<0?-u:u)<=xh)return s=Rc(c,a,n,r),e.s<0?new c(1).div(s):F(s,r,o);if(i=a.s,i<0){if(t<e.d.length-1)return new c(NaN);if((e.d[t]&1)==0&&(i=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=i,a}return n=re(+a,u),t=n==0||!isFinite(n)?ce(u*(Math.log("0."+ae(a.d))/Math.LN10+a.e+1)):new c(n+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?i/0:0):(H=!1,c.rounding=a.s=1,n=Math.min(12,(t+"").length),s=so(e.times(dt(a,r+n)),r),s.d&&(s=F(s,r+5,1),Ln(s.d,r,o)&&(t=r+10,s=F(so(e.times(dt(a,t+n)),t),t+5,1),+ae(s.d).slice(r+1,r+15)+1==1e14&&(s=F(s,r+1,0)))),s.s=i,H=!0,c.rounding=o,F(s,r,o))},B.toPrecision=function(e,t){var n,r=this,s=r.constructor;return e===void 0?n=ze(r,r.e<=s.toExpNeg||r.e>=s.toExpPos):(me(e,1,ut),t===void 0?t=s.rounding:me(t,0,8),r=F(new s(r),e,t),n=ze(r,e<=r.e||r.e<=s.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},B.toSignificantDigits=B.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(me(e,1,ut),t===void 0?t=r.rounding:me(t,0,8)),F(new r(n),e,t)},B.toString=function(){var e=this,t=e.constructor,n=ze(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},B.truncated=B.trunc=function(){return F(new this.constructor(this),this.e+1,1)},B.valueOf=B.toJSON=function(){var e=this,t=e.constructor,n=ze(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function ae(e){var t,n,r,s=e.length-1,o="",i=e[0];if(s>0){for(o+=i,t=1;t<s;t++)r=e[t]+"",n=z-r.length,n&&(o+=lt(n)),o+=r;i=e[t],r=i+"",n=z-r.length,n&&(o+=lt(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return o+i}function me(e,t,n){if(e!==~~e||e<t||e>n)throw Error(ft+e)}function Ln(e,t,n,r){var s,o,i,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=z,s=0):(s=Math.ceil((t+1)/z),t%=z),o=re(10,z-t),a=e[s]%o|0,r==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),i=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):i=(n<4&&a+1==o||n>3&&a+1==o/2)&&(e[s+1]/o/100|0)==re(10,t-2)-1||(a==o/2||a==0)&&(e[s+1]/o/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),i=(r||n<4)&&a==9999||!r&&n>3&&a==4999):i=((r||n<4)&&a+1==o||!r&&n>3&&a+1==o/2)&&(e[s+1]/o/1e3|0)==re(10,t-3)-1,i}function vr(e,t,n){for(var r,s=[0],o,i=0,a=e.length;i<a;){for(o=s.length;o--;)s[o]*=t;for(s[0]+=to.indexOf(e.charAt(i++)),r=0;r<s.length;r++)s[r]>n-1&&(s[r+1]===void 0&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}function Ah(e,t){var n,r,s;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),s=(1/Br(4,n)).toString()):(n=16,s="2.3283064365386962890625e-10"),e.precision+=n,t=Yt(e,1,t.times(s),new e(1));for(var o=n;o--;){var i=t.times(t);t=i.times(i).minus(i).times(8).plus(1)}return e.precision-=n,t}var W=function(){function e(r,s,o){var i,a=0,c=r.length;for(r=r.slice();c--;)i=r[c]*s+a,r[c]=i%o|0,a=i/o|0;return a&&r.unshift(a),r}function t(r,s,o,i){var a,c;if(o!=i)c=o>i?1:-1;else for(a=c=0;a<o;a++)if(r[a]!=s[a]){c=r[a]>s[a]?1:-1;break}return c}function n(r,s,o,i){for(var a=0;o--;)r[o]-=a,a=r[o]<s[o]?1:0,r[o]=a*i+r[o]-s[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,o,i,a,c){var u,l,d,f,p,h,m,b,y,x,w,$,C,T,k,_,N,G,L,R,E=r.constructor,v=r.s==s.s?1:-1,g=r.d,A=s.d;if(!g||!g[0]||!A||!A[0])return new E(!r.s||!s.s||(g?A&&g[0]==A[0]:!A)?NaN:g&&g[0]==0||!A?v*0:v/0);for(c?(p=1,l=r.e-s.e):(c=Me,p=z,l=ce(r.e/p)-ce(s.e/p)),L=A.length,N=g.length,y=new E(v),x=y.d=[],d=0;A[d]==(g[d]||0);d++);if(A[d]>(g[d]||0)&&l--,o==null?(T=o=E.precision,i=E.rounding):a?T=o+(r.e-s.e)+1:T=o,T<0)x.push(1),h=!0;else{if(T=T/p+2|0,d=0,L==1){for(f=0,A=A[0],T++;(d<N||f)&&T--;d++)k=f*c+(g[d]||0),x[d]=k/A|0,f=k%A|0;h=f||d<N}else{for(f=c/(A[0]+1)|0,f>1&&(A=e(A,f,c),g=e(g,f,c),L=A.length,N=g.length),_=L,w=g.slice(0,L),$=w.length;$<L;)w[$++]=0;R=A.slice(),R.unshift(0),G=A[0],A[1]>=c/2&&++G;do f=0,u=t(A,w,L,$),u<0?(C=w[0],L!=$&&(C=C*c+(w[1]||0)),f=C/G|0,f>1?(f>=c&&(f=c-1),m=e(A,f,c),b=m.length,$=w.length,u=t(m,w,b,$),u==1&&(f--,n(m,L<b?R:A,b,c))):(f==0&&(u=f=1),m=A.slice()),b=m.length,b<$&&m.unshift(0),n(w,m,$,c),u==-1&&($=w.length,u=t(A,w,L,$),u<1&&(f++,n(w,L<$?R:A,$,c))),$=w.length):u===0&&(f++,w=[0]),x[d++]=f,u&&w[0]?w[$++]=g[_]||0:(w=[g[_]],$=1);while((_++<N||w[0]!==void 0)&&T--);h=w[0]!==void 0}x[0]||x.shift()}if(p==1)y.e=l,Nc=h;else{for(d=1,f=x[0];f>=10;f/=10)d++;y.e=d+l*p-1,F(y,a?o+y.e+1:o,i,h)}return y}}();function F(e,t,n,r){var s,o,i,a,c,u,l,d,f,p=e.constructor;e:if(t!=null){if(d=e.d,!d)return e;for(s=1,a=d[0];a>=10;a/=10)s++;if(o=t-s,o<0)o+=z,i=t,l=d[f=0],c=l/re(10,s-i-1)%10|0;else if(f=Math.ceil((o+1)/z),a=d.length,f>=a)if(r){for(;a++<=f;)d.push(0);l=c=0,s=1,o%=z,i=o-z+1}else break e;else{for(l=a=d[f],s=1;a>=10;a/=10)s++;o%=z,i=o-z+s,c=i<0?0:l/re(10,s-i-1)%10|0}if(r=r||t<0||d[f+1]!==void 0||(i<0?l:l%re(10,s-i-1)),u=n<4?(c||r)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||r||n==6&&(o>0?i>0?l/re(10,s-i):0:d[f-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,u?(t-=e.e+1,d[0]=re(10,(z-t%z)%z),e.e=-t||0):d[0]=e.e=0,e;if(o==0?(d.length=f,a=1,f--):(d.length=f+1,a=re(10,z-o),d[f]=i>0?(l/re(10,s-i)%re(10,i)|0)*a:0),u)for(;;)if(f==0){for(o=1,i=d[0];i>=10;i/=10)o++;for(i=d[0]+=a,a=1;i>=10;i/=10)a++;o!=a&&(e.e++,d[0]==Me&&(d[0]=1));break}else{if(d[f]+=a,d[f]!=Me)break;d[f--]=0,a=1}for(o=d.length;d[--o]===0;)d.pop()}return H&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function ze(e,t,n){if(!e.isFinite())return Lc(e);var r,s=e.e,o=ae(e.d),i=o.length;return t?(n&&(r=n-i)>0?o=o.charAt(0)+"."+o.slice(1)+lt(r):i>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):s<0?(o="0."+lt(-s-1)+o,n&&(r=n-i)>0&&(o+=lt(r))):s>=i?(o+=lt(s+1-i),n&&(r=n-s-1)>0&&(o=o+"."+lt(r))):((r=s+1)<i&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-i)>0&&(s+1===i&&(o+="."),o+=lt(r))),o}function xr(e,t){var n=e[0];for(t*=z;n>=10;n/=10)t++;return t}function Er(e,t,n){if(t>Eh)throw H=!0,n&&(e.precision=n),Error(Tc);return F(new e(yr),t,1,!0)}function je(e,t,n){if(t>ro)throw Error(Tc);return F(new e(gr),t,n,!0)}function Mc(e){var t=e.length-1,n=t*z+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function lt(e){for(var t="";e--;)t+="0";return t}function Rc(e,t,n,r){var s,o=new e(1),i=Math.ceil(r/z+4);for(H=!1;;){if(n%2&&(o=o.times(t),Uc(o.d,i)&&(s=!0)),n=ce(n/2),n===0){n=o.d.length-1,s&&o.d[n]===0&&++o.d[n];break}t=t.times(t),Uc(t.d,i)}return H=!0,o}function Oc(e){return e.d[e.d.length-1]&1}function Fc(e,t,n){for(var r,s,o=new e(t[0]),i=0;++i<t.length;){if(s=new e(t[i]),!s.s){o=s;break}r=o.cmp(s),(r===n||r===0&&o.s===n)&&(o=s)}return o}function so(e,t){var n,r,s,o,i,a,c,u=0,l=0,d=0,f=e.constructor,p=f.rounding,h=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(H=!1,c=h):c=t,a=new f(.03125);e.e>-2;)e=e.times(a),d+=5;for(r=Math.log(re(2,d))/Math.LN10*2+5|0,c+=r,n=o=i=new f(1),f.precision=c;;){if(o=F(o.times(e),c,1),n=n.times(++l),a=i.plus(W(o,n,c,1)),ae(a.d).slice(0,c)===ae(i.d).slice(0,c)){for(s=d;s--;)i=F(i.times(i),c,1);if(t==null)if(u<3&&Ln(i.d,c-r,p,u))f.precision=c+=10,n=o=a=new f(1),l=0,u++;else return F(i,f.precision=h,p,H=!0);else return f.precision=h,i}i=a}}function dt(e,t){var n,r,s,o,i,a,c,u,l,d,f,p=1,h=10,m=e,b=m.d,y=m.constructor,x=y.rounding,w=y.precision;if(m.s<0||!b||!b[0]||!m.e&&b[0]==1&&b.length==1)return new y(b&&!b[0]?-1/0:m.s!=1?NaN:b?0:m);if(t==null?(H=!1,l=w):l=t,y.precision=l+=h,n=ae(b),r=n.charAt(0),Math.abs(o=m.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=ae(m.d),r=n.charAt(0),p++;o=m.e,r>1?(m=new y("0."+n),o++):m=new y(r+"."+n.slice(1))}else return u=Er(y,l+2,w).times(o+""),m=dt(new y(r+"."+n.slice(1)),l-h).plus(u),y.precision=w,t==null?F(m,w,x,H=!0):m;for(d=m,c=i=m=W(m.minus(1),m.plus(1),l,1),f=F(m.times(m),l,1),s=3;;){if(i=F(i.times(f),l,1),u=c.plus(W(i,new y(s),l,1)),ae(u.d).slice(0,l)===ae(c.d).slice(0,l))if(c=c.times(2),o!==0&&(c=c.plus(Er(y,l+2,w).times(o+""))),c=W(c,new y(p),l,1),t==null)if(Ln(c.d,l-h,x,a))y.precision=l+=h,u=i=m=W(d.minus(1),d.plus(1),l,1),f=F(m.times(m),l,1),s=a=1;else return F(c,y.precision=w,x,H=!0);else return y.precision=w,c;c=u,s+=2}}function Lc(e){return String(e.s*e.s/0)}function Ar(e,t){var n,r,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(s=t.length;t.charCodeAt(s-1)===48;--s);if(t=t.slice(r,s),t){if(s-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%z,n<0&&(r+=z),r<s){for(r&&e.d.push(+t.slice(0,r)),s-=z;r<s;)e.d.push(+t.slice(r,r+=z));t=t.slice(r),r=z-t.length}else r-=s;for(;r--;)t+="0";e.d.push(+t),H&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Bh(e,t){var n,r,s,o,i,a,c,u,l;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Cc.test(t))return Ar(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(wh.test(t))n=16,t=t.toLowerCase();else if(gh.test(t))n=2;else if(vh.test(t))n=8;else throw Error(ft+t);for(o=t.search(/p/i),o>0?(c=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),i=o>=0,r=e.constructor,i&&(t=t.replace(".",""),a=t.length,o=a-o,s=Rc(r,new r(n),o,o*2)),u=vr(t,n,Me),l=u.length-1,o=l;u[o]===0;--o)u.pop();return o<0?new r(e.s*0):(e.e=xr(u,l),e.d=u,H=!1,i&&(e=W(e,s,a*4)),c&&(e=e.times(Math.abs(c)<54?re(2,c):ee.pow(2,c))),H=!0,e)}function Ph(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:Yt(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/Br(5,n)),t=Yt(e,2,t,t);for(var s,o=new e(5),i=new e(16),a=new e(20);n--;)s=t.times(t),t=t.times(o.plus(s.times(i.times(s).minus(a))));return t}function Yt(e,t,n,r,s){var o,i,a,c,u=e.precision,l=Math.ceil(u/z);for(H=!1,c=n.times(n),a=new e(r);;){if(i=W(a.times(c),new e(t++*t++),u,1),a=s?r.plus(i):r.minus(i),r=W(i.times(c),new e(t++*t++),u,1),i=a.plus(r),i.d[l]!==void 0){for(o=l;i.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=r,r=i,i=o}return H=!0,i.d.length=l+1,i}function Br(e,t){for(var n=e;--t;)n*=e;return n}function _c(e,t){var n,r=t.s<0,s=je(e,e.precision,1),o=s.times(.5);if(t=t.abs(),t.lte(o))return tt=r?4:1,t;if(n=t.divToInt(s),n.isZero())tt=r?3:2;else{if(t=t.minus(n.times(s)),t.lte(o))return tt=Oc(n)?r?2:3:r?4:1,t;tt=Oc(n)?r?1:4:r?3:2}return t.minus(s).abs()}function oo(e,t,n,r){var s,o,i,a,c,u,l,d,f,p=e.constructor,h=n!==void 0;if(h?(me(n,1,ut),r===void 0?r=p.rounding:me(r,0,8)):(n=p.precision,r=p.rounding),!e.isFinite())l=Lc(e);else{for(l=ze(e),i=l.indexOf("."),h?(s=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):s=t,i>=0&&(l=l.replace(".",""),f=new p(1),f.e=l.length-i,f.d=vr(ze(f),10,s),f.e=f.d.length),d=vr(l,10,s),o=c=d.length;d[--c]==0;)d.pop();if(!d[0])l=h?"0p+0":"0";else{if(i<0?o--:(e=new p(e),e.d=d,e.e=o,e=W(e,f,n,r,0,s),d=e.d,o=e.e,u=Nc),i=d[n],a=s/2,u=u||d[n+1]!==void 0,u=r<4?(i!==void 0||u)&&(r===0||r===(e.s<0?3:2)):i>a||i===a&&(r===4||u||r===6&&d[n-1]&1||r===(e.s<0?8:7)),d.length=n,u)for(;++d[--n]>s-1;)d[n]=0,n||(++o,d.unshift(1));for(c=d.length;!d[c-1];--c);for(i=0,l="";i<c;i++)l+=to.charAt(d[i]);if(h){if(c>1)if(t==16||t==8){for(i=t==16?4:3,--c;c%i;c++)l+="0";for(d=vr(l,s,t),c=d.length;!d[c-1];--c);for(i=1,l="1.";i<c;i++)l+=to.charAt(d[i])}else l=l.charAt(0)+"."+l.slice(1);l=l+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)l="0"+l;l="0."+l}else if(++o>c)for(o-=c;o--;)l+="0";else o<c&&(l=l.slice(0,o)+"."+l.slice(o))}l=(t==16?"0x":t==2?"0b":t==8?"0o":"")+l}return e.s<0?"-"+l:l}function Uc(e,t){if(e.length>t)return e.length=t,!0}function $h(e){return new this(e).abs()}function Ih(e){return new this(e).acos()}function Nh(e){return new this(e).acosh()}function Th(e,t){return new this(e).plus(t)}function Sh(e){return new this(e).asin()}function kh(e){return new this(e).asinh()}function Ch(e){return new this(e).atan()}function Mh(e){return new this(e).atanh()}function Rh(e,t){e=new this(e),t=new this(t);var n,r=this.precision,s=this.rounding,o=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=je(this,o,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?je(this,r,s):new this(0),n.s=e.s):!e.d||t.isZero()?(n=je(this,o,1).times(.5),n.s=e.s):t.s<0?(this.precision=o,this.rounding=1,n=this.atan(W(e,t,o,1)),t=je(this,o,1),this.precision=r,this.rounding=s,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(W(e,t,o,1)),n}function Oh(e){return new this(e).cbrt()}function Fh(e){return F(e=new this(e),e.e+1,2)}function Lh(e,t,n){return new this(e).clamp(t,n)}function _h(e){if(!e||typeof e!="object")throw Error(wr+"Object expected");var t,n,r,s=e.defaults===!0,o=["precision",1,ut,"rounding",0,8,"toExpNeg",-Kt,0,"toExpPos",0,Kt,"maxE",0,Kt,"minE",-Kt,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],s&&(this[n]=no[n]),(r=e[n])!==void 0)if(ce(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(ft+n+": "+r);if(n="crypto",s&&(this[n]=no[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Sc);else this[n]=!1;else throw Error(ft+n+": "+r);return this}function Uh(e){return new this(e).cos()}function zh(e){return new this(e).cosh()}function zc(e){var t,n,r;function s(o){var i,a,c,u=this;if(!(u instanceof s))return new s(o);if(u.constructor=s,jc(o)){u.s=o.s,H?!o.d||o.e>s.maxE?(u.e=NaN,u.d=null):o.e<s.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(c=typeof o,c==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(i=0,a=o;a>=10;a/=10)i++;H?i>s.maxE?(u.e=NaN,u.d=null):i<s.minE?(u.e=0,u.d=[0]):(u.e=i,u.d=[o]):(u.e=i,u.d=[o]);return}if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return Ar(u,o.toString())}if(c==="string")return(a=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(a===43&&(o=o.slice(1)),u.s=1),Cc.test(o)?Ar(u,o):Bh(u,o);if(c==="bigint")return o<0?(o=-o,u.s=-1):u.s=1,Ar(u,o.toString());throw Error(ft+o)}if(s.prototype=B,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=_h,s.clone=zc,s.isDecimal=jc,s.abs=$h,s.acos=Ih,s.acosh=Nh,s.add=Th,s.asin=Sh,s.asinh=kh,s.atan=Ch,s.atanh=Mh,s.atan2=Rh,s.cbrt=Oh,s.ceil=Fh,s.clamp=Lh,s.cos=Uh,s.cosh=zh,s.div=jh,s.exp=Dh,s.floor=qh,s.hypot=Hh,s.ln=Gh,s.log=Vh,s.log10=Wh,s.log2=Zh,s.max=Kh,s.min=Yh,s.mod=Xh,s.mul=Jh,s.pow=Qh,s.random=em,s.round=tm,s.sign=nm,s.sin=rm,s.sinh=sm,s.sqrt=om,s.sub=im,s.sum=am,s.tan=cm,s.tanh=um,s.trunc=fm,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return s.config(e),s}function jh(e,t){return new this(e).div(t)}function Dh(e){return new this(e).exp()}function qh(e){return F(e=new this(e),e.e+1,3)}function Hh(){var e,t,n=new this(0);for(H=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return H=!0,new this(1/0);n=t}return H=!0,n.sqrt()}function jc(e){return e instanceof ee||e&&e.toStringTag===kc||!1}function Gh(e){return new this(e).ln()}function Vh(e,t){return new this(e).log(t)}function Zh(e){return new this(e).log(2)}function Wh(e){return new this(e).log(10)}function Kh(){return Fc(this,arguments,-1)}function Yh(){return Fc(this,arguments,1)}function Xh(e,t){return new this(e).mod(t)}function Jh(e,t){return new this(e).mul(t)}function Qh(e,t){return new this(e).pow(t)}function em(e){var t,n,r,s,o=0,i=new this(1),a=[];if(e===void 0?e=this.precision:me(e,1,ut),r=Math.ceil(e/z),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;)s=t[o],s>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=s%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);o<r;)s=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((t[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(s%1e7),o+=4);o=r/4}else throw Error(Sc);else for(;o<r;)a[o++]=Math.random()*1e7|0;for(r=a[--o],e%=z,r&&e&&(s=re(10,z-e),a[o]=(r/s|0)*s);a[o]===0;o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=z)a.shift();for(r=1,s=a[0];s>=10;s/=10)r++;r<z&&(n-=z-r)}return i.e=n,i.d=a,i}function tm(e){return F(e=new this(e),e.e+1,this.rounding)}function nm(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function rm(e){return new this(e).sin()}function sm(e){return new this(e).sinh()}function om(e){return new this(e).sqrt()}function im(e,t){return new this(e).sub(t)}function am(){var e=0,t=arguments,n=new this(t[e]);for(H=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return H=!0,F(n,this.precision,this.rounding)}function cm(e){return new this(e).tan()}function um(e){return new this(e).tanh()}function fm(e){return F(e=new this(e),e.e+1,1)}B[Symbol.for("nodejs.util.inspect.custom")]=B.toString,B[Symbol.toStringTag]="Decimal";var ee=B.constructor=zc(no);yr=new ee(yr),gr=new ee(gr);function _n(e){const t=new Blob([JSON.stringify(e)],{type:"application/json"});return new Response(t,{status:200,statusText:"OK",headers:{"Content-Type":"application/json"}})}function Re(...e){console.debug("[NEXUS-INJECTION-DEBUGGER]",...e)}async function lm(){if(!window.nexus?.getUnifiedBalances){let e=!1;for(;!e;)await new Promise(t=>setTimeout(t,10)),e=!!window.nexus?.getUnifiedBalances}return!0}const pt={UNIFIED_BALANCES:"unifiedBalances",ALREADY_RUNNING:"unifiedBalancesAlreadyRunning"};window.nexusCache=new Map,window.nexus&&window.nexus.getUnifiedBalances().then(e=>{window.nexusCache.set(pt.UNIFIED_BALANCES,{balances:e,expiry:Date.now()+3e4}),Re("Unified balances cached:",e)}).catch(e=>{Re("Failed to fetch unified balances:",e)});async function Xt(){if(Re("UNIFIED BALANCES",window.nexusCache,window.nexusCache.has(pt.UNIFIED_BALANCES),window.nexusCache.get(pt.UNIFIED_BALANCES),Date.now()),window.nexusCache.has(pt.UNIFIED_BALANCES)){const t=window.nexusCache.get(pt.UNIFIED_BALANCES);if(Re("UNIFIED BALANCES CACHED",t,Date.now()),t.expiry>Date.now())return Re("UNIFIED BALANCES RETURNING CACHE"),t.balances}Re("UNIFIED BALANCES CACHE FALLBACK"),window.nexusCache.set(pt.ALREADY_RUNNING,!0),Re("UNIFIED BALANCES FETCHING FROM NETWORK"),await lm();const e=await window.nexus.getUnifiedBalances();return window.nexusCache.set(pt.ALREADY_RUNNING,!1),Re("UNIFIED BALANCES FETCHED FROM NETWORK",e),window.nexusCache.set(pt.UNIFIED_BALANCES,{balances:e,expiry:Date.now()+60*1e3}),Re("UNIFIED BALANCES Unified balances fetched and cached:",e),e}const dm=T0({id:999,name:"HyperEVM Mainnet",network:"hyperevm",nativeCurrency:{name:"HYPE",symbol:"HYPE",decimals:18},rpcUrls:{default:{http:["https://rpc.hyperliquid.xyz/evm"]},public:{http:["https://rpc.hyperliquid.xyz/evm"]}},blockExplorers:{default:{name:"HyperEVM Explorer",url:"https://hyperevmscan.io/"}}}),pm=bh({chain:dm,transport:Wd()});function hm(e){return["app.hyperlend.finance"].find(n=>e.includes(n))}function mm(){const e=window.fetch;window.decodeFunctionData=Bt,window.MulticallAbi=ie,window.decodeFunctionResult=ke,window.fetch=async function(...t){const n=await e.apply(this,t);if(t[1]&&t[1].body){const r=t[1].body;let s;try{s=new TextDecoder().decode(r)}catch{s=r}let o;try{o=JSON.parse(s)}catch{return e.apply(this,t)}if(Array.isArray(o)){const i=[],a=await n.clone().json();for(let c=0;c<o.length;c++){const u=o[c];if(u.method==="eth_call"&&u.params?.[0]&&(u.params[0].to?.toLowerCase()===Ic||u.params[0].to?.toLowerCase()===yh)){const l=Bt({abi:ie,data:u.params[0].data}),d=a.find(f=>f.id===u.id);if(l.functionName==="aggregate3"&&d?.result)try{const f=ke({abi:ie,functionName:"aggregate3",data:d.result}),p=l.args[0],h=await Xt();p.forEach((b,y)=>{try{if(Bt({abi:ie,data:b.callData}).functionName!=="balanceOf")return;const w=h.findIndex(T=>T.symbol==="USDC"&&T.breakdown.some(_=>_.chain.id===999)?!1:T.breakdown.some(k=>k.contractAddress.toLowerCase()===b.target.toLowerCase()));if(w===-1)return;const $=h[w],C=$.breakdown.find(T=>T.contractAddress.toLowerCase()===b.target.toLowerCase());f[y].returnData=ct({abi:ie,functionName:"balanceOf",result:BigInt(new ee($.balance).mul(ee.pow(10,C?.decimals||$.decimals)).floor().toFixed())})}catch{return f[y]}});const m=ct({abi:ie,functionName:"aggregate3",result:f});i.push({jsonrpc:"2.0",id:u.id,result:m})}catch{i.push({jsonrpc:"2.0",id:u.id,result:d.result})}else if(l.functionName==="deposit"&&l.args)try{const f=await Xt(),p=await pm.readContract({address:u?.params[0]?.to,abi:ie,functionName:"asset"}),h=f.findIndex(x=>x.symbol==="USDC"&&x.breakdown.some($=>$.chain.id===999)?!1:x.breakdown.some(w=>w.contractAddress.toLowerCase()===String(p)?.toLowerCase())),m=f[h],b=m?.breakdown.find(x=>x.contractAddress?.toLowerCase()===String(p)?.toLowerCase()),y=ct({abi:ie,functionName:"deposit",result:BigInt(new ee(b.balance).mul(ee.pow(10,b.decimals||m?.decimals)).floor().toFixed())});i.push({jsonrpc:"2.0",id:u.id,result:y})}catch{i.push({jsonrpc:"2.0",id:u.id,result:d?.result})}else i.push({jsonrpc:"2.0",id:u.id,result:d?.result})}else if(u.method==="eth_getBalance"&&u.params?.[0]){const l=await Xt(),d=999,f=new ee(d).toNumber(),p=l.find(h=>h.symbol!=="USDC"&&h.breakdown.find(m=>m.chain.id===f&&m.contractAddress===xe));p&&i.push({jsonrpc:"2.0",id:u.id,result:new ee(p.balance||0).mul(ee.pow(10,18)).toHexadecimal()})}}if(i.length===o.length)return _n(i)}if(o.method==="eth_estimateGas"&&o.params?.[0]&&(o.params[0].data.toLowerCase().startsWith("0xe28c8be3")||o.params[0].data.toLowerCase().startsWith("0xf24f0847"))&&hm(window.origin))return _n({jsonrpc:"2.0",id:o.id,result:new ee(1e6).toHexadecimal()});if(o.method==="eth_call"&&o.params?.[0]&&o.params?.[0].data.toLowerCase().startsWith("0x70a08231")){const i=await Xt(),a=String(o.params?.[0].to).toLowerCase();if(Bt({abi:ie,data:o.params[0].data}).functionName==="balanceOf"){const u=i.findIndex(p=>p.symbol==="USDC"&&p.breakdown.some(m=>m.chain.id===999)?!1:p.breakdown.some(h=>h.contractAddress.toLowerCase()===a)),l=i[u],d=l.breakdown.find(p=>p.contractAddress.toLowerCase()===a),f=ct({abi:ie,functionName:"balanceOf",result:BigInt(new ee(l.balance).mul(ee.pow(10,d.decimals||l.decimals)).floor().toFixed())});return _n({jsonrpc:"2.0",id:o.id,result:f})}}if(o.method==="eth_getBalance"&&o.params?.[0]){const i=await Xt(),a=await window.nexus.request({method:"eth_chainId"}),c=parseInt(String(a),16),u=i?.find(l=>l.breakdown.find(d=>d.contractAddress===xe&&d.chain.id===Number(c)));if(u)return _n({jsonrpc:"2.0",id:o.id,result:new ee(u.balance).mul(ee.pow(10,18)).toHexadecimal()})}if(o.method==="eth_call"&&o.params?.[0]&&o.params[0].to?.toLowerCase()===Ic){const i=Bt({abi:ie,data:o.params[0].data});if(i.functionName==="balanceOf"&&Re("BALANCE OF CALLED",i),i.functionName==="aggregate3"){const a=await n.clone().json();if(!a.result)return Re("No result in aggregate3 response, returning original response"),n;try{const c=ke({abi:ie,functionName:"aggregate3",data:a.result}),u=i.args[0],l=await Xt();u.forEach((f,p)=>{try{const h=Bt({abi:ie,data:f.callData});if(h.functionName==="getUserWalletBalances"){const x=ke({abi:ie,functionName:"getUserWalletBalances",data:c[p]?.returnData});for(let w=0;w<x[0].length;w++){const $=x[0][w].toLowerCase(),C=l.find(T=>T.breakdown.some(k=>k.contractAddress.toLowerCase()===$.toLowerCase()));C&&(x[1][w]=BigInt(new ee(C?.balance).mul(ee.pow(10,C.decimals)).floor().toFixed()))}c[p].returnData=ct({abi:ie,functionName:"getUserWalletBalances",result:x})}if(h.functionName!=="balanceOf")return;const m=l.findIndex(x=>x.symbol==="USDC"&&x.breakdown.some($=>$.chain.id===999)?!1:x.breakdown.some(w=>w.contractAddress.toLowerCase()===f.target.toLowerCase()));if(m===-1)return;const b=l[m],y=b.breakdown.find(x=>x.contractAddress.toLowerCase()===f.target.toLowerCase());c[p].returnData=ct({abi:ie,functionName:"balanceOf",result:BigInt(new ee(b.balance).mul(ee.pow(10,y.decimals||b.decimals)).floor().toFixed())})}catch{}});const d=ct({abi:ie,functionName:"aggregate3",result:c});return _n({jsonrpc:"2.0",id:o.id,result:d})}catch(c){return console.log(c,"error"),n}}}}return n}}mm()})();
